/**
 * Minified by jsDelivr using Terser v5.10.0.
 * Original file: /npm/@finos/perspective-viewer-datagrid@1.3.8/dist/umd/perspective-viewer-datagrid.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):"object"==typeof exports&&"string"!=typeof exports.nodeName?t(exports):t(e.perspective_datagrid={})}("undefined"!=typeof self?self:this,(function(e){var t=Object.create,r=Object.defineProperty,l=Object.getOwnPropertyDescriptor,o=Object.getOwnPropertyNames,a=Object.getPrototypeOf,i=Object.prototype.hasOwnProperty,n=e=>r(e,"__esModule",{value:!0}),s=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),c=e=>((e,t,a)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of o(t))!i.call(e,n)&&"default"!==n&&r(e,n,{get:()=>t[n],enumerable:!(a=l(t,n))||a.enumerable});return e})(n(r(null!=e?t(a(e)):{},"default",e&&e.__esModule&&"default"in e?{get:()=>e.default,enumerable:!0}:{value:e,enumerable:!0})),e),d=s(((e,t)=>{t.exports.default={types:{float:{filter_operator:"==",aggregate:"sum",format:{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}},string:{filter_operator:"==",aggregate:"count"},integer:{filter_operator:"==",aggregate:"sum",format:{}},boolean:{filter_operator:"==",aggregate:"count"},datetime:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"},null_value:-1},date:{filter_operator:"==",aggregate:"count",format:{week:"numeric",year:"numeric",month:"numeric",day:"numeric"},null_value:-1}}}})),h=s(((e,t)=>{var r=d().default;function l(e){return e&&"object"==typeof e&&!Array.isArray(e)}function o(e,...t){if(!t.length)return e;let r=t.shift();if(l(e)&&l(r))for(let t in r)l(r[t])?(e[t]||Object.assign(e,{[t]:{}}),o(e[t],r[t])):Object.assign(e,{[t]:r[t]});return o(e,...t)}t.exports.get_types=function(){return Object.keys(t.exports.get_config().types)},t.exports.get_type_config=function(e){let r={};if(t.exports.get_config().types[e]&&Object.assign(r,t.exports.get_config().types[e]),r.type){let e=t.exports.get_type_config(r.type);return Object.assign(e,r),e}return r},window.__PERSPECTIVE_CONFIG__=void 0,t.exports.override_config=function(e){window.__PERSPECTIVE_CONFIG__&&console.warn("Config already initialized!"),window.__PERSPECTIVE_CONFIG__=o(r,e)},t.exports.get_config=function(){return window.__PERSPECTIVE_CONFIG__||(window.__PERSPECTIVE_CONFIG__=o(r,window.__TEMPLATE_CONFIG__||{})),window.__PERSPECTIVE_CONFIG__}})),u=s(((e,t)=>{(function(){var r,l,o,a,i,n,s,c,d,h,u,f,_,p,g,b,m,v,y,w,x,k,M,z,L,E,N,C,A,O,P,S,T,j,W,D,H,F,R,I,$,q,G,X,V,Y,B,K,U,J,Z,Q,ee,te,re,le,oe,ae,ie,ne,se,ce,de,he,ue,fe,_e,pe,ge,be,me,ve,ye,we,xe,ke,Me,ze,Le,Ee,Ne=[].slice;ke=function(){var e,t,r,l,o;for(e={},l=0,t=(o="Boolean Number String Function Array Date RegExp Undefined Null".split(" ")).length;l<t;l++)r=o[l],e["[object "+r+"]"]=r.toLowerCase();return function(t){var r;return r=Object.prototype.toString.call(t),e[r]||"object"}}(),B=function(e,t,r){return null==t&&(t=0),null==r&&(r=1),e<t&&(e=t),e>r&&(e=r),e},Me=function(e){return e.length>=3?Array.prototype.slice.call(e):e[0]},x=function(e){var t,r;for(e._clipped=!1,e._unclipped=e.slice(0),t=r=0;r<3;t=++r)t<3?((e[t]<0||e[t]>255)&&(e._clipped=!0),e[t]<0&&(e[t]=0),e[t]>255&&(e[t]=255)):3===t&&(e[t]<0&&(e[t]=0),e[t]>1&&(e[t]=1));return e._clipped||delete e._unclipped,e},a=Math.PI,me=Math.round,M=Math.cos,C=Math.floor,re=Math.pow,K=Math.log,ye=Math.sin,we=Math.sqrt,p=Math.atan2,Z=Math.max,_=Math.abs,s=2*a,i=a/3,l=a/180,n=180/a,w=function(){return arguments[0]instanceof r?arguments[0]:function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,arguments,(function(){}))},w.default=w,f=[],null!=t&&null!=t.exports&&(t.exports=w),"function"==typeof define&&define.amd?define([],(function(){return w})):(null!=e?e:this).chroma=w,w.version="1.4.1",u={},d=[],h=!1,r=function(){function e(){var e,t,r,l,o,a,i,n,s;for(a=this,t=[],n=0,l=arguments.length;n<l;n++)null!=(e=arguments[n])&&t.push(e);if(t.length>1&&(i=t[t.length-1]),null!=u[i])a._rgb=x(u[i](Me(t.slice(0,-1))));else{for(h||(d=d.sort((function(e,t){return t.p-e.p})),h=!0),s=0,o=d.length;s<o&&!(i=(r=d[s]).test.apply(r,t));s++);i&&(a._rgb=x(u[i].apply(u,t)))}null==a._rgb&&console.warn("unknown format: "+t),null==a._rgb&&(a._rgb=[0,0,0]),3===a._rgb.length&&a._rgb.push(1)}return e.prototype.toString=function(){return this.hex()},e}(),w._input=u,w.brewer=v={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},function(){var e,t;for(e in t=[],v)t.push(v[e.toLowerCase()]=v[e])}(),w.colors=ze={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},q=function(){var e,t,r,l,a,i,n;return l=(t=Me(arguments))[0],e=t[1],r=t[2],i=(l+16)/116,a=isNaN(e)?i:i+e/500,n=isNaN(r)?i:i-r/200,i=o.Yn*G(i),a=o.Xn*G(a),n=o.Zn*G(n),[Ee(3.2404542*a-1.5371385*i-.4985314*n),Ee(-.969266*a+1.8760108*i+.041556*n),r=Ee(.0556434*a-.2040259*i+1.0572252*n),t.length>3?t[3]:1]},Ee=function(e){return 255*(e<=.00304?12.92*e:1.055*re(e,1/2.4)-.055)},G=function(e){return e>o.t1?e*e*e:o.t2*(e-o.t0)},o={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},de=function(){var e,t,r,l,o,a,i;return r=(l=Me(arguments))[0],t=l[1],e=l[2],a=(o=pe(r,t,e))[0],[116*(i=o[1])-16,500*(a-i),200*(i-o[2])]},ge=function(e){return(e/=255)<=.04045?e/12.92:re((e+.055)/1.055,2.4)},Le=function(e){return e>o.t3?re(e,1/3):e/o.t2+o.t0},pe=function(){var e,t,r,l;return r=(l=Me(arguments))[0],t=l[1],e=l[2],r=ge(r),t=ge(t),e=ge(e),[Le((.4124564*r+.3575761*t+.1804375*e)/o.Xn),Le((.2126729*r+.7151522*t+.072175*e)/o.Yn),Le((.0193339*r+.119192*t+.9503041*e)/o.Zn)]},w.lab=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["lab"]),(function(){}))},u.lab=q,r.prototype.lab=function(){return de(this._rgb)},g=function(e){var t,r,l,o,a,i,n,s,c,d,h;return 2===(e=function(){var t,r,l;for(l=[],r=0,t=e.length;r<t;r++)o=e[r],l.push(w(o));return l}()).length?(c=function(){var t,r,l;for(l=[],r=0,t=e.length;r<t;r++)o=e[r],l.push(o.lab());return l}(),a=c[0],i=c[1],t=function(e){var t,r;return r=function(){var r,l;for(l=[],t=r=0;r<=2;t=++r)l.push(a[t]+e*(i[t]-a[t]));return l}(),w.lab.apply(w,r)}):3===e.length?(d=function(){var t,r,l;for(l=[],r=0,t=e.length;r<t;r++)o=e[r],l.push(o.lab());return l}(),a=d[0],i=d[1],n=d[2],t=function(e){var t,r;return r=function(){var r,l;for(l=[],t=r=0;r<=2;t=++r)l.push((1-e)*(1-e)*a[t]+2*(1-e)*e*i[t]+e*e*n[t]);return l}(),w.lab.apply(w,r)}):4===e.length?(h=function(){var t,r,l;for(l=[],r=0,t=e.length;r<t;r++)o=e[r],l.push(o.lab());return l}(),a=h[0],i=h[1],n=h[2],s=h[3],t=function(e){var t,r;return r=function(){var r,l;for(l=[],t=r=0;r<=2;t=++r)l.push((1-e)*(1-e)*(1-e)*a[t]+3*(1-e)*(1-e)*e*i[t]+3*(1-e)*e*e*n[t]+e*e*e*s[t]);return l}(),w.lab.apply(w,r)}):5===e.length&&(r=g(e.slice(0,3)),l=g(e.slice(2,5)),t=function(e){return e<.5?r(2*e):l(2*(e-.5))}),t},w.bezier=function(e){var t;return(t=g(e)).scale=function(){return w.scale(t)},t},w.cubehelix=function(e,t,r,l,o){var a,i,n;return null==e&&(e=300),null==t&&(t=-1.5),null==r&&(r=1),null==l&&(l=1),null==o&&(o=[0,1]),a=0,"array"===ke(o)?i=o[1]-o[0]:(i=0,o=[o,o]),(n=function(n){var c,d,h,u,f;return c=s*((e+120)/360+t*n),u=re(o[0]+i*n,l),d=(0!==a?r[0]+n*a:r)*u*(1-u)/2,h=M(c),f=ye(c),w(x([255*(u+d*(-.14861*h+1.78277*f)),255*(u+d*(-.29227*h-.90649*f)),255*(u+d*(1.97294*h)),1]))}).start=function(t){return null==t?e:(e=t,n)},n.rotations=function(e){return null==e?t:(t=e,n)},n.gamma=function(e){return null==e?l:(l=e,n)},n.hue=function(e){return null==e?r:("array"===ke(r=e)?0===(a=r[1]-r[0])&&(r=r[1]):a=0,n)},n.lightness=function(e){return null==e?o:("array"===ke(e)?(o=e,i=e[1]-e[0]):(o=[e,e],i=0),n)},n.scale=function(){return w.scale(n)},n.hue(r),n},w.random=function(){var e,t;for("0123456789abcdef",e="#",t=0;t<6;++t)e+="0123456789abcdef".charAt(C(16*Math.random()));return new r(e)},f=[],W=function(e,t,r,l){var o,a,i,n;for(null==r&&(r=.5),null==l&&(l="rgb"),"object"!==ke(e)&&(e=w(e)),"object"!==ke(t)&&(t=w(t)),i=0,a=f.length;i<a;i++)if(l===(o=f[i])[0]){n=o[1](e,t,r,l);break}if(null==n)throw"color mode "+l+" is not supported";return n.alpha(e.alpha()+r*(t.alpha()-e.alpha()))},w.interpolate=W,r.prototype.interpolate=function(e,t,r){return W(this,e,t,r)},w.mix=W,r.prototype.mix=r.prototype.interpolate,u.rgb=function(){var e,t,r,l;for(e in r=[],t=Me(arguments))l=t[e],r.push(l);return r},w.rgb=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["rgb"]),(function(){}))},r.prototype.rgb=function(e){return null==e&&(e=!0),e?this._rgb.map(Math.round).slice(0,3):this._rgb.slice(0,3)},r.prototype.rgba=function(e){return null==e&&(e=!0),e?[Math.round(this._rgb[0]),Math.round(this._rgb[1]),Math.round(this._rgb[2]),this._rgb[3]]:this._rgb.slice(0)},d.push({p:3,test:function(e){var t;if(t=Me(arguments),"array"===ke(t)&&3===t.length||4===t.length&&"number"===ke(t[3])&&t[3]>=0&&t[3]<=1)return"rgb"}}),u.lrgb=u.rgb,F=function(e,t,l,o){var a,i;return a=e._rgb,i=t._rgb,new r(we(re(a[0],2)*(1-l)+re(i[0],2)*l),we(re(a[1],2)*(1-l)+re(i[1],2)*l),we(re(a[2],2)*(1-l)+re(i[2],2)*l),o)},c=function(e){var t,l,o,a,i;for(t=1/e.length,i=[0,0,0,0],o=0,l=e.length;o<l;o++)a=e[o]._rgb,i[0]+=re(a[0],2)*t,i[1]+=re(a[1],2)*t,i[2]+=re(a[2],2)*t,i[3]+=a[3]*t;return i[0]=we(i[0]),i[1]=we(i[1]),i[2]=we(i[2]),i[3]>1&&(i[3]=1),new r(x(i))},f.push(["lrgb",F]),w.average=function(e,t){var r,l,o,i,n,s,d,h,u,f,_,g,b;if(null==t&&(t="rgb"),u=e.length,d=(e=e.map((function(e){return w(e)}))).splice(0,1)[0],"lrgb"===t)return c(e);for(h in i=[],n=0,s=0,g=d.get(t))g[h]=g[h]||0,i.push(isNaN(g[h])?0:1),"h"===t.charAt(h)&&!isNaN(g[h])&&(r=g[h]/180*a,n+=M(r),s+=ye(r));for(l=d.alpha(),_=0,f=e.length;_<f;_++)for(h in b=(o=e[_]).get(t),l+=o.alpha(),g)isNaN(b[h])||(i[h]+=1,"h"===t.charAt(h)?(r=b[h]/180*a,n+=M(r),s+=ye(r)):g[h]+=b[h]);for(h in g)if("h"===t.charAt(h)){for(r=p(s/i[h],n/i[h])/a*180;r<0;)r+=360;for(;r>=360;)r-=360;g[h]=r}else g[h]=g[h]/i[h];return w(g,t).alpha(l/u)},O=function(e){var t,r;if(e.match(/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))return(4===e.length||7===e.length)&&(e=e.substr(1)),3===e.length&&(e=(e=e.split(""))[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[(r=parseInt(e,16))>>16,r>>8&255,255&r,1];if(e.match(/^#?([A-Fa-f0-9]{8})$/))return 9===e.length&&(e=e.substr(1)),[(r=parseInt(e,16))>>24&255,r>>16&255,r>>8&255,me((255&r)/255*100)/100];if(null!=u.css&&(t=u.css(e)))return t;throw"unknown color: "+e},ie=function(e,t){var r,l,o,a,i,n;return null==t&&(t="auto"),i=e[0],o=e[1],l=e[2],r=e[3],"auto"===t&&(t=r<1?"rgba":"rgb"),i=Math.round(i),o=Math.round(o),l=Math.round(l),n=(n="000000"+(i<<16|o<<8|l).toString(16)).substr(n.length-6),a=(a="0"+me(255*r).toString(16)).substr(a.length-2),"#"+function(){switch(t.toLowerCase()){case"rgba":return n+a;case"argb":return a+n;default:return n}}()},u.hex=function(e){return O(e)},w.hex=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["hex"]),(function(){}))},r.prototype.hex=function(e){return null==e&&(e="auto"),ie(this._rgb,e)},d.push({p:4,test:function(e){if(1===arguments.length&&"string"===ke(e))return"hex"}}),T=function(){var e,t,r,l,o,a,i,n,s,c,d,h,u,f;if(o=(e=Me(arguments))[0],d=e[1],i=e[2],0===d)s=l=t=255*i;else{for(r=[0,0,0],h=2*i-(u=i<.5?i*(1+d):i+d-i*d),(f=[0,0,0])[0]=(o/=360)+1/3,f[1]=o,f[2]=o-1/3,a=n=0;n<=2;a=++n)f[a]<0&&(f[a]+=1),f[a]>1&&(f[a]-=1),6*f[a]<1?r[a]=h+6*(u-h)*f[a]:2*f[a]<1?r[a]=u:3*f[a]<2?r[a]=h+(u-h)*(2/3-f[a])*6:r[a]=h;s=(c=[me(255*r[0]),me(255*r[1]),me(255*r[2])])[0],l=c[1],t=c[2]}return e.length>3?[s,l,t,e[3]]:[s,l,t]},se=function(e,t,r){var l,o,a,i,n;return void 0!==e&&e.length>=3&&(e=(i=e)[0],t=i[1],r=i[2]),e/=255,t/=255,r/=255,a=Math.min(e,t,r),o=((Z=Math.max(e,t,r))+a)/2,Z===a?(n=0,l=Number.NaN):n=o<.5?(Z-a)/(Z+a):(Z-a)/(2-Z-a),e===Z?l=(t-r)/(Z-a):t===Z?l=2+(r-e)/(Z-a):r===Z&&(l=4+(e-t)/(Z-a)),(l*=60)<0&&(l+=360),[l,n,o]},w.hsl=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["hsl"]),(function(){}))},u.hsl=T,r.prototype.hsl=function(){return se(this._rgb)},j=function(){var e,t,r,l,o,a,i,n,s,c,d,h,u,f,_,p,g,b;if(o=(e=Me(arguments))[0],p=e[1],b=e[2],b*=255,0===p)s=l=t=b;else switch(360===o&&(o=0),o>360&&(o-=360),o<0&&(o+=360),o/=60,a=C(o),r=o-a,i=b*(1-p),n=b*(1-p*r),g=b*(1-p*(1-r)),a){case 0:s=(c=[b,g,i])[0],l=c[1],t=c[2];break;case 1:s=(d=[n,b,i])[0],l=d[1],t=d[2];break;case 2:s=(h=[i,b,g])[0],l=h[1],t=h[2];break;case 3:s=(u=[i,n,b])[0],l=u[1],t=u[2];break;case 4:s=(f=[g,i,b])[0],l=f[1],t=f[2];break;case 5:s=(_=[b,i,n])[0],l=_[1],t=_[2]}return[s,l,t,e.length>3?e[3]:1]},ce=function(){var e,t,r,l,o,a,i,n,s;return a=(i=Me(arguments))[0],r=i[1],e=i[2],o=Math.min(a,r,e),t=(Z=Math.max(a,r,e))-o,s=Z/255,0===Z?(l=Number.NaN,n=0):(n=t/Z,a===Z&&(l=(r-e)/t),r===Z&&(l=2+(e-a)/t),e===Z&&(l=4+(a-r)/t),(l*=60)<0&&(l+=360)),[l,n,s]},w.hsv=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["hsv"]),(function(){}))},u.hsv=j,r.prototype.hsv=function(){return ce(this._rgb)},ee=function(e){return"number"===ke(e)&&e>=0&&e<=16777215?[e>>16,e>>8&255,255&e,1]:(console.warn("unknown num color: "+e),[0,0,0,1])},fe=function(){var e;return((e=Me(arguments))[0]<<16)+(e[1]<<8)+e[2]},w.num=function(e){return new r(e,"num")},r.prototype.num=function(e){return null==e&&(e="rgb"),fe(this._rgb,e)},u.num=ee,d.push({p:1,test:function(e){if(1===arguments.length&&"number"===ke(e)&&e>=0&&e<=16777215)return"num"}}),A=function(){var e,t,r,l,o,a,i,n,s,c,d,h,u,f,_,p,g,b,m,v;if(n=(r=Me(arguments))[0],o=r[1],t=r[2],i=i/100*255,e=255*(o/=100),0===o)h=i=l=t;else switch(360===n&&(n=0),n>360&&(n-=360),n<0&&(n+=360),n/=60,s=C(n),a=n-s,c=t*(1-o),d=c+e*(1-a),m=c+e*a,v=c+e,s){case 0:h=(u=[v,m,c])[0],i=u[1],l=u[2];break;case 1:h=(f=[d,v,c])[0],i=f[1],l=f[2];break;case 2:h=(_=[c,v,m])[0],i=_[1],l=_[2];break;case 3:h=(p=[c,d,v])[0],i=p[1],l=p[2];break;case 4:h=(g=[m,c,v])[0],i=g[1],l=g[2];break;case 5:h=(b=[v,c,d])[0],i=b[1],l=b[2]}return[h,i,l,r.length>3?r[3]:1]},ae=function(){var e,t,r,l,o,a,i,n,s;return n=(s=Me(arguments))[0],o=s[1],t=s[2],i=Math.min(n,o,t),r=100*(l=(Z=Math.max(n,o,t))-i)/255,e=i/(255-l)*100,0===l?a=Number.NaN:(n===Z&&(a=(o-t)/l),o===Z&&(a=2+(t-n)/l),t===Z&&(a=4+(n-o)/l),(a*=60)<0&&(a+=360)),[a,r,e]},w.hcg=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["hcg"]),(function(){}))},u.hcg=A,r.prototype.hcg=function(){return ae(this._rgb)},z=function(e){var t,r,l,o,a,i,n,s;if(e=e.toLowerCase(),null!=w.colors&&w.colors[e])return O(w.colors[e]);if(a=e.match(/rgb\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*\)/)){for(n=a.slice(1,4),o=i=0;i<=2;o=++i)n[o]=+n[o];n[3]=1}else if(a=e.match(/rgba\(\s*(\-?\d+),\s*(\-?\d+)\s*,\s*(\-?\d+)\s*,\s*([01]|[01]?\.\d+)\)/))for(n=a.slice(1,5),o=s=0;s<=3;o=++s)n[o]=+n[o];else if(a=e.match(/rgb\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/)){for(n=a.slice(1,4),o=t=0;t<=2;o=++t)n[o]=me(2.55*n[o]);n[3]=1}else if(a=e.match(/rgba\(\s*(\-?\d+(?:\.\d+)?)%,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/)){for(n=a.slice(1,5),o=r=0;r<=2;o=++r)n[o]=me(2.55*n[o]);n[3]=+n[3]}else(a=e.match(/hsl\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*\)/))?((l=a.slice(1,4))[1]*=.01,l[2]*=.01,(n=T(l))[3]=1):(a=e.match(/hsla\(\s*(\-?\d+(?:\.\d+)?),\s*(\-?\d+(?:\.\d+)?)%\s*,\s*(\-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)/))&&((l=a.slice(1,4))[1]*=.01,l[2]*=.01,(n=T(l))[3]=+a[4]);return n},oe=function(e){var t;return"rgb"===(t=e[3]<1?"rgba":"rgb")?t+"("+e.slice(0,3).map(me).join(",")+")":"rgba"===t?t+"("+e.slice(0,3).map(me).join(",")+","+e[3]+")":void 0},be=function(e){return me(100*e)/100},S=function(e,t){var r;return r=t<1?"hsla":"hsl",e[0]=be(e[0]||0),e[1]=be(100*e[1])+"%",e[2]=be(100*e[2])+"%","hsla"===r&&(e[3]=t),r+"("+e.join(",")+")"},u.css=function(e){return z(e)},w.css=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["css"]),(function(){}))},r.prototype.css=function(e){return null==e&&(e="rgb"),"rgb"===e.slice(0,3)?oe(this._rgb):"hsl"===e.slice(0,3)?S(this.hsl(),this.alpha()):void 0},u.named=function(e){return O(ze[e])},d.push({p:5,test:function(e){if(1===arguments.length&&null!=ze[e])return"named"}}),r.prototype.name=function(e){var t,r;for(r in arguments.length&&(ze[e]&&(this._rgb=O(ze[e])),this._rgb[3]=1),t=this.hex("rgb"),ze)if(t===ze[r])return r;return t},X=function(){var e,t,r,o;return r=(o=Me(arguments))[0],e=o[1],t=o[2],[r,M(t*=l)*e,ye(t)*e]},V=function(){var e,t,r,l,o,a,i,n,s;return i=(r=Me(arguments))[0],o=r[1],a=r[2],e=(n=X(i,o,a))[0],t=n[1],l=n[2],[(s=q(e,t,l))[0],s[1],l=s[2],r.length>3?r[3]:1]},$=function(){var e,t,r,l,o,a;return o=(a=Me(arguments))[0],e=a[1],t=a[2],r=we(e*e+t*t),l=(p(t,e)*n+360)%360,0===me(1e4*r)&&(l=Number.NaN),[o,r,l]},he=function(){var e,t,r,l,o,a,i;return o=(a=Me(arguments))[0],r=a[1],t=a[2],l=(i=de(o,r,t))[0],e=i[1],t=i[2],$(l,e,t)},w.lch=function(){var e;return e=Me(arguments),new r(e,"lch")},w.hcl=function(){var e;return e=Me(arguments),new r(e,"hcl")},u.lch=V,u.hcl=function(){var e,t,r,l;return t=(l=Me(arguments))[0],e=l[1],r=l[2],V([r,e,t])},r.prototype.lch=function(){return he(this._rgb)},r.prototype.hcl=function(){return he(this._rgb).reverse()},le=function(e){var t,r,l,o,a,i;return null==e&&(e="rgb"),a=(i=Me(arguments))[0],l=i[1],t=i[2],l/=255,t/=255,[(1-(a/=255)-(o=1-Math.max(a,Math.max(l,t))))*(r=o<1?1/(1-o):0),(1-l-o)*r,(1-t-o)*r,o]},k=function(){var e,t,r,l,o,a;return r=(t=Me(arguments))[0],o=t[1],a=t[2],l=t[3],e=t.length>4?t[4]:1,1===l?[0,0,0,e]:[r>=1?0:255*(1-r)*(1-l),o>=1?0:255*(1-o)*(1-l),a>=1?0:255*(1-a)*(1-l),e]},u.cmyk=function(){return k(Me(arguments))},w.cmyk=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["cmyk"]),(function(){}))},r.prototype.cmyk=function(){return le(this._rgb)},u.gl=function(){var e,t,r,l,o;for(l=function(){var e,r;for(t in r=[],e=Me(arguments))o=e[t],r.push(o);return r}.apply(this,arguments),e=r=0;r<=2;e=++r)l[e]*=255;return l},w.gl=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["gl"]),(function(){}))},r.prototype.gl=function(){var e;return[(e=this._rgb)[0]/255,e[1]/255,e[2]/255,e[3]]},ue=function(e,t,r){var l;return e=(l=Me(arguments))[0],t=l[1],r=l[2],.2126*(e=U(e))+.7152*(t=U(t))+.0722*(r=U(r))},U=function(e){return(e/=255)<=.03928?e/12.92:re((e+.055)/1.055,2.4)},I=function(e,t,l,o){var a,i;return a=e._rgb,i=t._rgb,new r(a[0]+l*(i[0]-a[0]),a[1]+l*(i[1]-a[1]),a[2]+l*(i[2]-a[2]),o)},f.push(["rgb",I]),r.prototype.luminance=function(e,t){var r,l,o,a,i;return null==t&&(t="rgb"),arguments.length?(a=this._rgb,0===e?a=[0,0,0,this._rgb[3]]:1===e?a=[255,255,255,this[3]]:(r=ue(this._rgb),l=1e-7,o=20,i=function(r,a){var n,s;return n=(s=r.interpolate(a,.5,t)).luminance(),Math.abs(e-n)<l||!o--?s:n>e?i(r,s):i(s,a)},a=r>e?i(w("black"),this).rgba():i(this,w("white")).rgba()),w(a).alpha(this.alpha())):ue(this._rgb)},xe=function(e){var t,r,l,o;return(o=e/100)<66?(l=255,r=-155.25485562709179-.44596950469579133*(r=o-2)+104.49216199393888*K(r),t=o<20?0:.8274096064007395*(t=o-10)-254.76935184120902+115.67994401066147*K(t)):(l=351.97690566805693+.114206453784165*(l=o-55)-40.25366309332127*K(l),r=325.4494125711974+.07943456536662342*(r=o-50)-28.0852963507957*K(r),t=255),[l,r,t]},_e=function(){var e,t,r,l,o,a,i,n;for(o=(a=Me(arguments))[0],a[1],e=a[2],l=1e3,r=4e4,t=.4;r-l>t;)(i=xe(n=.5*(r+l)))[2]/i[0]>=e/o?r=n:l=n;return me(n)},w.temperature=w.kelvin=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["temperature"]),(function(){}))},u.temperature=u.kelvin=u.K=xe,r.prototype.temperature=function(){return _e(this._rgb)},r.prototype.kelvin=r.prototype.temperature,w.contrast=function(e,t){var l,o,a,i;return("string"===(a=ke(e))||"number"===a)&&(e=new r(e)),("string"===(i=ke(t))||"number"===i)&&(t=new r(t)),(l=e.luminance())>(o=t.luminance())?(l+.05)/(o+.05):(o+.05)/(l+.05)},w.distance=function(e,t,l){var o,a,i,n,s,c,d;for(a in null==l&&(l="lab"),("string"===(s=ke(e))||"number"===s)&&(e=new r(e)),("string"===(c=ke(t))||"number"===c)&&(t=new r(t)),i=e.get(l),n=t.get(l),d=0,i)d+=(o=(i[a]||0)-(n[a]||0))*o;return Math.sqrt(d)},w.deltaE=function(e,t,l,o){var i,n,s,c,d,h,u,f,g,b,m,v,y,w,x,k,z,L,E,N,C,A,O,P;for(null==l&&(l=1),null==o&&(o=1),("string"===(x=ke(e))||"number"===x)&&(e=new r(e)),("string"===(k=ke(t))||"number"===k)&&(t=new r(t)),i=(z=e.lab())[0],s=z[1],d=z[2],n=(L=t.lab())[0],c=L[1],h=L[2],u=we(s*s+d*d),f=we(c*c+h*h),N=i<16?.511:.040975*i/(1+.01765*i),E=.0638*u/(1+.0131*u)+.638,w=u<1e-6?0:180*p(d,s)/a;w<0;)w+=360;for(;w>=360;)w-=360;return C=w>=164&&w<=345?.56+_(.2*M(a*(w+168)/180)):.36+_(.4*M(a*(w+35)/180)),y=we((g=u*u*u*u)/(g+1900)),we((A=(i-n)/(l*N))*A+(O=(v=u-f)/(o*E))*O+((b=s-c)*b+(m=d-h)*m-v*v)/((P=E*(y*C+1-y))*P))},r.prototype.get=function(e){var t,r,l,o,a;return this,l=(o=e.split("."))[0],t=o[1],a=this[l](),t?(r=l.indexOf(t))>-1?a[r]:console.warn("unknown channel "+t+" in mode "+l):a},r.prototype.set=function(e,t){var r,l,o,a,i;if(this,o=(a=e.split("."))[0],r=a[1])if(i=this[o](),(l=o.indexOf(r))>-1)if("string"===ke(t))switch(t.charAt(0)){case"+":case"-":i[l]+=+t;break;case"*":i[l]*=+t.substr(1);break;case"/":i[l]/=+t.substr(1);break;default:i[l]=+t}else i[l]=t;else console.warn("unknown channel "+r+" in mode "+o);else i=t;return w(i,o).alpha(this.alpha())},r.prototype.clipped=function(){return this._rgb._clipped||!1},r.prototype.alpha=function(e){return arguments.length?w.rgb([this._rgb[0],this._rgb[1],this._rgb[2],e]):this._rgb[3]},r.prototype.darken=function(e){var t;return null==e&&(e=1),this,(t=this.lab())[0]-=o.Kn*e,w.lab(t).alpha(this.alpha())},r.prototype.brighten=function(e){return null==e&&(e=1),this.darken(-e)},r.prototype.darker=r.prototype.darken,r.prototype.brighter=r.prototype.brighten,r.prototype.saturate=function(e){var t;return null==e&&(e=1),this,(t=this.lch())[1]+=e*o.Kn,t[1]<0&&(t[1]=0),w.lch(t).alpha(this.alpha())},r.prototype.desaturate=function(e){return null==e&&(e=1),this.saturate(-e)},r.prototype.premultiply=function(){var e,t;return t=this.rgb(),e=this.alpha(),w(t[0]*e,t[1]*e,t[2]*e,e)},Q=function(e,t){return e*t/255},L=function(e,t){return e>t?t:e},Y=function(e,t){return e>t?e:t},ve=function(e,t){return 255*(1-(1-e/255)*(1-t/255))},te=function(e,t){return t<128?2*e*t/255:255*(1-2*(1-e/255)*(1-t/255))},y=function(e,t){return 255*(1-(1-t/255)/(e/255))},E=function(e,t){return 255===e||(e=t/255*255/(1-e/255))>255?255:e},(b=function(e,t,r){if(!b[r])throw"unknown blend mode "+r;return b[r](e,t)}).normal=(m=function(e){return function(t,r){var l,o;return l=w(r).rgb(),o=w(t).rgb(),w(e(l,o),"rgb")}})((N=function(e){return function(t,r){var l,o,a;for(a=[],l=o=0;o<=3;l=++o)a[l]=e(t[l],r[l]);return a}})((function(e,t){return e}))),b.multiply=m(N(Q)),b.screen=m(N(ve)),b.overlay=m(N(te)),b.darken=m(N(L)),b.lighten=m(N(Y)),b.dodge=m(N(E)),b.burn=m(N(y)),w.blend=b,w.analyze=function(e){var t,r,l,o;for(l={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},r=0,t=e.length;r<t;r++)null!=(o=e[r])&&!isNaN(o)&&(l.values.push(o),l.sum+=o,o<l.min&&(l.min=o),o>l.max&&(l.max=o),l.count+=1);return l.domain=[l.min,l.max],l.limits=function(e,t){return w.limits(l,e,t)},l},w.scale=function(e,t){var r,l,o,a,i,n,s,c,d,h,u,f,_,p,g,b,m,v,y,x,k;return d="rgb",h=w("#ccc"),p=0,!1,i=[0,1],_=[],f=[0,0],r=!1,o=[],u=!1,c=0,s=1,a=!1,l={},g=!0,n=1,x=function(e){var t,r,l,a,i,n;if(null==e&&(e=["#fff","#000"]),null!=e&&"string"===ke(e)&&null!=w.brewer&&(e=w.brewer[e]||w.brewer[e.toLowerCase()]||e),"array"===ke(e)){for(1===e.length&&(e=[e[0],e[0]]),t=l=0,a=(e=e.slice(0)).length-1;0<=a?l<=a:l>=a;t=0<=a?++l:--l)r=e[t],"string"===ke(r)&&(e[t]=w(r));for(_.length=0,t=n=0,i=e.length-1;0<=i?n<=i:n>=i;t=0<=i?++n:--n)_.push(t/(e.length-1))}return y(),o=e},m=function(e){var t,l;if(null!=r){for(l=r.length-1,t=0;t<l&&e>=r[t];)t++;return t-1}return 0},k=function(e){return e},function(e){var t,l,o,a,i;return i=e,r.length>2&&(a=r.length-1,t=m(e),o=r[0]+(r[1]-r[0])*(0+.5*p),l=r[a-1]+(r[a]-r[a-1])*(1-.5*p),i=c+(r[t]+.5*(r[t+1]-r[t])-o)/(l-o)*(s-c)),i},v=function(e,t){var a,i,u,p,b,v,y;if(null==t&&(t=!1),isNaN(e)||null===e)return h;if(t?y=e:r&&r.length>2?y=m(e)/(r.length-2):y=s!==c?(e-c)/(s-c):1,t||(y=k(y)),1!==n&&(y=re(y,n)),y=f[0]+y*(1-f[0]-f[1]),y=Math.min(1,Math.max(0,y)),u=Math.floor(1e4*y),g&&l[u])a=l[u];else{if("array"===ke(o))for(i=p=0,v=_.length-1;0<=v?p<=v:p>=v;i=0<=v?++p:--p){if(y<=(b=_[i])){a=o[i];break}if(y>=b&&i===_.length-1){a=o[i];break}if(y>b&&y<_[i+1]){y=(y-b)/(_[i+1]-b),a=w.interpolate(o[i],o[i+1],y,d);break}}else"function"===ke(o)&&(a=o(y));g&&(l[u]=a)}return a},y=function(){return l={}},x(e),(b=function(e){var t;return t=w(v(e)),u&&t[u]?t[u]():t}).classes=function(e){var t;return null!=e?("array"===ke(e)?(r=e,i=[e[0],e[e.length-1]]):(t=w.analyze(i),r=0===e?[t.min,t.max]:w.limits(t,"e",e)),b):r},b.domain=function(e){var t,r,l,a,n,d,h;if(!arguments.length)return i;if(c=e[0],s=e[e.length-1],_=[],l=o.length,e.length===l&&c!==s)for(n=0,a=e.length;n<a;n++)r=e[n],_.push((r-c)/(s-c));else for(t=h=0,d=l-1;0<=d?h<=d:h>=d;t=0<=d?++h:--h)_.push(t/(l-1));return i=[c,s],b},b.mode=function(e){return arguments.length?(d=e,y(),b):d},b.range=function(e,t){return x(e),b},b.out=function(e){return u=e,b},b.spread=function(e){return arguments.length?(p=e,b):p},b.correctLightness=function(e){return null==e&&(e=!0),a=e,y(),k=a?function(e){var t,r,l,o,a,i,n,s,c;for(t=v(0,!0).lab()[0],r=v(1,!0).lab()[0],n=t>r,l=v(e,!0).lab()[0],o=l-(a=t+(r-t)*e),s=0,c=1,i=20;Math.abs(o)>.01&&i-- >0;)n&&(o*=-1),o<0?(s=e,e+=.5*(c-e)):(c=e,e+=.5*(s-e)),l=v(e,!0).lab()[0],o=l-a;return e}:function(e){return e},b},b.padding=function(e){return null!=e?("number"===ke(e)&&(e=[e,e]),f=e,b):f},b.colors=function(t,l){var a,n,s,c,d,h,u,f;if(arguments.length<2&&(l="hex"),d=[],0===arguments.length)d=o.slice(0);else if(1===t)d=[b(.5)];else if(t>1)n=i[0],a=i[1]-n,d=function(){h=[];for(var e=0;0<=t?e<t:e>t;0<=t?e++:e--)h.push(e);return h}.apply(this).map((function(e){return b(n+e/(t-1)*a)}));else{if(e=[],u=[],r&&r.length>2)for(s=f=1,c=r.length;1<=c?f<c:f>c;s=1<=c?++f:--f)u.push(.5*(r[s-1]+r[s]));else u=i;d=u.map((function(e){return b(e)}))}return w[l]&&(d=d.map((function(e){return e[l]()}))),d},b.cache=function(e){return null!=e?(g=e,b):g},b.gamma=function(e){return null!=e?(n=e,b):n},b.nodata=function(e){return null!=e?(h=w(e),b):h},b},null==w.scales&&(w.scales={}),w.scales.cool=function(){return w.scale([w.hsl(180,1,.9),w.hsl(250,.7,.4)])},w.scales.hot=function(){return w.scale(["#000","#f00","#ff0","#fff"],[0,.25,.75,1]).mode("rgb")},w.analyze=function(e,t,r){var l,o,a,i,n,s;if(n={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0},null==r&&(r=function(){return!0}),l=function(e){null!=e&&!isNaN(e)&&(n.values.push(e),n.sum+=e,e<n.min&&(n.min=e),e>n.max&&(n.max=e),n.count+=1)},s=function(e,o){if(r(e,o))return null!=t&&"function"===ke(t)?l(t(e)):null!=t&&"string"===ke(t)||"number"===ke(t)?l(e[t]):l(e)},"array"===ke(e))for(i=0,a=e.length;i<a;i++)s(e[i]);else for(o in e)s(e[o],o);return n.domain=[n.min,n.max],n.limits=function(e,t){return w.limits(n,e,t)},n},w.limits=function(e,t,r){var l,o,a,i,n,s,c,d,h,u,f,p,g,b,m,v,y,x,k,M,z,L,E,N,A,O,P,S,T,j,W,D,H,F,R,I,$,q,G,X,V,Y,B,U,J,Q,ee,te,le,oe,ae,ie,ne,se,ce;if(null==t&&(t="equal"),null==r&&(r=7),"array"===ke(e)&&(e=w.analyze(e)),A=e.min,Z=e.max,e.sum,se=e.values.sort((function(e,t){return e-t})),1===r)return[A,Z];if(E=[],"c"===t.substr(0,1)&&(E.push(A),E.push(Z)),"e"===t.substr(0,1)){for(E.push(A),M=W=1,R=r-1;1<=R?W<=R:W>=R;M=1<=R?++W:--W)E.push(A+M/r*(Z-A));E.push(Z)}else if("l"===t.substr(0,1)){if(A<=0)throw"Logarithmic scales are only possible for values > 0";for(O=Math.LOG10E*K(A),N=Math.LOG10E*K(Z),E.push(A),M=ce=1,I=r-1;1<=I?ce<=I:ce>=I;M=1<=I?++ce:--ce)E.push(re(10,O+M/r*(N-O)));E.push(Z)}else if("q"===t.substr(0,1)){for(E.push(A),M=l=1,Y=r-1;1<=Y?l<=Y:l>=Y;M=1<=Y?++l:--l)D=(se.length-1)*M/r,(H=C(D))===D?E.push(se[H]):(F=D-H,E.push(se[H]*(1-F)+se[H+1]*F));E.push(Z)}else if("k"===t.substr(0,1)){for(S=se.length,b=new Array(S),x=new Array(r),oe=!0,T=0,v=null,(v=[]).push(A),M=o=1,B=r-1;1<=B?o<=B:o>=B;M=1<=B?++o:--o)v.push(A+M/r*(Z-A));for(v.push(Z);oe;){for(z=a=0,U=r-1;0<=U?a<=U:a>=U;z=0<=U?++a:--a)x[z]=0;for(M=i=0,J=S-1;0<=J?i<=J:i>=J;M=0<=J?++i:--i){for(ne=se[M],P=Number.MAX_VALUE,z=n=0,Q=r-1;0<=Q?n<=Q:n>=Q;z=0<=Q?++n:--n)(k=_(v[z]-ne))<P&&(P=k,m=z);x[m]++,b[M]=m}for(j=new Array(r),z=s=0,ee=r-1;0<=ee?s<=ee:s>=ee;z=0<=ee?++s:--s)j[z]=null;for(M=c=0,te=S-1;0<=te?c<=te:c>=te;M=0<=te?++c:--c)null===j[y=b[M]]?j[y]=se[M]:j[y]+=se[M];for(z=d=0,le=r-1;0<=le?d<=le:d>=le;z=0<=le?++d:--d)j[z]*=1/x[z];for(oe=!1,z=h=0,$=r-1;0<=$?h<=$:h>=$;z=0<=$?++h:--h)if(j[z]!==v[M]){oe=!0;break}v=j,++T>200&&(oe=!1)}for(L={},z=u=0,q=r-1;0<=q?u<=q:u>=q;z=0<=q?++u:--u)L[z]=[];for(M=f=0,G=S-1;0<=G?f<=G:f>=G;M=0<=G?++f:--f)L[y=b[M]].push(se[M]);for(ae=[],z=p=0,X=r-1;0<=X?p<=X:p>=X;z=0<=X?++p:--p)ae.push(L[z][0]),ae.push(L[z][L[z].length-1]);for(ae=ae.sort((function(e,t){return e-t})),E.push(ae[0]),M=g=1,V=ae.length-1;g<=V;M=g+=2)ie=ae[M],!isNaN(ie)&&-1===E.indexOf(ie)&&E.push(ie)}return E},P=function(e,t,r){var l,o,a,n;return e=(l=Me(arguments))[0],t=l[1],r=l[2],isNaN(e)&&(e=0),(e/=360)<1/3?a=1-((o=(1-t)/3)+(n=(1+t*M(s*e)/M(i-s*e))/3)):e<2/3?o=1-((n=(1-t)/3)+(a=(1+t*M(s*(e-=1/3))/M(i-s*e))/3)):n=1-((a=(1-t)/3)+(o=(1+t*M(s*(e-=2/3))/M(i-s*e))/3)),[255*(n=B(r*n*3)),255*(a=B(r*a*3)),255*(o=B(r*o*3)),l.length>3?l[3]:1]},ne=function(){var e,t,r,l,o,a,i;return o=(a=Me(arguments))[0],t=a[1],e=a[2],s=2*Math.PI,o/=255,t/=255,e/=255,0===(i=1-Math.min(o,t,e)/(l=(o+t+e)/3))?r=0:(r=(o-t+(o-e))/2,r/=Math.sqrt((o-t)*(o-t)+(o-e)*(t-e)),r=Math.acos(r),e>t&&(r=s-r),r/=s),[360*r,i,l]},w.hsi=function(){return function(e,t,r){r.prototype=e.prototype;var l=new r,o=e.apply(l,t);return Object(o)===o?o:l}(r,Ne.call(arguments).concat(["hsi"]),(function(){}))},u.hsi=P,r.prototype.hsi=function(){return ne(this._rgb)},D=function(e,t,r,l){var o,a,i,n,s,c,d,h,u,f;return"hsl"===l?(u=e.hsl(),f=t.hsl()):"hsv"===l?(u=e.hsv(),f=t.hsv()):"hcg"===l?(u=e.hcg(),f=t.hcg()):"hsi"===l?(u=e.hsi(),f=t.hsi()):("lch"===l||"hcl"===l)&&(l="hcl",u=e.hcl(),f=t.hcl()),"h"===l.substr(0,1)&&(a=u[0],d=u[1],n=u[2],i=f[0],h=f[1],s=f[2]),isNaN(a)||isNaN(i)?isNaN(a)?isNaN(i)?o=Number.NaN:(o=i,(1===n||0===n)&&"hsv"!==l&&(c=h)):(o=a,(1===s||0===s)&&"hsv"!==l&&(c=d)):o=a+r*(i>a&&i-a>180?i-(a+360):i<a&&a-i>180?i+360-a:i-a),null==c&&(c=d+r*(h-d)),w[l](o,c,n+r*(s-n))},R=function(e,t,r,l){var o,a;return o=e.num(),a=t.num(),w.num(o+(a-o)*r,"num")},(f=f.concat(function(){var e,t,r,l;for(l=[],t=0,e=(r=["hsv","hsl","hsi","hcl","lch","hcg"]).length;t<e;t++)J=r[t],l.push([J,D]);return l}())).push(["num",R]),H=function(e,t,l,o){var a,i;return a=e.lab(),i=t.lab(),new r(a[0]+l*(i[0]-a[0]),a[1]+l*(i[1]-a[1]),a[2]+l*(i[2]-a[2]),o)},f.push(["lab",H])}).call(e)}));((e,t)=>{for(var l in n(e),t)r(e,l,{get:t[l],enumerable:!0})})(e,{PerspectiveViewerDatagridPluginElement:()=>ze});var f=new WeakMap,_=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?5e6:1e7;function p(e,t,r,l,o){var a={};return Object.keys(l).forEach((function(e){a[e]=l[e]})),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=r.slice().reverse().reduce((function(r,l){return l(e,t,r)||r}),a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(e,t,a),a=null),a}var g=0,b=0,m=performance.now(),v=(e,...t)=>e.map(((e,r)=>[e,t[r]])).flat().filter((e=>!!e)).join("");function y(e,t,r){let l=r.value,o=Symbol("regular-table throttle lock");return r.value=async function(...e){if(void 0!==this[o]&&(await this[o],void 0!==this[o]))return void await this[o];let t;this[o]=(()=>{let e,t=new Promise((t=>{e=t}));return t.resolve=e,t})();try{t=await l.call(this,...e)}finally{let e=this[o];this[o]=void 0,e.resolve()}return t},r.value.flush=async function(){return await new Promise(requestAnimationFrame),await this[o]},r}var w,x,k=(p((w=class extends HTMLElement{create_shadow_dom(){this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=v` <style> ${":host{bottom:0;overflow:scroll;overflow-anchor:none;overscroll-behavior:none;-webkit-overflow-scrolling:touch}:host,div.rt-virtual-panel{position:absolute;top:0;left:0;right:0}div.rt-virtual-panel{pointer-events:none}div.rt-scroll-table-clip{position:sticky;contain:strict;overflow-anchor:none;width:100%;height:100%}div.rt-tree-container{display:flex;align-items:center;height:100%}slot{position:absolute;overflow:hidden;overflow-anchor:none}"} </style> <style> ${":host ::slotted(table){--regular-table--transform-x:0px;--regular-table--transform-y:0px;--regular-table--clip-x:0px;--regular-table--clip-y:0px}"} </style> <div class="rt-virtual-panel"></div> <div class="rt-scroll-table-clip"> ${"<slot></slot>"} </div> `;let[,e,t,r]=this.shadowRoot.children;this._sub_cell_style=e,this._table_clip=r,this._virtual_panel=t,this._setup_virtual_scroll()}_setup_virtual_scroll(){this._table_clip&&("both"===this._virtual_mode||"vertical"===this._virtual_mode?this._table_clip.style.top="0px":this._table_clip.style.removeProperty("top"),"both"===this._virtual_mode||"horizontal"===this._virtual_mode?this._table_clip.style.left="0px":this._table_clip.style.removeProperty("left"),"both"!==this._virtual_mode?this._table_clip.style.contain="none":this._table_clip.style.removeProperty("contain"))}_calculate_viewport(e,t){let{start_row:r,end_row:l}=this._calculate_row_range(e),{start_col:o,end_col:a}=this._calculate_column_range(t);return this._nrows=e,{start_col:o,end_col:a,start_row:r,end_row:l}}_calculate_row_range(e){let{height:t}=this._container_size,r=this._column_sizes.row_height||19,l=this._view_cache.config.column_pivots.length,o=Math.max(1,this._virtual_panel.offsetHeight-this.clientHeight),a=Math.max(Math.ceil(this.scrollTop),0)/o,i=t/r-l,n=e||0,s=Math.max(0,Math.ceil(n-i))*a;return{start_row:s,end_row:Math.max(0,Math.min(s+i,e))}}_calc_start_column(){let e=this._view_cache.config.row_pivots.length,t=0,r=0,l=0;for(;r<this.scrollLeft;){let o=this._column_sizes.indices[t+e];l=this.scrollLeft-r,t+=1,r+=void 0!==o?o:60}return t+=l/(this._column_sizes.indices[t+e-1]||60),Math.max(0,t-1)}_calculate_column_range(e){if("none"===this._virtual_mode||"vertical"===this._virtual_mode)return{start_col:0,end_col:1/0};{let t=this._calc_start_column();return{start_col:t,end_col:t+(this.table_model.num_columns()||Math.min(e,Math.ceil(this._container_size.width/60)))+1}}}_max_scroll_column(e){let t=0;if(this._view_cache.config.row_pivots.length>0)for(let e of this._column_sizes.indices.slice(0,this._view_cache.config.row_pivots.length))t+=e;let r=this._view_cache.config.row_pivots.length,l=e;for(;t<this._container_size.width&&l>=0;)l--,t+=this._column_sizes.indices[l+r]||60;return Math.min(e-1,l+1)}_validate_viewport({start_col:e,end_col:t,start_row:r,end_row:l}){r=Math.floor(r),l=Math.ceil(l),e=Math.floor(e),t=Math.ceil(t);let o=this._start_col!==e,a=this._start_row!==r||this._end_row!==l||this._end_col!==t;return this._start_col=e,this._end_col=t,this._start_row=r,this._end_row=l,{invalid_column:o,invalid_row:a}}_calc_scrollable_column_width(e){let t=this._view_cache.config.row_pivots.length,r=this._max_scroll_column(e),l=t,o=0;for(;l<r+t;)o+=this._column_sizes.indices[l]||60,l++;return o}_update_virtual_panel_width(e,t){if(e)if("vertical"===this._virtual_mode||"none"===this._virtual_mode)this._virtual_panel.style.width=this._column_sizes.indices.reduce(((e,t)=>e+t),0)+"px";else{let e=this._calc_scrollable_column_width(t);if(0!==e){let t=this._container_size.width+e+2;this._virtual_panel.style.width=t+"px"}else this._virtual_panel.style.width="1px"}}_update_virtual_panel_height(e){let t,{row_height:r=19}=this._column_sizes,l=this._view_cache.config.column_pivots.length*r;if("horizontal"===this._virtual_mode||"none"===this._virtual_mode)t=e*r+l;else{let o=this.clientHeight/(this._table_clip.offsetHeight-l);t=Math.min(_,e*r*o)}this._virtual_panel.style.height=t+"px"}async draw(e={}){let t=performance.now(),{invalid_viewport:r=!0,preserve_width:l=!1}=e,{num_columns:o,num_rows:a}=await this._view_cache.view(0,0,0,0);this._container_size={width:"none"===this._virtual_mode||"vertical"===this._virtual_mode?1/0:this._table_clip.clientWidth,height:"none"===this._virtual_mode||"horizontal"===this._virtual_mode?1/0:this._table_clip.clientHeight},this._update_virtual_panel_height(a),l||this._update_virtual_panel_width(r,o);let i=this._calculate_viewport(a,o),{invalid_row:n,invalid_column:s}=this._validate_viewport(i);if(this._invalid_schema||n||s||r){let e=[],t=!0;for await(let r of this.table_model.draw(this._container_size,this._view_cache,this._selected_id,l,i,o)){void 0!==r&&(e=e.concat(r)),t&&(this.update_sub_cell_offset(i),t=!1),this._is_styling=!0;let l=this._style_callbacks;for(let e of l)await e({detail:this});if(this._is_styling=!1,!this._invalidated&&void 0!==r)break;this._invalidated=!1}this.table_model.autosize_cells(e),this.table_model.header.reset_header_cache(),l||this._update_virtual_panel_width(this._invalid_schema||s,o),this._invalid_schema=!1}else this.update_sub_cell_offset(i);var c;c=performance.now()-t,g=(g*b+c)/(b+1),b+=1}update_sub_cell_offset(e){var t;let r=this._column_sizes.row_height*(e.start_row%1)||0,l=this._column_sizes.indices[(this.table_model._row_headers_length||0)+Math.floor(e.start_col)]*(e.start_col%1)||0,o=null===(t=this._sub_cell_style.sheet)||void 0===t?void 0:t.cssRules[0].style;o&&(o.setProperty("--regular-table--clip-x",l+"px"),o.setProperty("--regular-table--clip-y",r+"px"),o.setProperty("--regular-table--transform-x",`-${l}px`),o.setProperty("--regular-table--transform-y",`-${r}px`))}}).prototype,"draw",[y],Object.getOwnPropertyDescriptor(w.prototype,"draw"),w.prototype),w),M=(p((x=class extends k{register_listeners(){this.addEventListener("mousedown",this._on_click_or_dblclick.bind(this)),this.addEventListener("scroll",this._on_scroll.bind(this),{passive:!0}),this._register_glitch_scroll_listeners()}_on_scroll(e){e.stopPropagation(),this.draw({invalid_viewport:!1})}_register_glitch_scroll_listeners(){this.addEventListener("mousewheel",this._on_mousewheel.bind(this))}_on_mousewheel(e){if(!window.safari)return;let{clientWidth:t,clientHeight:r,scrollTop:l,scrollLeft:o}=this;e.preventDefault(),e.returnValue=!1;let a=Math.max(1,this._virtual_panel.offsetHeight-r),i=Math.max(1,this._virtual_panel.offsetWidth-t);this.scrollTop=Math.max(0,Math.min(a,l+e.deltaY)),this.scrollLeft=Math.max(0,Math.min(i,o+e.deltaX)),this._on_scroll(e)}_on_touchmove(e){e.stopPropagation(),e.preventDefault(),e.returnValue=!1;let{clientWidth:t,clientHeight:r}=this,l=Math.max(1,this._virtual_panel.offsetHeight-r),o=Math.max(1,this._virtual_panel.offsetWidth-t);this.scrollTop=Math.min(l,this._memo_scroll_top+(this._memo_touch_startY-e.touches[0].pageY)),this.scrollLeft=Math.min(o,this._memo_scroll_left+(this._memo_touch_startX-e.touches[0].pageX)),this._on_scroll(e)}_on_touchstart(e){this._memo_touch_startY=e.touches[0].pageY,this._memo_touch_startX=e.touches[0].pageX,this._memo_scroll_top=this.scrollTop,this._memo_scroll_left=this.scrollLeft}async _on_dblclick(e){let t=e.target;for(;"TD"!==t.tagName&&"TH"!==t.tagName;)if(t=t.parentElement,!this.contains(t))return;let r=e.target.classList.contains("rt-column-resize"),l=f.get(t);if(r){e.stopImmediatePropagation(),t.style.minWidth="",t.style.maxWidth="",e.shiftKey?(this._column_sizes.override=[],this._column_sizes.auto=[],this._column_sizes.indices=[]):(this._column_sizes.override[l.size_key]=void 0,this._column_sizes.auto[l.size_key]=void 0,this._column_sizes.indices[l.size_key]=void 0);for(let t of e.shiftKey?[this.table_model.header.cells[this.table_model.header.cells.length-1],...this.table_model.body.cells]:this.table_model.body.cells)for(let r of e.shiftKey?t:[t[l._virtual_x]])r&&(r.style.minWidth="",r.style.maxWidth="",r.classList.remove("rt-cell-clip"));await this.draw()}}async _on_click(e){if(0!==e.button)return;let t=e.target;for(;"TD"!==t.tagName&&"TH"!==t.tagName;)if(t=t.parentElement,!this.contains(t))return;let r=e.target.classList.contains("rt-column-resize"),l=f.get(t);r&&(this._on_resize_column(e,t,l),e.stopImmediatePropagation())}async _on_click_or_dblclick(e){let t=performance.now();this._last_clicked_time&&t-this._last_clicked_time<500?(this._last_clicked_time=t,await this._on_dblclick(e)):(this._last_clicked_time=t,await this._on_click(e))}_on_resize_column(e,t,r){let{_virtual_x:l,size_key:o}=r,a=e.pageX,i=l+t.colSpan-1,n=this.table_model.header.get_column_header(i),s=this._column_sizes.indices[o],c=e=>this._on_resize_column_move(e,n,a,s,o,i),d=()=>{document.removeEventListener("mousemove",c),document.removeEventListener("mouseup",d);let e=this._column_sizes.override[o],t=this._column_sizes.indices[o]!==e;this._column_sizes.indices[o]=e,t&&this.draw()};document.addEventListener("mousemove",c),document.addEventListener("mouseup",d)}async _on_resize_column_move(e,t,r,l,o,a){await new Promise(setTimeout);let i=e.pageX-r,n=Math.max(1,l+i);if(this._column_sizes.override[o]=n,i<0)await this.draw({preserve_width:!0});else{t.style.minWidth=n+"px",t.style.maxWidth=n+"px";let e=this._column_sizes.auto[o];for(let t of this.table_model.body.cells){let r=t[a];r&&(r.style.maxWidth=r.style.minWidth=n+"px",r.classList.toggle("rt-cell-clip",e>n))}}}}).prototype,"_on_resize_column_move",[y],Object.getOwnPropertyDescriptor(x.prototype,"_on_resize_column_move"),x.prototype),x),z=class{constructor(e,t,r){this._column_sizes=e,this._container=t,this._span_factory=new class{constructor(e){this._name=e,this._elements=[],this._index=0}reset(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let e=this._elements[this._index];return this._index+=1,e}}("span"),this.table=r,this.cells=[],this.rows=[]}num_columns(){return this._get_row(Math.max(0,this.rows.length-1)).row_container.length}num_rows(){return this.cells.length}_set_metadata(e,t){f.set(e,t)}_get_or_create_metadata(e){if(void 0===e)return{};if(f.has(e))return f.get(e);{let t={};return f.set(e,t),t}}_replace_cell(e,t){let{tr:r,row_container:l}=this._get_row(e),o=l[t];return o&&(r.removeChild(o),l.splice(t,1,void 0)),o}_fetch_cell(e,t){if(e<0||t<0)return;let{row_container:r}=this._get_row(e);return r[t]}_get_cell(e="TD",t,r){let{tr:l,row_container:o}=this._get_row(t),a=o[r];if(a||(r<o.length?(a=o[r]=document.createElement(e),l.insertBefore(a,o.slice(r+1).find((e=>e)))):(a=o[r]=document.createElement(e),l.appendChild(a))),a.tagName!==e){let o=document.createElement(e);l.replaceChild(o,a),this.cells[t].splice(r,1,o),a=o}return a}_get_row(e){let t=this.rows[e];t||(t=this.rows[e]=document.createElement("tr"),this.table.appendChild(t));let r=this.cells[e];return r||(r=this.cells[e]=[]),{tr:t,row_container:r}}_clean_columns(e){for(let t=0;t<this.rows.length;t++){let r=this.rows[t],l=this.cells[t];this.cells[t]=l.slice(0,e[t]||e);let o=this.cells[t].filter((e=>void 0!==e)).length;for(;r.children[o];)r.removeChild(r.children[o])}}_clean_rows(e){for(;this.table.children[e];)this.table.removeChild(this.table.children[e]);this.rows=this.rows.slice(0,e),this.cells=this.cells.slice(0,e)}},L=class extends z{constructor(...e){super(...e),this._group_header_cache=[],this._offset_cache=[]}_draw_group_th(e,t,r){let l=this._get_cell("TH",t,e[t]||0);if(e[t]+=1,l.removeAttribute("colspan"),l.style.minWidth="0",l.textContent="",r instanceof HTMLElement)l.appendChild(r);else{let e=this._span_factory.get("span");e.textContent=r,l.appendChild(e)}let o=this._span_factory.get("span");return o.className="rt-column-resize",l.appendChild(o),l}_draw_group(e,t,r){let l=this._get_or_create_metadata(r);return l.column_header=e,l.value=t,l.value=t,l}_draw_th(e,t,r,l,o){let a=this._get_or_create_metadata(r);if(a.column_header=e,a.value=t,a.size_key=o.length?o[0]:o,!(o.length>1)){let e=this._column_sizes.override[a.size_key],t=this._column_sizes.auto[a.size_key];e?(r.classList.toggle("rt-cell-clip",t>e),r.style.minWidth=e+"px",r.style.maxWidth=e+"px"):t?(r.classList.remove("rt-cell-clip"),r.style.maxWidth="",r.style.minWidth=t+"px"):(r.style.maxWidth="",r.style.maxWidth="")}return a}get_column_header(e){return this._get_cell("TH",this.num_rows()-1,e)}draw(e,t,r,l,o,a,i){let n,s,c,d=null==t?void 0:t.length;if(0!==d){for(let _=0;_<d;_++){if(c=t[_]?t[_]:"",this._offset_cache[_]=this._offset_cache[_]||0,_<d-1){var h,u,f;(null===(h=this._group_header_cache)||void 0===h||null===(u=h[_])||void 0===u||null===(f=u[0])||void 0===f?void 0:f.value)===c?(n=this._group_header_cache[_][1],this._group_header_cache[_][2]+=1,1===r&&(this._group_header_cache[_][0].row_header_x=o),n.setAttribute("colspan",this._group_header_cache[_][2])):(n=this._draw_group_th(this._offset_cache,_,c),s=this._draw_group(t,c,n),this._group_header_cache[_]=[s,n,1])}else{n=this._draw_group_th(this._offset_cache,_,c),s=this._draw_th(e||t,c,n,l,o);for(let[e]of this._group_header_cache)e.size_key=s.size_key;n.removeAttribute("colspan")}n.classList.toggle("rt-group-corner",void 0===l),s&&(s.x=void 0===l?l:Math.floor(l),s.column_header_y=_,s.x0=Math.floor(a),s._virtual_x=i,1===r&&(s.row_header_x=o))}return this._clean_rows(this._offset_cache.length),{th:n,metadata:s}}}clean(){this._clean_columns(this._offset_cache)}reset_header_cache(){this._offset_cache=[],this._group_header_cache=[]}},E=class extends z{_draw_td(e,t,r,l,{column_name:o},{ridx_offset:a},i){let n=this._get_cell(e,t,l),s=this._get_or_create_metadata(n);s.y=t+Math.floor(a),s.size_key=i,"TD"===e&&(s.column_header=o);let c=this._column_sizes.override[s.size_key];if(c){let e=this._column_sizes.auto[s.size_key];n.classList.toggle("rt-cell-clip",e>c),n.style.minWidth=c+"px",n.style.maxWidth=c+"px"}else n.classList.remove("rt-cell-clip"),n.style.minWidth="",n.style.maxWidth="";return s.value!==r&&(r instanceof HTMLElement?(n.textContent="",n.appendChild(r)):n.textContent=r),s.value=r,{td:n,metadata:s}}draw(e,t,r,l=!1,o,a,i){let n,{cidx:s,column_data:c,row_headers:d,column_data_listener_metadata:h}=t,{row_height:u}=r,f=[],_=[],p=0,g=[];for(let m=0;m<(l?r.row_headers_length:1);m++){p=0;for(let v of c){var b;let c,y=null==d?void 0:d[p];if(l){let e=v[m],l=this._fetch_cell(p-(f[m]||1),s+m),o=this._get_or_create_metadata(l),i=this._fetch_cell(p,s+m-(g[p]||1)),n=this._get_or_create_metadata(i);!i||n.value!==e&&void 0!==e||i.hasAttribute("rowspan")?l&&o.value===e&&!l.hasAttribute("colspan")?(f[m]=f[m]?f[m]+1:2,l.setAttribute("rowspan",f[m]),this._replace_cell(p,s+m)):(c=this._draw_td("TH",p,e,s+m,t,r,m),c.td.style.display="",c.td.removeAttribute("rowspan"),c.td.removeAttribute("colspan"),c.metadata.row_header=v,c.metadata.row_header_x=m,c.metadata.y0=Math.floor(r.ridx_offset),c.metadata.y1=Math.ceil(r.y1),c.metadata._virtual_x=m,void 0!==a&&(c.metadata.x0=Math.floor(a)),f[m]=1,g[p]=1,_[m]=c):(g[p]=g[p]?g[p]+1:2,i.setAttribute("colspan",g[p]),this._replace_cell(p,s+m))}else c=this._draw_td("TD",p,v,s,t,r,i),h&&(c.metadata.user=h[p]),c.metadata.x=void 0===o?o:Math.floor(o),c.metadata.x1=Math.ceil(r.x1),c.metadata.row_header=y||[],c.metadata.y0=Math.floor(r.ridx_offset),c.metadata.y1=Math.ceil(r.y1),c.metadata.dx=Math.floor(o-a),c.metadata.dy=c.metadata.y-Math.floor(c.metadata.y0),c.metadata._virtual_x=s,void 0!==a&&(c.metadata.x0=Math.floor(a)),_[0]=c;if(p++,n=c?c.metadata:n,u=u||(null===(b=c)||void 0===b?void 0:b.td.offsetHeight),p*u>e)break}}return this._clean_rows(p),{tds:_,ridx:p,metadata:n,row_height:u}}clean({ridx:e,cidx:t}){this._clean_rows(e),this._clean_columns(t)}},N=class{constructor(e,t,r){this.clear(r);let[l]=r.children,[o,a]=l.children;this.table=l,this._column_sizes=t,this.header=new L(t,e,o),this.body=new E(t,e,a),this.fragment=document.createDocumentFragment()}num_columns(){return this.header.num_columns()}clear(e){e.innerHTML=v` <table cellspacing="0"> <thead></thead> <tbody></tbody> </table> `}autosize_cells(e){for(;e.length>0;){let t,[r,l,o]=e.pop(),a=getComputedStyle(r);"border-box"!==a.boxSizing?(t=r.clientWidth,t-=a.paddingLeft?parseFloat(a.paddingLeft):0,t-=a.paddingRight?parseFloat(a.paddingRight):0):t=parseFloat(a.width),this._column_sizes.row_height=this._column_sizes.row_height||o.offsetHeight,this._column_sizes.indices[l.size_key]=t;let i=void 0!==this._column_sizes.override[l.size_key];t&&!i&&(this._column_sizes.auto[l.size_key]=t),"0px"===r.style.minWidth&&(r.style.minWidth=t+"px")}}async*draw(e,t,r,l,o,a){var i,n,s,c;let{width:d,height:h}=e,{view:u,config:f}=t,{data:_,row_headers:p,column_headers:g,metadata:b}=await u(Math.floor(o.start_col),Math.floor(o.start_row),Math.ceil(o.end_col),Math.ceil(o.end_row)),{start_row:m=0,start_col:v=0,end_col:y=0,end_row:w=0}=o;p&&(this._row_headers_length=p.reduce(((e,t)=>Math.max(e,t.length)),0),p=p.map((e=>(e.length=this._row_headers_length,e)))),t.config.column_pivots=Array.from(Array((null==g||null===(i=g[0])||void 0===i?void 0:i.length)||0).keys()),t.config.row_pivots=Array.from(Array((null===(n=p)||void 0===n||null===(s=n[0])||void 0===s?void 0:s.length)||0).keys());let x,k={viewport_width:0,selected_id:r,ridx_offset:m,sub_cell_offset:this._column_sizes.indices[(this._row_headers_length||0)+Math.floor(o.start_col)]||0,x0:v,x1:y,y1:w,row_height:this._column_sizes.row_height,row_headers_length:this._row_headers_length},M=0,z=[],L=!0;if((null===(c=p)||void 0===c?void 0:c.length)>0){let e=f.row_pivots.join(","),r={column_name:e,cidx:0,column_data:p,row_headers:p,first_col:L},o=M+Math.floor(v);x=this.body.draw(h,r,{...k,x0:0},!0,void 0,void 0,o);let a=[];for(let r=0;r<t.config.row_pivots.length;r++){let l=this.header.draw(e,Array(t.config.column_pivots.length).fill(""),1,void 0,r,v,r);l&&a.push(l)}if(L=!1,k.viewport_width+=a.reduce(((e,{th:t},r)=>e+(this._column_sizes.indices[r]||t.offsetWidth)),0),k.row_height=k.row_height||x.row_height,M=p[0].length,!l)for(let e=0;e<t.config.row_pivots.length;e++){let{td:t,metadata:r}=x.tds[e]||{},{th:l,metadata:o}=a[e]||{};(t||l)&&z.push([l||t,o||r,t||l])}}try{var E;let e=0,t=a-o.start_col;for(;e<t;){if(!_[e]){let t=Math.max(o.end_col,0);o.start_col=t;let r=0,l=0;for(;this._column_sizes.indices.length>M+v+r+1&&l+k.viewport_width<d;)r++,l+=this._column_sizes.indices[M+v+r];if(l+k.viewport_width<d){let e=Math.min(a,t+5);o.end_col=Math.max(1,Math.min(a,e))}else o.end_col=Math.max(1,Math.min(a,t+r));let i=u(Math.floor(o.start_col),Math.floor(o.start_row),Math.ceil(o.end_col),Math.ceil(o.end_row));yield;let n=await i;if(0===n.data.length)return void(yield z);o.end_col=o.start_col+n.data.length;for(let t=0;t<n.data.length;t++){var N;_[e+t]=n.data[t],n.metadata&&(b[e+t]=n.metadata[t]),g&&(g[e+t]=null===(N=n.column_headers)||void 0===N?void 0:N[t])}}let t=(null==g?void 0:g[e])||"",r={column_name:t,cidx:M,column_data:_[e],column_data_listener_metadata:null==b?void 0:b[e],row_headers:p,first_col:L},i=e+v,n=M+Math.floor(v),s=this.header.draw(void 0,t,void 0,i,n,v,M);if(x=this.body.draw(h,r,k,!1,i,v,n),L=!1,!l)for(let{td:e,metadata:t}of x.tds)z.push([(null==s?void 0:s.th)||e,(null==s?void 0:s.metadata)||t,e||(null==s?void 0:s.th)]);let c=this._column_sizes.indices[M+Math.floor(v)];var C;if(k.viewport_width+=c||((null==s||null===(C=s.th)||void 0===C?void 0:C.offsetWidth)||x.tds.reduce(((e,t)=>{var r;return e+(null===(r=t.td)||void 0===r?void 0:r.offsetWidth)}),0)),k.row_height=k.row_height||x.row_height,M++,e++,k.viewport_width-k.sub_cell_offset>d){var A;this.body.clean({ridx:(null===(A=x)||void 0===A?void 0:A.ridx)||0,cidx:M}),this.header.clean(),yield z,k.viewport_width=0;for(let[e]of z)k.viewport_width+=e.offsetWidth;if(k.viewport_width-k.sub_cell_offset>d)return}}this.body.clean({ridx:(null===(E=x)||void 0===E?void 0:E.ridx)||0,cidx:M}),this.header.clean(),yield z}finally{var O;this.body.clean({ridx:(null===(O=x)||void 0===O?void 0:O.ridx)||0,cidx:M}),this.header.clean(),this.body._span_factory.reset(),this.header._span_factory.reset()}}},C=["both","horizontal","vertical","none"];document.createElement("regular-table").constructor===HTMLElement&&window.customElements.define("regular-table",class extends M{constructor(){super(),this._column_sizes={auto:[],override:[],indices:[]},this._style_callbacks=[],this._initialized=!1}connectedCallback(){this._initialized||(this.create_shadow_dom(),this.register_listeners(),this.setAttribute("tabindex","0"),this._initialized=!0,this.table_model=new N(this._table_clip,this._column_sizes,this))}_reset_viewport(){this._start_row=void 0,this._end_row=void 0,this._start_col=void 0,this._end_col=void 0}_reset_scroll(){this._column_sizes.indices=[],this.scrollTop=0,this.scrollLeft=0,this._reset_viewport()}_resetAutoSize(){this._column_sizes.auto=[],this._column_sizes.override=[],this._column_sizes.indices=[];for(let e=0;e<this.table_model.header.num_columns();e++){let t=this.table_model.header.get_column_header(e);t.style.minWidth="",t.style.maxWidth=""}}clear(){this.table_model=new N(this._table_clip,this._column_sizes,this)}addStyleListener(e){this._style_callbacks=this._style_callbacks.concat(e);let t=!0;return()=>{if(!t)return;t=!1;let r=this._style_callbacks=this._style_callbacks.slice(),l=r.indexOf(e);r.splice(l,1)}}invalidate(){if(!this._is_styling)throw new Error("Cannot call `invalidate()` outside of a `StyleListener`");this._invalidated=!0}getMeta(e){if(void 0!==e){if(e instanceof HTMLElement)return f.get(e);if(e.row_header_x>=0){if(e.row_header_x<this._view_cache.config.row_pivots.length){let t=this.table_model.body._fetch_cell(e.y,e.row_header_x);return this.getMeta(t)}}else{if(!(e.column_header_y>=0))return this.getMeta(this.table_model.body._fetch_cell(e.dy,e.dx+this.table_model._row_headers_length));if(e.column_header_y<this._view_cache.config.column_pivots.length){let t=this.table_model.body._fetch_cell(e.column_header_y,e.y);return this.getMeta(t)}}}}getDrawFPS(){return function(){let e=performance.now(),t=e-m,r=g,l=1e3*b/t,o=b;return g=0,b=0,m=e,{avg:r,real_fps:l,virtual_fps:1e3/r,num_frames:o,elapsed:t}}()}async scrollToCell(e,t){if(!this._view_cache)return void console.warn("data listener not configured");let r=this._column_sizes.row_height||19,l=this._view_cache.config.column_pivots.length*r,o=(this._table_clip.offsetHeight-l)%r,a=(this._virtual_panel.offsetHeight-o)/this._nrows;this.scrollTop=Math.ceil(a*t);let i=0;for(;e>0;)e--,i+=this._column_sizes.indices[e+this._view_cache.config.row_pivots.length]||60;this.scrollLeft=Math.ceil(i),await new Promise(requestAnimationFrame),await this.draw.flush()}setDataListener(e,{virtual_mode:t="both"}={}){console.assert(C.indexOf(t)>-1,`Unknown virtual_mode ${t};  valid options are "both" (default), "horizontal", "vertical" or "none"`),this._virtual_mode=t,this._invalid_schema=!0,this._view_cache={view:e,config:{row_pivots:[],column_pivots:[]},schema:{}},this._setup_virtual_scroll()}__noop_jsdoc_hints(){}});var A=c(h()),O=c(u()),P=Symbol("Plugin Symbol");function S(e){let[t,r,l]=e.rgb(),[o,a,i]=e.set("hsl.h",(e.get("hsl.h")-15)%360).rgb(),[n,s,c]=e.set("hsl.h",(e.get("hsl.h")+15)%360).rgb();return`linear-gradient(to right top,rgb(${o},${a},${i}),rgb(${t},${r},${l}) 50%,rgb(${n},${s},${c}))`}function T(e,t,r){let l,o=void 0!==r,a=document.createElement(`perspective-${o?"number":"string"}-column-style`),i=e.getMeta(t),n=i.column_header[i.column_header.length-1],s=this._schema[n];if(l=o?{gradient:r,pos_color:this._pos_color[0],neg_color:this._neg_color[0],number_color_mode:"foreground"}:{color:this._color[0]},"string"!==s)if("float"===s)l.fixed=2;else{if("integer"!==s)return this._open_column_styles_menu.pop(),void e.draw({preserve_width:!0});l.fixed=0}let c=()=>a.blur(),d=t=>{let r=t.detail;r.pos_color&&(r.pos_color=[r.pos_color,...(0,O.default)(r.pos_color).rgb(),S((0,O.default)(r.pos_color))],r.neg_color=[r.neg_color,...(0,O.default)(r.neg_color).rgb(),S((0,O.default)(r.neg_color))]),r.color&&(r.color=[r.color,...(0,O.default)(r.color).rgb(),S((0,O.default)(r.color))]),e[P]=e[P]||{},e[P][n]=r,e.draw({preserve_width:!0}),e.parentElement.parentElement.dispatchEvent(new Event("perspective-config-update"))},h=async()=>{e.removeEventListener("regular-table-scroll",c),a.removeEventListener("perspective-column-style-change",d),a.removeEventListener("blur",h),a.destroy(),this._open_column_styles_menu.pop(),await e.draw({preserve_width:!0}),e.parentElement.parentElement.dispatchEvent(new Event("perspective-config-update"))};a.addEventListener("perspective-column-style-change",d),a.addEventListener("blur",h),e.addEventListener("regular-table-scroll",c);let u=e[P]||{},f=Object.assign({},u[n]=u[n]||{});f.pos_color&&(f.pos_color=f.pos_color[0],f.neg_color=f.neg_color[0]),f.color&&(f.color=f.color[0]),a.open(t,f,l)}function j([e,t,r,l],o=[255,255,255]){function a(e,t){return 255*((1-l)*(o[e]/255)+l*(t/255))}return[a(0,e),a(1,t),a(2,r)]}function W([e,t,r]){return Math.sqrt(e*e*.299+t*t*.587+r*r*.114)>130?"#161616":"#ffffff"}var D=c(u());function H(e){let t=e._view_cache.config.row_pivots.length-1,r=Array.from(e.children[0].children[0].children),l=e[P]||{};if(r.length>0){let[l]=r.splice(r.length-1,1);for(let r of l?.children){let l=e.getMeta(r),o=l.column_header?.[l.column_header?.length-1],a=this._config.sort.find((e=>e[0]===o)),i=l.row_header_x===t,n=void 0===l.x;i=i||(l.x+1)%this._config.columns.length==0,r.classList.toggle("psp-header-border",i),r.classList.toggle("psp-header-group",!1),r.classList.toggle("psp-header-leaf",!0),r.classList.toggle("psp-is-top",!1),r.classList.toggle("psp-header-corner",n),r.classList.toggle("psp-header-sort-asc",!!a&&"asc"===a[1]),r.classList.toggle("psp-header-sort-desc",!!a&&"desc"===a[1]),r.classList.toggle("psp-header-sort-col-asc",!!a&&"col asc"===a[1]),r.classList.toggle("psp-header-sort-col-desc",!!a&&"col desc"===a[1]);let s=le.call(this,l),c="integer"===s||"float"===s,d="string"===s;r.classList.toggle("psp-align-right",c),r.classList.toggle("psp-align-left",!c),r.classList.toggle("psp-menu-open",this._open_column_styles_menu[0]===l._virtual_x),r.classList.toggle("psp-menu-enabled",(d||c)&&!n),r.classList.toggle("psp-is-width-override",void 0!==e._column_sizes?.override[l.size_key])}}let o=[],a=new Set,i=e.children[0];for(let l=0;l<r.length;l++){let r=i.rows[l],n=new Set;for(let i=0;i<r.cells.length;i++){let s=r.cells[i];s.style.backgroundColor="";let c=e.getMeta(s),d=c.row_header_x===t||c.x>=0;s.classList.toggle("psp-align-right",!1),s.classList.toggle("psp-align-left",!1),s.classList.toggle("psp-header-group",!0),s.classList.toggle("psp-header-leaf",!1),s.classList.toggle("psp-header-border",d),s.classList.toggle("psp-header-group-corner",void 0===c.x),s.classList.toggle("psp-color-mode-bar",!1),s.classList.toggle("psp-header-sort-asc",!1),s.classList.toggle("psp-header-sort-desc",!1),s.classList.toggle("psp-header-sort-col-asc",!1),s.classList.toggle("psp-header-sort-col-desc",!1);let h,u,f=r.cells[i],_=i;for(;o[l]&&o[l][_];++_);for(n.add(_),h=_;h<_+f.colSpan;++h)for(u=l;u<l+f.rowSpan;++u)o[u]||(o[u]=[]),o[u][h]=!0;f.classList.toggle("psp-is-top",0===l||!a.has(h))}a=n}for(let t of e.children[0].children[1].children)for(let r of t.children){let t=e.getMeta(r),o=t.column_header?.[t.column_header?.length-1],a=le.call(this,t),i=l[o],n="integer"===a||"float"===a;if(n){let e=t.user>0,l=t.user<0,[o,a,n,s,c]=(()=>void 0!==i?.pos_color?e?i.pos_color:l?i.neg_color:["",0,0,0,""]:e?this._pos_color:l?this._neg_color:["",0,0,0,""])();if(r.style.position="","background"===i?.number_color_mode){let e=W(j([a,n,s,1],this._plugin_background));r.style.color=e,r.style.backgroundColor=o}else if("gradient"===i?.number_color_mode){let e=Math.max(0,Math.min(1,Math.abs(t.user/i.gradient))),l=W(j([a,n,s,e],this._plugin_background));r.style.color=l,r.style.backgroundColor=`rgba(${a},${n},${s},${e})`}else"disabled"===i?.number_color_mode?(r.style.backgroundColor="",r.style.color=""):"bar"===i?.number_color_mode?(r.style.backgroundColor="",r.style.color="",r.style.position="relative",""!==c&&r.children.length>0&&r.children[0].nodeType===Node.ELEMENT_NODE&&(r.children[0].style.background=c)):(r.style.backgroundColor="",r.style.color=o)}else if("boolean"===a){let[e]=!0===t.user?this._pos_color:!1===t.user?this._neg_color:["",0,0,0,""];r.style.backgroundColor="",r.style.color=e}else if("string"===a){let[e,l,a,n,s]=(()=>void 0!==i?.color?i.color:this._color)();if("foreground"===i?.string_color_mode&&null!==t.user)r.style.color=e,r.style.backgroundColor="","link"===i?.format&&(r.children[0].style.color=e);else if("background"===i?.string_color_mode&&null!==t.user){let t=W(j([l,a,n,1],this._plugin_background));r.style.color=t,r.style.backgroundColor=e}else if("series"===i?.string_color_mode&&null!==t.user){this._series_color_map.has(o)||(this._series_color_map.set(o,new Map),this._series_color_seed.set(o,0));let l=this._series_color_map.get(o);if(!l.has(t.user)){let e=this._series_color_seed.get(o);l.set(t.user,e),this._series_color_seed.set(o,e+1)}let a=l.get(t.user),[i,n,s]=(0,D.default)(e).hsl();i+=150*a%360;let c=(0,D.default)(i,n,s,"hsl"),[d,h,u]=c.rgb(),f=c.hex(),_=W(j([d,h,u,1],this._plugin_background));r.style.color=_,r.style.backgroundColor=f}else r.style.backgroundColor="",r.style.color=""}else r.style.backgroundColor="",r.style.color="";r.classList.toggle("psp-bool-type","boolean"===a&&null!==t.user);let s="TH"===r.tagName;if(s){let l=null!=typeof t.value&&null!=typeof t.value&&t.value?.toString()?.trim().length>0,o=t.row_header_x>=this._config.group_by.length,a=e.getMeta({dx:0,dy:t.y-t.y0+1}),i=a&&a.row_header&&void 0!==a.row_header[t.row_header_x+1];r.classList.toggle("psp-tree-label",l&&!o),r.classList.toggle("psp-tree-label-expand",l&&!o&&!i),r.classList.toggle("psp-tree-label-collapse",l&&!o&&i),r.classList.toggle("psp-tree-leaf",l&&o)}r.classList.toggle("psp-align-right",!s&&n),r.classList.toggle("psp-align-left",s||!n),r.classList.toggle("psp-color-mode-bar","bar"===i?.number_color_mode&&n)}}async function F(e,t,r){let l=e.getMeta(r),o=l.column_header[l.column_header.length-1],a=(t.shiftKey?R:I).call(this,o);e.dispatchEvent(new CustomEvent("regular-table-psp-sort",{detail:{sort:a}}))}function R(e){let t=[],r=!1;for(let l of this._config.sort){let[o,a]=l;if(o===e){r=!0;let l=$.call(this,e,a);l&&t.push(l)}else t.push(l)}return r||t.push([e,"desc"]),t}function I(e){for(let[t,r]of this._config.sort)if(t===e){let t=$.call(this,e,r);return t?[t]:[]}return[[e,"desc"]]}function $(e,t){let r=this._config.split_by.length>0?G:q,l=t?r[t]:"desc";if(l)return[e,l]}var q={desc:"asc",asc:void 0},G={desc:"asc",asc:"col desc","col desc":"col asc","col asc":void 0};async function X(e,t){let r=e.getMeta(t.target),l=t.target.classList.contains("psp-tree-label-collapse");t.shiftKey&&l?this._view.set_depth(r.row_header.filter((e=>void 0!==e)).length-2):t.shiftKey?this._view.set_depth(r.row_header.filter((e=>void 0!==e)).length-1):l?this._view.collapse(r.y):this._view.expand(r.y),this._num_rows=await this._view.num_rows(),this._num_columns=await this._view.num_columns(),e.draw()}async function V(e,t){if(1!==t.which)return;let r=t.target;if("A"===r.tagName)return;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!e.contains(r))return;if(r.classList.contains("psp-tree-label")&&t.offsetX<26)return X.call(this,e,t),void t.stopImmediatePropagation();let l=r.getBoundingClientRect();if(r.classList.contains("psp-menu-enabled")&&t.clientY-l.top>16){let l=e.getMeta(r),o=l.column_header?.[l.column_header?.length-1],a=this._schema[o];if(this._open_column_styles_menu.unshift(l._virtual_x),"string"===a)e.draw({preserve_width:!0}),T.call(this,e,r);else{let[,t]=await this._view.get_min_max(o);e.draw({preserve_width:!0}),T.call(this,e,r,t)}t.preventDefault(),t.stopImmediatePropagation()}else r.classList.contains("psp-header-leaf")&&!r.classList.contains("psp-header-corner")&&(F.call(this,e,t,r),t.stopImmediatePropagation())}function Y(e,t){if(1!==t.which)return;let r=t.target;for(;"TD"!==r.tagName&&"TH"!==r.tagName;)if(r=r.parentElement,!e.contains(r))return;(r.classList.contains("psp-tree-label")&&t.offsetX<26||r.classList.contains("psp-header-leaf")&&!r.classList.contains("psp-header-corner"))&&t.stopImmediatePropagation()}var B={},K={datetime:Intl.DateTimeFormat,date:Intl.DateTimeFormat,integer:Intl.NumberFormat,float:Intl.NumberFormat,boolean:class{format(e){return e?"check":"close"}}},U=B;function J(e,t,r={},l=!1){if(null===t)return"-";let o=e[e.length-1],a=l&&this._table_schema[o]||this._schema[o]||"string",i=r[o],n="integer"===a||"float"===a;if(n&&"bar"===i?.number_color_mode){let e=Math.max(0,Math.min(.95,.95*Math.abs(t/i.gradient))),r=this._div_factory.get(),l=t>=0?"left":"right";return r.setAttribute("style",`width:${(100*e).toFixed(2)}%;position:absolute;${l}:0;height:80%;top:10%;pointer-events:none;`),r}if("link"===i?.format&&"string"===a){let e=document.createElement("a");return e.setAttribute("href",t),e.setAttribute("target","_blank"),e.textContent=t,e}if("bold"===i?.format&&"string"===a){let e=document.createElement("b");return e.textContent=t,e}if("italics"===i?.format&&"string"===a){let e=document.createElement("i");return e.textContent=t,e}{let e=n&&i&&void 0!==i.fixed,r=e?`${a}${i.fixed}`:a;if(void 0===B[r]){let t=(0,A.get_type_config)(a);if(e){let e={minimumFractionDigits:i.fixed,maximumFractionDigits:i.fixed};B[r]=new K[a]("en-us",e)}else K[a]?B[r]=new K[a]("en-us",t.format):B[r]=!1}return B[r]?B[r].format(t):t}}function*Z(e=[],t,r){let l=r[P];for(let r of e){r=["TOTAL",...r];let e=r[r.length-1];r=r.slice(0,r.length-1).fill("");let o=J.call(this,[t[r.length-1]],e,l,!0);r=o instanceof HTMLElement?r.concat(o):r.concat({toString:()=>o}),r.length=t.length+1,yield r}}async function Q(e,t,r,l,o){let a={};l-t>0&&o-r>0?(a=await this._view.to_columns({start_row:r,start_col:t,end_row:o,end_col:l,id:!0}),this._ids=a.__ID__):this._div_factory.clear();let i=[],n=[],s=[];for(let c of this._column_paths.slice(t,l)){let t=c.split("|"),l=a[c]||new Array(o-r).fill(null);i.push(l.map((r=>J.call(this,t,r,e[P])))),n.push(l),s.push(t)}return{num_rows:this._num_rows,num_columns:this._column_paths.length,row_headers:Array.from(Z.call(this,a.__ROW_PATH__,this._config.group_by,e)),column_headers:s,data:i,metadata:n}}function ee(e,t,r){let l=window.getComputedStyle(e).getPropertyValue(t).trim();return l.length>0?l:r}function te(e){let t=(0,D.default)(e),r=S(t);return[e,...t.rgb(),r]}async function re(e,t,r,l={}){let o=await r.get_config(),a=o.expressions.map((e=>e[1])),[i,n,s,c,d,h]=await Promise.all([t.schema(),t.validate_expressions(a),r.num_rows(),r.schema(),r.expression_schema(),r.column_paths()]),u=(0,D.default)(ee(e,"--plugin--background","#FFFFFF")).rgb(),f=te(ee(e,"--rt-pos-cell--color","#338DCD")),_=te(ee(e,"--rt-neg-cell--color","#FF5942")),p=te(ee(e,"--active--color","#ff0000")),g={...c,...d},b={...i,...n.expression_schema},m=h.filter((e=>"__ROW_PATH__"!==e&&"__ID__"!==e)),v=[],y=[];for(let e of m){let t=e.split("|"),r=t[t.length-1];y.push(g[r]),v.push(!!i[r])}let w=Object.assign(l,{_view:r,_table:t,_table_schema:b,_config:o,_num_rows:s,_schema:g,_ids:[],_open_column_styles_menu:[],_plugin_background:u,_color:p,_pos_color:f,_neg_color:_,_column_paths:m,_column_types:y,_is_editable:v,_row_header_types:o.group_by.map((e=>b[e])),_series_color_map:new Map,_series_color_seed:new Map,get_psp_type:le});return w._div_factory=w._div_factory||new class{constructor(e){this._name=e,this._elements=[],this._index=0}clear(){this._index=0}get(){this._elements[this._index]||(this._elements[this._index]=document.createElement(this._name));let e=this._elements[this._index];return this._index+=1,e}}("div"),e.setDataListener(Q.bind(w,e),{virtual_mode:window.getComputedStyle(e).getPropertyValue("--datagrid-virtual-mode")?.trim()||"both"}),w}function le(e){return e.x>=0?this._column_types[e.x]:this._row_header_types[e.row_header_x-1]}async function oe(e,t){e.addStyleListener(H.bind(t,e)),e.addEventListener("mousedown",V.bind(t,e)),e.addEventListener("click",Y.bind(t,e))}async function ae({_view:e,_config:t},r,l){let o=t.group_by,a=t.split_by,i=r>=0?r:0,n=i+1,s=await e.to_json({start_row:i,end_row:n}),c=s.map((e=>e.__ROW_PATH__))[0]||[],d=o.map(((e,t)=>{let r=c[t];return r?[e,"==",r]:void 0})).filter((e=>e)),h=o.length>0?l+1:l,u=Object.keys(s[0])[h],f={row:s[0]},_=[];if(u){let e=u.split("|");f.column_names=[e[e.length-1]],_=a.map(((t,r)=>{let l=e[r];return l?[t,"==",l]:void 0})).filter((e=>e)).filter((([,,e])=>"__ROW_PATH__"!==e))}let p=t.filter.concat(d).concat(_);return f.config={filter:p},f}var ie=new WeakMap;async function ne(e,t,r){let l=e.getMeta(r.target);if(!t.hasAttribute("selectable")||r.handled||1!==r.which||!l)return;let o=this._ids[l.y-l.y0];if(l&&l.y>=0){let a=ie.get(e),i=!!a&&a.reduce(((e,t,r)=>e&&t===o[r]),!0),n=!!a&&o.length===a.length&&i,s=[];n?ie.delete(e):(ie.set(e,o),s=await ae(this,l.y,l.x),s=s.config.filter),await e.draw({preserve_width:!0}),r.handled=!0,t.dispatchEvent(new CustomEvent("perspective-select",{bubbles:!0,composed:!0,detail:{selected:!n,config:{filter:s}}}))}}function se(e,t){if(!t.hasAttribute("selectable"))return;let r=ie.has(e),l=ie.get(e);for(let t of e.querySelectorAll("td"))if(r){let r=e.getMeta(t),o=this._ids[r.y-r.y0],a=l.reduce(((e,t,r)=>e&&t===o[r]),!0);t.classList.toggle("psp-row-selected",o.length===l.length&&a),t.classList.toggle("psp-row-subselected",o.length!==l.length&&a)}else t.classList.toggle("psp-row-selected",!1),t.classList.toggle("psp-row-subselected",!1);for(let t of e.querySelectorAll("tbody th")){let o=e.getMeta(t),a=this._ids[o.y-o.y0];if(!r||a[o.row_header_x])t.classList.toggle("psp-row-selected",!1),t.classList.toggle("psp-row-subselected",!1);else{let e=l.reduce(((e,t,r)=>e&&t===a[r]),!0);t.classList.toggle("psp-row-selected",a.length===l.length&&e),t.classList.toggle("psp-row-subselected",a.length!==l.length&&e)}}}function ce(e,t){e.addStyleListener(se.bind(this,e,t)),e.addEventListener("mousedown",ne.bind(this,e,t))}async function de(e,t,r){let l=e.getMeta(r.target);if(!l)return;let{x:o,y:a}=l,{row:i,column_names:n,config:s}=await ae(this,a,o);t.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{row:i,column_names:n,config:s}}))}function he(e,t){e.addEventListener("click",de.bind(this,e,t))}var ue=new WeakMap;function fe(){if(this.isContentEditable){let e=document.getSelection().getRangeAt(0),t=e.cloneRange();return t.selectNodeContents(this),t.setEnd(e.endContainer,e.endOffset),t.toString().length}return this.target.selectionStart}function _e(e,t,r){let l=e.getMeta(r),o=t._schema[t._column_paths[l.x]];if(l){let e=r.textContent,a=t._ids[l.y-l.y0];if("float"===o||"integer"===o){if(e=parseFloat(e.replace(/,/g,"")),isNaN(e))return!1}else if("date"===o||"datetime"===o){if(e=Date.parse(e),isNaN(e))return!1}else"boolean"===o&&(e="check"!==e&&("close"===e||null));let i={__INDEX__:a,[t._column_paths[l.x]]:e};return t._table.update([i],{port_id:t._edit_port}),!0}}function pe(e,t=!1){let r=0===this._config.group_by.length&&0===this._config.split_by.length,l=e.hasAttribute("selectable"),o=t||!!e.children[0]._is_edit_mode;return r&&!l&&o}var ge=function(e){let t;return async function(...r){if(t&&await t&&t)return;let l;t=new Promise((e=>l=e)),await e.apply(this,r),t=void 0,l()}}((async function(e,t,r,l){let o=e.getMeta(t),a=this._column_paths.length,i=this._num_rows,n=ue.get(e);if(!n)return;o.x+r<a&&0<=o.x+r&&(n.x=o.x+r),o.y+l<i&&0<=o.y+l&&(n.y=o.y+l);let s=Math.max(o.x0-10,0),c=Math.min(o.x0+10,a),d=Math.max(o.y0-5,0),h=Math.min(o.y0+10,i),u=o.x0+r,f=o.y0+l;for(;!me(e)&&u>=s&&u<c&&f>=d&&f<h;)await e.scrollToCell(u,f,a,i),ue.set(e,n),u+=r,f+=l}));function be(e,t){let r=e[P]||{},l=pe.call(this,t);e.parentElement.classList.toggle("edit-mode-allowed",pe.call(this,t,!0));for(let t of e.querySelectorAll("td")){let o=e.getMeta(t),a=this.get_psp_type(o);if(this._is_editable[o.x]){let e=o.column_header[o.column_header.length-1];"string"===a&&"link"===r[e]?.format?(t.toggleAttribute("contenteditable",!1),t.classList.toggle("boolean-editable",!1)):"boolean"===a?(t.toggleAttribute("contenteditable",!1),t.classList.toggle("boolean-editable",null!==o.user)):(l!==t.hasAttribute("contenteditable")&&t.toggleAttribute("contenteditable",l),t.classList.toggle("boolean-editable",!1))}else t.toggleAttribute("contenteditable",!1),t.classList.toggle("boolean-editable",!1)}}var me=e=>{let t=e.querySelectorAll("td"),r=ue.get(e);if(r){for(let l of t){let t=e.getMeta(l);if(t.x===r.x&&t.y===r.y)return document.activeElement!==l&&l.focus({preventScroll:!0}),!0}document.activeElement!==document.body&&e.contains(document.activeElement)&&document.activeElement.blur()}};function ve(e,t,r){if(!pe.call(this,t))return;let l=document.activeElement;switch(r.target.classList.remove("psp-error"),r.keyCode){case 13:r.preventDefault(),r.shiftKey?ge.call(this,e,l,0,-1):ge.call(this,e,l,0,1);break;case 37:0==fe.call(l)&&(r.preventDefault(),ge.call(this,e,l,-1,0));break;case 38:r.preventDefault(),ge.call(this,e,l,0,-1);break;case 39:fe.call(l)==l.textContent.length&&(r.preventDefault(),ge.call(this,e,l,1,0));break;case 40:r.preventDefault(),ge.call(this,e,l,0,1)}}function ye(e,t,r){if(pe.call(this,t)&&ue.has(e)){r.target.classList.remove("psp-error");let t=ue.get(e);ue.delete(e),t.content!==r.target.textContent&&(_e(e,this,r.target)||(r.target.textContent=t.content,r.target.classList.add("psp-error"),r.target.focus()))}}function we(e,t,r){let l=e.getMeta(r.target);if(l){let t={x:l.x,y:l.y,content:r.target.textContent};ue.set(e,t)}}function xe(e,t,r){let l=e.getMeta(r.target);if(void 0!==l?.x){let t=this._is_editable[l.x],o="boolean"===this.get_psp_type(l),a="-"===r.target.textContent;t&&o&&!a&&_e(e,this,r.target)}}async function ke(e,t){this._edit_port=await t.getEditPort(),e.addStyleListener(be.bind(this,e,t)),e.addStyleListener(me.bind(this,e,t)),e.addEventListener("click",xe.bind(this,e,t)),e.addEventListener("focusin",we.bind(this,e,t)),e.addEventListener("focusout",ye.bind(this,e,t)),e.addEventListener("keydown",ve.bind(this,e,t))}async function Me(e,t){e.addEventListener("regular-table-psp-sort",(e=>{this._preserve_focus_state=!0,t.restore({sort:e.detail.sort})}))}var ze=class extends HTMLElement{constructor(){super(),this.datagrid=document.createElement("regular-table"),this.datagrid.formatters=U,this._is_scroll_lock=!0}connectedCallback(){this._toolbar||(this._toolbar=document.createElement("perspective-viewer-datagrid-toolbar"),this._toolbar.setAttribute("slot","plugin-settings"),this._toolbar.attachShadow({mode:"open"}),this._toolbar.shadowRoot.innerHTML='\n                <style>\n                    :host{position:relative;display:block}:host #container{position:absolute;display:flex;flex-direction:column;justify-content:stretch;align-items:stretch;top:0;left:0;right:0;bottom:0}:host #toolbar{display:flex;align-items:center;height:36px}:host #slot-container{flex:1;position:relative}#scroll_lock.lock-scroll:before{content:var(--toolbar-scroll-lock-active--content)}#scroll_lock:before{content:var(--toolbar-scroll-lock--content)}#select_mode:before{content:"highlight_alt"}#edit_mode:before{content:var(--toolbar-edit-mode--content)}#edit_mode.editable:before{content:var(--toolbar-edit-mode-active--content)}:host(.aggregated) #toolbar #edit_mode{display:none}.button:before{color:var(--inactive--color, #ccc);line-height:36px;font-size:14px;font-family:var(--button--font-family, "Material Icons Outlined");vertical-align:bottom;margin:0 11px}.button.editable:before,.button.lock-scroll:before{color:inherit}.button{user-select:none;width:36px;box-sizing:border-box}.button>span{display:none;margin:0;padding:0}.button:hover{opacity:1;display:flex;align-items:center;color:inherit;cursor:pointer;min-width:105px;background-color:#0000000d}.button:hover:before{margin:0 6px 0 11px}.button:hover>span{display:contents;font-size:12px;font-weight:300;line-height:36px}\n\n                </style>\n                <div id="toolbar">\n                    <span id="scroll_lock" class="lock-scroll button"><span>Align Scroll</span></span>\n                    <span id="edit_mode" class="button"><span>Read Only</span></span>\n                </div>\n            ',this._scroll_lock=this._toolbar.shadowRoot.querySelector("#scroll_lock"),this._scroll_lock.addEventListener("click",(()=>this._toggle_scroll_lock())),this._edit_mode=this._toolbar.shadowRoot.querySelector("#edit_mode"),this._edit_mode.addEventListener("click",(()=>{this._toggle_edit_mode(),this.datagrid.draw()}))),this.parentElement.appendChild(this._toolbar)}disconnectedCallback(){this._toolbar.parentElement.removeChild(this._toolbar)}_toggle_edit_mode(e){void 0===e&&(e=!this._is_edit_mode),this._is_edit_mode=e,this.classList.toggle("editable",e),this._edit_mode.classList.toggle("editable",e),this._edit_mode.children[0].textContent=e?"Editable":"Read Only"}_toggle_scroll_lock(e){void 0===e&&(e=!this._is_scroll_lock),this._is_scroll_lock=e,this.classList.toggle("sub-cell-scroll-enabled",!e),this._scroll_lock.classList.toggle("lock-scroll",e),this._scroll_lock.children[0].textContent=e?"Align Scroll":"Free Scroll"}async activate(e){let t=this.parentElement,r=await t.getTable(!0);this._initialized?await re(this.datagrid,r,e,this.model):(this.innerHTML="",this.appendChild(this.datagrid),this.model=await re(this.datagrid,r,e),oe(this.datagrid,this.model),await ce.call(this.model,this.datagrid,t),await he.call(this.model,this.datagrid,t),await ke.call(this.model,this.datagrid,t),await Me.call(this.model,this.datagrid,t),this._initialized=!0)}get name(){return"Datagrid"}get select_mode(){return"toggle"}get min_config_columns(){}get config_column_names(){}async draw(e){if(await this.activate(e),!this.isConnected||null==this.offsetParent)return;let t=this._save_column_size_overrides(),r=(this.parentElement,this.datagrid.draw({invalid_columns:!0}));this.model._preserve_focus_state?this.model._preserve_focus_state=!1:(this.datagrid.scrollTop=0,this.datagrid.scrollLeft=0,async function(e){ie.delete(e);for(let t of e.querySelectorAll("td,th"))t.classList.toggle("psp-row-selected",!1),t.classList.toggle("psp-row-subselected",!1)}(this.datagrid),this.datagrid._resetAutoSize()),this._restore_column_size_overrides(t),await r,this._toolbar.classList.toggle("aggregated",this.model._config.group_by.length>0||this.model._config.split_by.length>0)}async update(e){this.model._num_rows=await e.num_rows(),await this.datagrid.draw()}async resize(){!this.isConnected||null==this.offsetParent||this._initialized&&await this.datagrid.draw()}async clear(){this.datagrid._resetAutoSize(),this.datagrid.clear()}save(){if(this.datagrid){let e=this.datagrid,t={columns:{},scroll_lock:!!this._is_scroll_lock,editable:!!this._is_edit_mode};for(let r of Object.keys(e[P]||{})){let l=Object.assign({},e[P][r]);l?.pos_color&&(l.pos_color=l.pos_color[0],l.neg_color=l.neg_color[0]),l?.color&&(l.color=l.color[0]),t.columns[r]=l}let r=this._save_column_size_overrides();for(let e of Object.keys(r||{}))t.columns[e]||(t.columns[e]={}),t.columns[e].column_size_override=r[e];return JSON.parse(JSON.stringify(t))}return{}}restore(e){let t={};if((e=JSON.parse(JSON.stringify(e))).columns)for(let r of Object.keys(e.columns)){let l=e.columns[r];void 0!==l.column_size_override&&(t[r]=l.column_size_override,delete l.column_size_override),l?.pos_color&&(l.pos_color=te(l.pos_color),l.neg_color=te(l.neg_color)),l?.color&&(l.color=te(l.color)),0===Object.keys(l).length&&delete e.columns[r]}"editable"in e&&this._toggle_edit_mode(e.editable),"scroll_lock"in e&&this._toggle_scroll_lock(e.scroll_lock);let r=this.datagrid;try{r._resetAutoSize()}catch{}this._restore_column_size_overrides(t,!0),r[P]=e.columns}async restyle(e){this.draw(e)}delete(){this.datagrid.table_model&&this.datagrid._resetAutoSize(),this.datagrid.clear()}_save_column_size_overrides(){if(!this._initialized)return[];if(this._cached_column_sizes){let e=this._cached_column_sizes;return this._cached_column_sizes=void 0,e}let e=this.datagrid._column_sizes.override,{group_by:t,columns:r}=this.model._config,l=t?.length>0?t.length+1:0,o={};for(let t of Object.keys(e))if(void 0!==e[t]){let r=t-l;r>-1?o[this.model._column_paths[r]]=e[t]:-1===r&&(o.__ROW_PATH__=e[t])}return o}_restore_column_size_overrides(e,t=!1){if(!this._initialized)return;t&&(this._cached_column_sizes=e);let r={},{group_by:l,columns:o}=this.model._config,a=l?.length>0?l.length+1:0;for(let t of Object.keys(e))if("__ROW_PATH__"===t)r[a-1]=e[t];else{r[this.model._column_paths.indexOf(t)+a]=e[t]}this.datagrid._column_sizes.override=r}};customElements.define("perspective-viewer-datagrid",ze),customElements.whenDefined("perspective-viewer").then((function(){customElements.get("perspective-viewer").registerPlugin("perspective-viewer-datagrid")})),function(){let e=document.createElement("style");e.textContent='regular-table{padding:0;margin:12px 0 0 12px;scrollbar-color:transparent transparent;scrollbar-width:thin;outline:none}regular-table:hover{scrollbar-color:rgba(0,0,0,.3) transparent}.sub-cell-scroll-enabled regular-table table tbody td,.sub-cell-scroll-enabled regular-table table thead th:not(.rt-group-corner){transform:translate(var(--regular-table--transform-x, 0px))}.sub-cell-scroll-enabled regular-table table tbody{transform:translateY(var(--regular-table--transform-y, 0px))}.sub-cell-scroll-enabled regular-table table tbody tr:first-child td,.sub-cell-scroll-enabled regular-table table tbody tr:first-child th{clip-path:polygon(0 var(--regular-table--clip-y, 0),0 200%,200% 200%,200% var(--regular-table--clip-y, 0))}.sub-cell-scroll-enabled regular-table table thead th.rt-group-corner{background:var(--plugin--background, white);z-index:1}.sub-cell-scroll-enabled regular-table table tbody tr td:first-of-type{clip-path:polygon(var(--regular-table--clip-x, 0) 0,var(--regular-table--clip-x, 0) 200%,200% 200%,200% 0)}.sub-cell-scroll-enabled regular-table table tbody tr:first-child td:first-of-type{clip-path:polygon(var(--regular-table--clip-x, 0) var(--regular-table--clip-y, 0),var(--regular-table--clip-x, 0) 200%,200% 200%,200% var(--regular-table--clip-y, 0))}regular-table{font-family:inherit}regular-table div[tabindex]{outline:none}regular-table>div{position:absolute;top:0;left:0;right:0;bottom:0;overflow:hidden}regular-table th{text-align:center}regular-table thead tr:not(:last-child) th{overflow:hidden;max-width:0px}regular-table thead tr:last-child .rt-float,regular-table tbody .rt-float{text-align:right}regular-table thead .rt-integer,regular-table tbody .rt-integer{text-align:right}regular-table tbody th{text-align:left}regular-table span.rt-tree-container{display:flex;align-items:center;height:100%}regular-table thead .rt-string,regular-table tbody .rt-string,regular-table thead .rt-date,regular-table tbody .rt-date,regular-table thead .rt-datetime,regular-table tbody .rt-datetime{text-align:left}regular-table thead tr:last-child th{border-bottom:1px solid #eaedef}regular-table tbody tr:first-child td,regular-table tbody tr:first-child th{border-top:1px solid transparent!important}regular-table th{position:relative}regular-table tr th span.rt-tree-group{margin-left:5px;margin-right:15px;border-left:1px solid #eee;height:100%}regular-table td,regular-table th{white-space:nowrap;font-size:12px;padding:0 5px;height:19px}regular-table tr:hover td{background:#eee;opacity:1}regular-table tr:hover{color:#333}regular-table table *{box-sizing:border-box}regular-table table{position:absolute;overflow:hidden;color:#666;outline:none}regular-table span.rt-row-header-icon{color:#aaa;padding-right:4px;font-family:var(--button--font-family, "Material Icons")}regular-table span.rt-column-header-icon{font-size:10px;padding-left:3px;display:inline-block;width:10px;font-family:var(--button--font-family, "Material Icons")}regular-table span.rt-row-header-icon:hover{color:#1a7da1;text-shadow:0px 0px 3px #1a7da1}regular-table .rt-selected td{background-color:#eee}regular-table .rt-cell-clip{overflow:hidden;text-overflow:ellipsis}regular-table td span.rt-group-name,regular-table th span.rt-group-name{margin-right:-5px;padding-right:5px;padding-left:8px;flex:1;height:100%}regular-table th span.rt-group-name{text-align:left}regular-table td th span.rt-group-leaf,regular-table th span.rt-group-leaf{margin-left:16px;height:100%}regular-table .rt-column-resize{height:100%;width:10px;position:absolute;top:0;right:0;cursor:col-resize}regular-table a{color:var(--rt-pos-cell--color)}regular-table a:visited{color:var(--active--color)}regular-table::-webkit-scrollbar,regular-table::-webkit-scrollbar-corner{background-color:transparent;height:12px;width:12px}regular-table::-webkit-scrollbar-thumb{background-clip:content-box;background-color:#0000;border-radius:5px}regular-table::-webkit-scrollbar-thumb:horizontal{border-bottom:2px solid transparent;border-top:2px solid transparent}regular-table::-webkit-scrollbar-thumb:vertical{border-left:2px solid transparent;border-right:2px solid transparent}regular-table:hover::-webkit-scrollbar-thumb{background-color:#00000026}regular-table::-webkit-scrollbar-thumb:hover{background-color:#0000004d}.psp-header-border:not(.psp-is-top):not(.psp-header-leaf){box-shadow:1px 0 var(--inactive--color, #eaedef)}.psp-header-group{box-shadow:0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-is-top{box-shadow:5px 4px 0 -4px var(--inactive--color, #eaedef)}.psp-is-top.psp-header-group:not(.psp-header-group-corner){box-shadow:5px 4px 0 -4px var(--inactive--color, #eaedef),0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-header-border.psp-header-group:not(.psp-is-top):not(.psp-header-group-corner){box-shadow:1px 0 var(--inactive--color, #eaedef),0 10px 0 -9px var(--inactive--color, #eaedef)}.psp-header-leaf.psp-header-border{box-shadow:5px -4px 0 -4px var(--inactive--color, #eaedef)}tr:only-child th{box-shadow:none!important}regular-table tbody tr:hover th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover td:not(.psp-row-selected):not(.psp-row-subselected){border-color:var(--rt-hover--border-color, #c5c9d080)!important;background-color:transparent;box-shadow:0 1px 0 var(--rt-hover--border-color, #c5c9d080),0 3px #0000000d,0 5px #00000003}regular-table tbody tr:hover+tr th.psp-tree-leaf:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr th.psp-tree-label:not(.psp-row-selected):not(.psp-row-subselected),regular-table tbody tr:hover+tr td:not(.psp-row-selected):not(.psp-row-subselected){border-top-color:transparent}regular-table tbody tr th:first-child:not(:empty),regular-table tbody tr th:first-child:empty+th:not(:empty),regular-table tbody tr th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr td:first-child{border-left-width:1px;border-left-color:transparent}regular-table tbody tr th:last-child,regular-table tbody tr td:last-child{border-right-width:1px;border-right-color:transparent}regular-table tbody tr:hover{color:#161616}regular-table tbody tr:hover th:first-child:not(:empty),regular-table tbody tr:hover th:first-child:empty+th:not(:empty),regular-table tbody tr:hover th:first-child:empty~th:empty+th:not(:empty),regular-table tbody tr:hover td:first-child{border-left-color:var(--rt-hover--border-color, #c5c9d080)!important}regular-table tbody tr:hover th:last-child,regular-table tbody tr:hover td:last-child{border-right-color:var(--rt-hover--border-color, #c5c9d080)!important}perspective-viewer[settings] regular-table .psp-header-leaf{height:36px;vertical-align:top;padding-top:2px}perspective-viewer[settings] regular-table .psp-header-leaf:not(.psp-header-corner):before{font-family:var(--button--font-family, inherit);content:var(--column-style-open-button--content, var(--config-button-icon--content, "\\1f527"));position:absolute;width:calc(100% - 8px);left:5px;bottom:0px;color:var(--inactive--color, #b4b7be)}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:not(.psp-header-corner):before{color:inherit;cursor:pointer}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner){pointer-events:none}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-open:not(.psp-header-corner):before{content:var(--column-style-close-button--content, "X")}perspective-viewer[settings] regular-table .psp-header-leaf.psp-menu-enabled:hover:before{color:#338dcd}perspective-viewer[settings] regular-table .psp-header-leaf .rt-column-resize{height:18px}.psp-row-selected,:hover .psp-row-selected,:hover th.psp-tree-leaf.psp-row-selected,:hover th.psp-tree-label.psp-row-selected{color:#fff!important;background-color:#ea7319!important;border-color:#ea7319!important}.psp-row-selected.psp-tree-label:not(:hover):before{color:#fff}.psp-row-subselected,:hover .psp-row-subselected,:hover th.psp-tree-leaf.psp-row-subselected,:hover th.psp-tree-label.psp-row-subselected{background:rgba(234,115,25,.2)!important}.psp-error{color:red}td:focus{outline:#666;outline-style:dotted;outline-width:1px}perspective-viewer.dragging regular-table{pointer-events:none}.psp-header-border:last-child{border-right-width:0px}.psp-header-sort-desc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-desc--content, "\\2193")}.psp-header-sort-asc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-asc--content, "\\2191")}.psp-header-sort-col-desc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-col-desc--content, "\\2190")}.psp-header-sort-col-asc:after{font-family:var(--button--font-family, inherit);font-size:10px;content:var(--sort-order-col-asc--content, "\\2192")}tbody th:last-of-type{border-right:1px solid #eaedef;overflow:hidden;text-overflow:ellipsis}tbody th:empty{background-image:linear-gradient(to right,transparent 9px,#eee 10px,transparent 11px);background-repeat:no-repeat;min-width:20px;max-width:20px;pointer-events:none}.psp-tree-label{max-width:0px;min-width:0px}.psp-tree-label:before{color:#ccc;font-family:var(--button--font-family, inherit);padding-right:11px;vertical-align:-1px}.psp-tree-label-expand:before{content:var(--tree-label-expand--content, "+")}.psp-tree-label-collapse:before{content:var(--tree-label-collapse--content, "-")}.psp-tree-label:hover:before{color:#338dcd;text-shadow:0px 0px 5px #338dcd}regular-table thead tr:last-child th{border-bottom-width:1px;border-bottom-color:var(--inactive--color, #eaedef)}.psp-tree-leaf{padding-left:24px}.psp-align-right{text-align:right}.psp-align-left{text-align:left}.psp-positive:not(:focus){color:var(--rt-pos-cell--color, #338dcd)}.psp-negative:not(:focus){color:var(--rt-neg-cell--color, #ff5942)}regular-table table tbody td{min-width:52px!important}.psp-is-width-override .rt-column-resize,.rt-column-resize:hover{border:1px dashed #999;border-bottom-width:0px;border-left-width:0px}.psp-bool-type{font-family:var(--button--font-family, "Material Icons")}.boolean-editable{cursor:pointer}regular-table table{user-select:none;color:#161616;border-collapse:separate}regular-table table th{font-weight:400}regular-table table td,regular-table table th{border-color:#eaedef;height:23px}regular-table table .psp-header-group{text-overflow:ellipsis}regular-table table .psp-header-leaf{border-bottom-width:0px}regular-table table td,regular-table table th.psp-tree-label,regular-table table th.psp-tree-label,regular-table table th.psp-tree-leaf,regular-table table tbody tr:first-child th{border-style:solid;border-width:0px;border-top-width:1px}regular-table table tbody th:empty{background-position:0px -10px}\n',document.head.insertBefore(e,document.head.firstChild)}()}));
//# sourceMappingURL=/sm/a6623decc98c1e7616100af24cbb4c9ada7adf1f6abf62ff62eaf376b3cf9d91.map