var V0=Object.create;var $l=Object.defineProperty;var k0=Object.getOwnPropertyDescriptor;var D0=Object.getOwnPropertyNames;var N0=Object.getPrototypeOf,E0=Object.prototype.hasOwnProperty;var P0=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Aa=(e,t)=>{for(var r in t)$l(e,r,{get:t[r],enumerable:!0})},L0=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of D0(t))!E0.call(e,o)&&o!==r&&$l(e,o,{get:()=>t[o],enumerable:!(n=k0(t,o))||n.enumerable});return e};var z0=(e,t,r)=>(r=e!=null?V0(N0(e)):{},L0(t||!e||!e.__esModule?$l(r,"default",{value:e,enumerable:!0}):r,e));var _0=P0(uc=>{var vn=vn||{};vn.stringify=function(){var e={"visit_linear-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-linear-gradient":function(t){return e.visit_gradient(t)},"visit_radial-gradient":function(t){return e.visit_gradient(t)},"visit_repeating-radial-gradient":function(t){return e.visit_gradient(t)},visit_gradient:function(t){var r=e.visit(t.orientation);return r&&(r+=", "),t.type+"("+r+e.visit(t.colorStops)+")"},visit_shape:function(t){var r=t.value,n=e.visit(t.at),o=e.visit(t.style);return o&&(r+=" "+o),n&&(r+=" at "+n),r},"visit_default-radial":function(t){var r="",n=e.visit(t.at);return n&&(r+=n),r},"visit_extent-keyword":function(t){var r=t.value,n=e.visit(t.at);return n&&(r+=" at "+n),r},"visit_position-keyword":function(t){return t.value},visit_position:function(t){return e.visit(t.value.x)+" "+e.visit(t.value.y)},"visit_%":function(t){return t.value+"%"},visit_em:function(t){return t.value+"em"},visit_px:function(t){return t.value+"px"},visit_literal:function(t){return e.visit_color(t.value,t)},visit_hex:function(t){return e.visit_color("#"+t.value,t)},visit_rgb:function(t){return e.visit_color("rgb("+t.value.join(", ")+")",t)},visit_rgba:function(t){return e.visit_color("rgba("+t.value.join(", ")+")",t)},visit_color:function(t,r){var n=t,o=e.visit(r.length);return o&&(n+=" "+o),n},visit_angular:function(t){return t.value+"deg"},visit_directional:function(t){return"to "+t.value},visit_array:function(t){var r="",n=t.length;return t.forEach(function(o,a){r+=e.visit(o),a<n-1&&(r+=", ")}),r},visit:function(t){if(!t)return"";var r="";if(t instanceof Array)return e.visit_array(t,r);if(t.type){var n=e["visit_"+t.type];if(n)return n(t);throw Error("Missing visitor visit_"+t.type)}else throw Error("Invalid node.")}};return function(t){return e.visit(t)}}();var vn=vn||{};vn.parse=function(){var e={linearGradient:/^(\-(webkit|o|ms|moz)\-)?(linear\-gradient)/i,repeatingLinearGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-linear\-gradient)/i,radialGradient:/^(\-(webkit|o|ms|moz)\-)?(radial\-gradient)/i,repeatingRadialGradient:/^(\-(webkit|o|ms|moz)\-)?(repeating\-radial\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},t="";function r(V){var M=new Error(t+": "+V);throw M.source=t,M}function n(){var V=o();return t.length>0&&r("Invalid input not EOF"),V}function o(){return _(a)}function a(){return i("linear-gradient",e.linearGradient,s)||i("repeating-linear-gradient",e.repeatingLinearGradient,s)||i("radial-gradient",e.radialGradient,m)||i("repeating-radial-gradient",e.repeatingRadialGradient,m)}function i(V,M,D){return l(M,function(N){var Y=D();return Y&&(B(e.comma)||r("Missing comma before color stops")),{type:V,orientation:Y,colorStops:_(v)}})}function l(V,M){var D=B(V);if(D){B(e.startCall)||r("Missing (");var N=M(D);return B(e.endCall)||r("Missing )"),N}}function s(){return u()||c()}function u(){return w("directional",e.sideOrCorner,1)}function c(){return w("angular",e.angleValue,1)}function m(){var V,M=f(),D;return M&&(V=[],V.push(M),D=t,B(e.comma)&&(M=f(),M?V.push(M):t=D)),V}function f(){var V=d()||p();if(V)V.at=x();else{var M=h();if(M){V=M;var D=x();D&&(V.at=D)}else{var N=g();N&&(V={type:"default-radial",at:N})}}return V}function d(){var V=w("shape",/^(circle)/i,0);return V&&(V.style=P()||h()),V}function p(){var V=w("shape",/^(ellipse)/i,0);return V&&(V.style=E()||h()),V}function h(){return w("extent-keyword",e.extentKeywords,1)}function x(){if(w("position",/^at/,0)){var V=g();return V||r("Missing positioning value"),V}}function g(){var V=S();if(V.x||V.y)return{type:"position",value:V}}function S(){return{x:E(),y:E()}}function _(V){var M=V(),D=[];if(M)for(D.push(M);B(e.comma);)M=V(),M?D.push(M):r("One extra comma");return D}function v(){var V=b();return V||r("Expected color definition"),V.length=E(),V}function b(){return C()||R()||T()||y()}function y(){return w("literal",e.literalColor,0)}function C(){return w("hex",e.hexColor,1)}function T(){return l(e.rgbColor,function(){return{type:"rgb",value:_(F)}})}function R(){return l(e.rgbaColor,function(){return{type:"rgba",value:_(F)}})}function F(){return B(e.number)[1]}function E(){return w("%",e.percentageValue,1)||W()||P()}function W(){return w("position-keyword",e.positionKeywords,1)}function P(){return w("px",e.pixelValue,1)||w("em",e.emValue,1)}function w(V,M,D){var N=B(M);if(N)return{type:V,value:N[D]}}function B(V){var M,D;return D=/^[\n\r\t\s]+/.exec(t),D&&A(D[0].length),M=V.exec(t),M&&A(M[0].length),M}function A(V){t=t.substr(V)}return function(V){return t=V.toString(),n()}}();uc.parse=vn.parse;uc.stringify=vn.stringify});Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null});function At(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Hl(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Er(e){let t,r,n;e.length!==2?(t=At,r=(l,s)=>At(e(l),s),n=(l,s)=>e(l)-s):(t=e===At||e===Hl?e:B0,r=e,n=e);function o(l,s,u=0,c=l.length){if(u<c){if(t(s,s)!==0)return c;do{let m=u+c>>>1;r(l[m],s)<0?u=m+1:c=m}while(u<c)}return u}function a(l,s,u=0,c=l.length){if(u<c){if(t(s,s)!==0)return c;do{let m=u+c>>>1;r(l[m],s)<=0?u=m+1:c=m}while(u<c)}return u}function i(l,s,u=0,c=l.length){let m=o(l,s,u,c-1);return m>u&&n(l[m-1],s)>-n(l[m],s)?m-1:m}return{left:o,center:i,right:a}}function B0(){return 0}function Yl(e){return e===null?NaN:+e}var dc=Er(At),pc=dc.right,O0=dc.left,I0=Er(Yl).center,Wl=pc;function ql(e,t){let r=0,n,o=0,a=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(n=i-o,o+=n/++r,a+=n*(i-o));else{let i=-1;for(let l of e)(l=t(l,++i,e))!=null&&(l=+l)>=l&&(n=l-o,o+=n/++r,a+=n*(l-o))}if(r>1)return a/(r-1)}function Ca(e,t){let r=ql(e,t);return r&&Math.sqrt(r)}var wn=class extends Map{constructor(t,r=$0){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(let[n,o]of t)this.set(n,o)}get(t){return super.get(hc(this,t))}has(t){return super.has(hc(this,t))}set(t,r){return super.set(R0(this,t),r)}delete(t){return super.delete(F0(this,t))}};function hc({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function R0({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function F0({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function $0(e){return e!==null&&typeof e=="object"?e.valueOf():e}var H0=Math.sqrt(50),Y0=Math.sqrt(10),W0=Math.sqrt(2);function Ma(e,t,r){let n=(t-e)/Math.max(0,r),o=Math.floor(Math.log10(n)),a=n/Math.pow(10,o),i=a>=H0?10:a>=Y0?5:a>=W0?2:1,l,s,u;return o<0?(u=Math.pow(10,-o)/i,l=Math.round(e*u),s=Math.round(t*u),l/u<e&&++l,s/u>t&&--s,u=-u):(u=Math.pow(10,o)*i,l=Math.round(e/u),s=Math.round(t/u),l*u<e&&++l,s*u>t&&--s),s<l&&.5<=r&&r<2?Ma(e,t,r*2):[l,s,u]}function Pr(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];let n=t<e,[o,a,i]=n?Ma(t,e,r):Ma(e,t,r);if(!(a>=o))return[];let l=a-o+1,s=new Array(l);if(n)if(i<0)for(let u=0;u<l;++u)s[u]=(a-u)/-i;else for(let u=0;u<l;++u)s[u]=(a-u)*i;else if(i<0)for(let u=0;u<l;++u)s[u]=(o+u)/-i;else for(let u=0;u<l;++u)s[u]=(o+u)*i;return s}function fo(e,t,r){return t=+t,e=+e,r=+r,Ma(e,t,r)[2]}function Sn(e,t,r){t=+t,e=+e,r=+r;let n=t<e,o=n?fo(t,e,r):fo(e,t,r);return(n?-1:1)*(o<0?1/-o:o)}function ot(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(r<o||r===void 0&&o>=o)&&(r=o)}return r}function Fe(e,t){let r;if(t===void 0)for(let n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let o of e)(o=t(o,++n,e))!=null&&(r>o||r===void 0&&o>=o)&&(r=o)}return r}function Ta(e,t){let r=0,n=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(++r,n+=o);else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(++r,n+=a)}if(r)return n/r}function Va(e,t=q0){let r=[],n,o=!1;for(let a of e)o&&r.push(t(n,a)),n=a,o=!0;return r}function q0(e,t){return[e,t]}function Kt(e,t,r){e=+e,t=+t,r=(o=arguments.length)<2?(t=e,e=0,1):o<3?1:+r;for(var n=-1,o=Math.max(0,Math.ceil((t-e)/r))|0,a=new Array(o);++n<o;)a[n]=e+n*r;return a}var ka=(e,t,r)=>{let n=t[r];if(typeof n!="function")throw new Error(`Attempt to rebind ${r} which isn't a function on the source object`);return(...o)=>{var a=n.apply(t,o);return a===t?e:a}};var H=(e,t,...r)=>{for(let n of r)e[n]=ka(e,t,n);return e};var U0=e=>t=>e.reduce((r,n)=>r&&n(r),t),z=(e,t,...r)=>{let n=U0(r);for(let o of Object.keys(t)){let a=n(o);a&&(e[a]=ka(e,t,o))}return e};var Da=e=>e.map(t=>typeof t=="string"?new RegExp(`^${t}$`):t);var Q=(...e)=>(e=Da(e),t=>e.every(r=>!r.test(t))&&t);var Lr=(...e)=>(e=Da(e),t=>e.some(r=>r.test(t))&&t);var Ct=e=>t=>e[t];var X0=e=>e[0].toUpperCase()+e.slice(1),$e=e=>t=>e+X0(t);function mo(e){return e}function gc(e){}function Gl(e){return typeof e=="function"?e:()=>e}function Ft(e){return typeof e=="number"&&isNaN(e)?void 0:e}function _n(){let e=()=>10,t=gc,r=mo,n=a=>a!=null;var o=function(a){let i=e.apply(this,arguments),l=a.slice(0,i).map(r);return a.map((s,u)=>(u>=i&&(l.shift(),l.push(r(s,u))),u<i-1||l.some(c=>!n(c))?t(void 0,u):t(l,u)))};return o.period=(...a)=>a.length?(e=Gl(a[0]),o):e,o.accumulator=(...a)=>a.length?(t=a[0],o):t,o.defined=(...a)=>a.length?(n=a[0],o):n,o.value=(...a)=>a.length?(r=a[0],o):r,o}function Ul(){let e=2,t=_n().accumulator(n=>{let o=n&&Ca(n),a=n&&Ta(n);return{average:a,upper:Ft(a+e*o),lower:Ft(a-e*o)}}),r=n=>t(n);return r.multiplier=(...n)=>n.length?(e=n[0],r):e,H(r,t,"period","value"),r}function at(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function xc(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}var jl=Symbol("implicit");function mt(){var e=new wn,t=[],r=[],n=jl;function o(a){let i=e.get(a);if(i===void 0){if(n!==jl)return n;e.set(a,i=t.push(a)-1)}return r[i%r.length]}return o.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new wn;for(let i of a)e.has(i)||e.set(i,t.push(i)-1);return o},o.range=function(a){return arguments.length?(r=Array.from(a),o):r.slice()},o.unknown=function(a){return arguments.length?(n=a,o):n},o.copy=function(){return mt(t,r).unknown(n)},at.apply(o,arguments),o}function dt(){var e=mt().unknown(void 0),t=e.domain,r=e.range,n=0,o=1,a,i,l=!1,s=0,u=0,c=.5;delete e.unknown;function m(){var f=t().length,d=o<n,p=d?o:n,h=d?n:o;a=(h-p)/Math.max(1,f-s+u*2),l&&(a=Math.floor(a)),p+=(h-p-a*(f-s))*c,i=a*(1-s),l&&(p=Math.round(p),i=Math.round(i));var x=Kt(f).map(function(g){return p+a*g});return r(d?x.reverse():x)}return e.domain=function(f){return arguments.length?(t(f),m()):t()},e.range=function(f){return arguments.length?([n,o]=f,n=+n,o=+o,m()):[n,o]},e.rangeRound=function(f){return[n,o]=f,n=+n,o=+o,l=!0,m()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(f){return arguments.length?(l=!!f,m()):l},e.padding=function(f){return arguments.length?(s=Math.min(1,u=+f),m()):s},e.paddingInner=function(f){return arguments.length?(s=Math.min(1,f),m()):s},e.paddingOuter=function(f){return arguments.length?(u=+f,m()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),m()):c},e.copy=function(){return dt(t(),[n,o]).round(l).paddingInner(s).paddingOuter(u).align(c)},at.apply(m(),arguments)}function Na(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function Ql(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function go(){}var po=.7,La=1/po,An="\\s*([+-]?\\d+)\\s*",ho="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Mt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Q0=/^#([0-9a-f]{3,8})$/,K0=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),J0=new RegExp(`^rgb\\(${Mt},${Mt},${Mt}\\)$`),Z0=new RegExp(`^rgba\\(${An},${An},${An},${ho}\\)$`),ex=new RegExp(`^rgba\\(${Mt},${Mt},${Mt},${ho}\\)$`),tx=new RegExp(`^hsl\\(${ho},${Mt},${Mt}\\)$`),rx=new RegExp(`^hsla\\(${ho},${Mt},${Mt},${ho}\\)$`),yc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Na(go,Te,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bc,formatHex:bc,formatHex8:nx,formatHsl:ox,formatRgb:vc,toString:vc});function bc(){return this.rgb().formatHex()}function nx(){return this.rgb().formatHex8()}function ox(){return Mc(this).formatHsl()}function vc(){return this.rgb().formatRgb()}function Te(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=Q0.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?wc(t):r===3?new He(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?Ea(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?Ea(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=K0.exec(e))?new He(t[1],t[2],t[3],1):(t=J0.exec(e))?new He(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Z0.exec(e))?Ea(t[1],t[2],t[3],t[4]):(t=ex.exec(e))?Ea(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=tx.exec(e))?Ac(t[1],t[2]/100,t[3]/100,1):(t=rx.exec(e))?Ac(t[1],t[2]/100,t[3]/100,t[4]):yc.hasOwnProperty(e)?wc(yc[e]):e==="transparent"?new He(NaN,NaN,NaN,0):null}function wc(e){return new He(e>>16&255,e>>8&255,e&255,1)}function Ea(e,t,r,n){return n<=0&&(e=t=r=NaN),new He(e,t,r,n)}function ax(e){return e instanceof go||(e=Te(e)),e?(e=e.rgb(),new He(e.r,e.g,e.b,e.opacity)):new He}function Cn(e,t,r,n){return arguments.length===1?ax(e):new He(e,t,r,n??1)}function He(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Na(He,Cn,Ql(go,{brighter(e){return e=e==null?La:Math.pow(La,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?po:Math.pow(po,e),new He(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new He(Br(this.r),Br(this.g),Br(this.b),za(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Sc,formatHex:Sc,formatHex8:ix,formatRgb:_c,toString:_c}));function Sc(){return`#${zr(this.r)}${zr(this.g)}${zr(this.b)}`}function ix(){return`#${zr(this.r)}${zr(this.g)}${zr(this.b)}${zr((isNaN(this.opacity)?1:this.opacity)*255)}`}function _c(){let e=za(this.opacity);return`${e===1?"rgb(":"rgba("}${Br(this.r)}, ${Br(this.g)}, ${Br(this.b)}${e===1?")":`, ${e})`}`}function za(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Br(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function zr(e){return e=Br(e),(e<16?"0":"")+e.toString(16)}function Ac(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new pt(e,t,r,n)}function Mc(e){if(e instanceof pt)return new pt(e.h,e.s,e.l,e.opacity);if(e instanceof go||(e=Te(e)),!e)return new pt;if(e instanceof pt)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,l=a-o,s=(a+o)/2;return l?(t===a?i=(r-n)/l+(r<n)*6:r===a?i=(n-t)/l+2:i=(t-r)/l+4,l/=s<.5?a+o:2-a-o,i*=60):l=s>0&&s<1?0:i,new pt(i,l,s,e.opacity)}function Tc(e,t,r,n){return arguments.length===1?Mc(e):new pt(e,t,r,n??1)}function pt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Na(pt,Tc,Ql(go,{brighter(e){return e=e==null?La:Math.pow(La,e),new pt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?po:Math.pow(po,e),new pt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new He(Kl(e>=240?e-240:e+120,o,n),Kl(e,o,n),Kl(e<120?e+240:e-120,o,n),this.opacity)},clamp(){return new pt(Cc(this.h),Pa(this.s),Pa(this.l),za(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=za(this.opacity);return`${e===1?"hsl(":"hsla("}${Cc(this.h)}, ${Pa(this.s)*100}%, ${Pa(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Cc(e){return e=(e||0)%360,e<0?e+360:e}function Pa(e){return Math.max(0,Math.min(1,e||0))}function Kl(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function Jl(e,t,r,n,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*r+(1+3*e+3*a-3*i)*n+i*o)/6}function Vc(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[n],a=e[n+1],i=n>0?e[n-1]:2*o-a,l=n<t-1?e[n+2]:2*a-o;return Jl((r-n/t)*t,i,o,a,l)}}function kc(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),o=e[(n+t-1)%t],a=e[n%t],i=e[(n+1)%t],l=e[(n+2)%t];return Jl((r-n/t)*t,o,a,i,l)}}var xo=e=>()=>e;function lx(e,t){return function(r){return e+r*t}}function sx(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Dc(e){return(e=+e)==1?Ba:function(t,r){return r-t?sx(t,r,e):xo(isNaN(t)?r:t)}}function Ba(e,t){var r=t-e;return r?lx(e,r):xo(isNaN(e)?t:e)}var Or=function e(t){var r=Dc(t);function n(o,a){var i=r((o=Cn(o)).r,(a=Cn(a)).r),l=r(o.g,a.g),s=r(o.b,a.b),u=Ba(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=l(c),o.b=s(c),o.opacity=u(c),o+""}}return n.gamma=e,n}(1);function Nc(e){return function(t){var r=t.length,n=new Array(r),o=new Array(r),a=new Array(r),i,l;for(i=0;i<r;++i)l=Cn(t[i]),n[i]=l.r||0,o[i]=l.g||0,a[i]=l.b||0;return n=e(n),o=e(o),a=e(a),l.opacity=1,function(s){return l.r=n(s),l.g=o(s),l.b=a(s),l+""}}}var ux=Nc(Vc),cx=Nc(kc);function Ec(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=e[o]*(1-a)+t[o]*a;return n}}function Pc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Lc(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,o=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)o[i]=Ve(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(l){for(i=0;i<n;++i)a[i]=o[i](l);return a}}function zc(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function _e(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Bc(e,t){var r={},n={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?r[o]=Ve(e[o],t[o]):n[o]=t[o];return function(a){for(o in r)n[o]=r[o](a);return n}}var es=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Zl=new RegExp(es.source,"g");function fx(e){return function(){return e}}function mx(e){return function(t){return e(t)+""}}function yo(e,t){var r=es.lastIndex=Zl.lastIndex=0,n,o,a,i=-1,l=[],s=[];for(e=e+"",t=t+"";(n=es.exec(e))&&(o=Zl.exec(t));)(a=o.index)>r&&(a=t.slice(r,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,s.push({i,x:_e(n,o)})),r=Zl.lastIndex;return r<t.length&&(a=t.slice(r),l[i]?l[i]+=a:l[++i]=a),l.length<2?s[0]?mx(s[0].x):fx(t):(t=s.length,function(u){for(var c=0,m;c<t;++c)l[(m=s[c]).i]=m.x(u);return l.join("")})}function Ve(e,t){var r=typeof t,n;return t==null||r==="boolean"?xo(t):(r==="number"?_e:r==="string"?(n=Te(t))?(t=n,Or):yo:t instanceof Te?Or:t instanceof Date?zc:Pc(t)?Ec:Array.isArray(t)?Lc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Bc:_e)(e,t)}function bo(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}var Oc=180/Math.PI,Oa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ts(e,t,r,n,o,a){var i,l,s;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(s=e*r+t*n)&&(r-=e*s,n-=t*s),(l=Math.sqrt(r*r+n*n))&&(r/=l,n/=l,s/=l),e*n<t*r&&(e=-e,t=-t,s=-s,i=-i),{translateX:o,translateY:a,rotate:Math.atan2(t,e)*Oc,skewX:Math.atan(s)*Oc,scaleX:i,scaleY:l}}var Ia;function Ic(e){let t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Oa:ts(t.a,t.b,t.c,t.d,t.e,t.f)}function Rc(e){return e==null?Oa:(Ia||(Ia=document.createElementNS("http://www.w3.org/2000/svg","g")),Ia.setAttribute("transform",e),(e=Ia.transform.baseVal.consolidate())?(e=e.matrix,ts(e.a,e.b,e.c,e.d,e.e,e.f)):Oa)}function Fc(e,t,r,n){function o(u){return u.length?u.pop()+" ":""}function a(u,c,m,f,d,p){if(u!==m||c!==f){var h=d.push("translate(",null,t,null,r);p.push({i:h-4,x:_e(u,m)},{i:h-2,x:_e(c,f)})}else(m||f)&&d.push("translate("+m+t+f+r)}function i(u,c,m,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:m.push(o(m)+"rotate(",null,n)-2,x:_e(u,c)})):c&&m.push(o(m)+"rotate("+c+n)}function l(u,c,m,f){u!==c?f.push({i:m.push(o(m)+"skewX(",null,n)-2,x:_e(u,c)}):c&&m.push(o(m)+"skewX("+c+n)}function s(u,c,m,f,d,p){if(u!==m||c!==f){var h=d.push(o(d)+"scale(",null,",",null,")");p.push({i:h-4,x:_e(u,m)},{i:h-2,x:_e(c,f)})}else(m!==1||f!==1)&&d.push(o(d)+"scale("+m+","+f+")")}return function(u,c){var m=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,m,f),i(u.rotate,c.rotate,m,f),l(u.skewX,c.skewX,m,f),s(u.scaleX,u.scaleY,c.scaleX,c.scaleY,m,f),u=c=null,function(d){for(var p=-1,h=f.length,x;++p<h;)m[(x=f[p]).i]=x.x(d);return m.join("")}}}var rs=Fc(Ic,"px, ","px)","deg)"),ns=Fc(Rc,", ",")",")");var dx=1e-12;function $c(e){return((e=Math.exp(e))+1/e)/2}function px(e){return((e=Math.exp(e))-1/e)/2}function hx(e){return((e=Math.exp(2*e))-1)/(e+1)}var os=function e(t,r,n){function o(a,i){var l=a[0],s=a[1],u=a[2],c=i[0],m=i[1],f=i[2],d=c-l,p=m-s,h=d*d+p*p,x,g;if(h<dx)g=Math.log(f/u)/t,x=function(C){return[l+C*d,s+C*p,u*Math.exp(t*C*g)]};else{var S=Math.sqrt(h),_=(f*f-u*u+n*h)/(2*u*r*S),v=(f*f-u*u-n*h)/(2*f*r*S),b=Math.log(Math.sqrt(_*_+1)-_),y=Math.log(Math.sqrt(v*v+1)-v);g=(y-b)/t,x=function(C){var T=C*g,R=$c(b),F=u/(r*S)*(R*hx(t*T+b)-px(b));return[l+F*d,s+F*p,u*R/$c(t*T+b)]}}return x.duration=g*1e3*t/Math.SQRT2,x}return o.rho=function(a){var i=Math.max(.001,+a),l=i*i,s=l*l;return e(i,l,s)},o}(Math.SQRT2,2,4);function as(e){return function(){return e}}function Mn(e){return+e}var Hc=[0,1];function Ye(e){return e}function is(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:as(isNaN(t)?NaN:.5)}function gx(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function xx(e,t,r){var n=e[0],o=e[1],a=t[0],i=t[1];return o<n?(n=is(o,n),a=r(i,a)):(n=is(n,o),a=r(a,i)),function(l){return a(n(l))}}function yx(e,t,r){var n=Math.min(e.length,t.length)-1,o=new Array(n),a=new Array(n),i=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<n;)o[i]=is(e[i],e[i+1]),a[i]=r(t[i],t[i+1]);return function(l){var s=Wl(e,l,1,n)-1;return a[s](o[s](l))}}function Jt(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function vo(){var e=Hc,t=Hc,r=Ve,n,o,a,i=Ye,l,s,u;function c(){var f=Math.min(e.length,t.length);return i!==Ye&&(i=gx(e[0],e[f-1])),l=f>2?yx:xx,s=u=null,m}function m(f){return f==null||isNaN(f=+f)?a:(s||(s=l(e.map(n),t,r)))(n(i(f)))}return m.invert=function(f){return i(o((u||(u=l(t,e.map(n),_e)))(f)))},m.domain=function(f){return arguments.length?(e=Array.from(f,Mn),c()):e.slice()},m.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},m.rangeRound=function(f){return t=Array.from(f),r=bo,c()},m.clamp=function(f){return arguments.length?(i=f?!0:Ye,c()):i!==Ye},m.interpolate=function(f){return arguments.length?(r=f,c()):r},m.unknown=function(f){return arguments.length?(a=f,m):a},function(f,d){return n=f,o=d,c()}}function wo(){return vo()(Ye,Ye)}function Yc(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ir(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Tt(e){return e=Ir(Math.abs(e)),e?e[1]:NaN}function Wc(e,t){return function(r,n){for(var o=r.length,a=[],i=0,l=e[0],s=0;o>0&&l>0&&(s+l+1>n&&(l=Math.max(1,n-s)),a.push(r.substring(o-=l,o+l)),!((s+=l+1)>n));)l=e[i=(i+1)%e.length];return a.reverse().join(t)}}function qc(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var bx=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Vt(e){if(!(t=bx.exec(e)))throw new Error("invalid format: "+e);var t;return new Ra({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Vt.prototype=Ra.prototype;function Ra(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ra.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Gc(e){e:for(var t=e.length,r=1,n=-1,o;r<t;++r)switch(e[r]){case".":n=o=r;break;case"0":n===0&&(n=r),o=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(o+1):e}var ls;function Uc(e,t){var r=Ir(e,t);if(!r)return e+"";var n=r[0],o=r[1],a=o-(ls=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+Ir(e,Math.max(0,t+a-1))[0]}function ss(e,t){var r=Ir(e,t);if(!r)return e+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var us={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Yc,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ss(e*100,t),r:ss,s:Uc,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function cs(e){return e}var Xc=Array.prototype.map,jc=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function Qc(e){var t=e.grouping===void 0||e.thousands===void 0?cs:Wc(Xc.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",o=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?cs:qc(Xc.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"\u2212":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(m){m=Vt(m);var f=m.fill,d=m.align,p=m.sign,h=m.symbol,x=m.zero,g=m.width,S=m.comma,_=m.precision,v=m.trim,b=m.type;b==="n"?(S=!0,b="g"):us[b]||(_===void 0&&(_=12),v=!0,b="g"),(x||f==="0"&&d==="=")&&(x=!0,f="0",d="=");var y=h==="$"?r:h==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",C=h==="$"?n:/[%p]/.test(b)?i:"",T=us[b],R=/[defgprs%]/.test(b);_=_===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function F(E){var W=y,P=C,w,B,A;if(b==="c")P=T(E)+P,E="";else{E=+E;var V=E<0||1/E<0;if(E=isNaN(E)?s:T(Math.abs(E),_),v&&(E=Gc(E)),V&&+E==0&&p!=="+"&&(V=!1),W=(V?p==="("?p:l:p==="-"||p==="("?"":p)+W,P=(b==="s"?jc[8+ls/3]:"")+P+(V&&p==="("?")":""),R){for(w=-1,B=E.length;++w<B;)if(A=E.charCodeAt(w),48>A||A>57){P=(A===46?o+E.slice(w+1):E.slice(w))+P,E=E.slice(0,w);break}}}S&&!x&&(E=t(E,1/0));var M=W.length+E.length+P.length,D=M<g?new Array(g-M+1).join(f):"";switch(S&&x&&(E=t(D+E,D.length?g-P.length:1/0),D=""),d){case"<":E=W+E+P+D;break;case"=":E=W+D+E+P;break;case"^":E=D.slice(0,M=D.length>>1)+W+E+P+D.slice(M);break;default:E=D+W+E+P;break}return a(E)}return F.toString=function(){return m+""},F}function c(m,f){var d=u((m=Vt(m),m.type="f",m)),p=Math.max(-8,Math.min(8,Math.floor(Tt(f)/3)))*3,h=Math.pow(10,-p),x=jc[8+p/3];return function(g){return d(h*g)+x}}return{format:u,formatPrefix:c}}var Fa,kt,$a;fs({thousands:",",grouping:[3],currency:["$",""]});function fs(e){return Fa=Qc(e),kt=Fa.format,$a=Fa.formatPrefix,Fa}function ms(e){return Math.max(0,-Tt(Math.abs(e)))}function ds(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Tt(t)/3)))*3-Tt(Math.abs(e)))}function ps(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Tt(t)-Tt(e))+1}function hs(e,t,r,n){var o=Sn(e,t,r),a;switch(n=Vt(n??",f"),n.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(a=ds(o,i))&&(n.precision=a),$a(n,i)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(a=ps(o,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=a-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(a=ms(o))&&(n.precision=a-(n.type==="%")*2);break}}return kt(n)}function Rr(e){var t=e.domain;return e.ticks=function(r){var n=t();return Pr(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var o=t();return hs(o[0],o[o.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),o=0,a=n.length-1,i=n[o],l=n[a],s,u,c=10;for(l<i&&(u=i,i=l,l=u,u=o,o=a,a=u);c-- >0;){if(u=fo(i,l,r),u===s)return n[o]=i,n[a]=l,t(n);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function ke(){var e=wo();return e.copy=function(){return Jt(e,ke())},at.apply(e,arguments),Rr(e)}function pe(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Mn),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return pe(e).unknown(t)},e=arguments.length?Array.from(e,Mn):[0,1],Rr(r)}function So(e,t){e=e.slice();var r=0,n=e.length-1,o=e[r],a=e[n],i;return a<o&&(i=r,r=n,n=i,i=o,o=a,a=i),e[r]=t.floor(o),e[n]=t.ceil(a),e}function Kc(e){return Math.log(e)}function Jc(e){return Math.exp(e)}function vx(e){return-Math.log(-e)}function wx(e){return-Math.exp(-e)}function Sx(e){return isFinite(e)?+("1e"+e):e<0?0:e}function _x(e){return e===10?Sx:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Ax(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Zc(e){return(t,r)=>-e(-t,r)}function Cx(e){let t=e(Kc,Jc),r=t.domain,n=10,o,a;function i(){return o=Ax(n),a=_x(n),r()[0]<0?(o=Zc(o),a=Zc(a),e(vx,wx)):e(Kc,Jc),t}return t.base=function(l){return arguments.length?(n=+l,i()):n},t.domain=function(l){return arguments.length?(r(l),i()):r()},t.ticks=l=>{let s=r(),u=s[0],c=s[s.length-1],m=c<u;m&&([u,c]=[c,u]);let f=o(u),d=o(c),p,h,x=l==null?10:+l,g=[];if(!(n%1)&&d-f<x){if(f=Math.floor(f),d=Math.ceil(d),u>0){for(;f<=d;++f)for(p=1;p<n;++p)if(h=f<0?p/a(-f):p*a(f),!(h<u)){if(h>c)break;g.push(h)}}else for(;f<=d;++f)for(p=n-1;p>=1;--p)if(h=f>0?p/a(-f):p*a(f),!(h<u)){if(h>c)break;g.push(h)}g.length*2<x&&(g=Pr(u,c,x))}else g=Pr(f,d,Math.min(d-f,x)).map(a);return m?g.reverse():g},t.tickFormat=(l,s)=>{if(l==null&&(l=10),s==null&&(s=n===10?"s":","),typeof s!="function"&&(!(n%1)&&(s=Vt(s)).precision==null&&(s.trim=!0),s=kt(s)),l===1/0)return s;let u=Math.max(1,n*l/t.ticks().length);return c=>{let m=c/a(Math.round(o(c)));return m*n<n-.5&&(m*=n),m<=u?s(c):""}},t.nice=()=>r(So(r(),{floor:l=>a(Math.floor(o(l))),ceil:l=>a(Math.ceil(o(l)))})),t}function _o(){let e=Cx(vo()).domain([1,10]);return e.copy=()=>Jt(e,_o()).base(e.base()),at.apply(e,arguments),e}function ef(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Mx(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Tx(e){return e<0?-e*e:e*e}function Vx(e){var t=e(Ye,Ye),r=1;function n(){return r===1?e(Ye,Ye):r===.5?e(Mx,Tx):e(ef(r),ef(1/r))}return t.exponent=function(o){return arguments.length?(r=+o,n()):r},Rr(t)}function Ao(){var e=Vx(vo());return e.copy=function(){return Jt(e,Ao()).exponent(e.exponent())},at.apply(e,arguments),e}var gs=new Date,xs=new Date;function te(e,t,r,n){function o(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return o.floor=a=>(e(a=new Date(+a)),a),o.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),o.round=a=>{let i=o(a),l=o.ceil(a);return a-i<l-a?i:l},o.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),o.range=(a,i,l)=>{let s=[];if(a=o.ceil(a),l=l==null?1:Math.floor(l),!(a<i)||!(l>0))return s;let u;do s.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<i);return s},o.filter=a=>te(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!a(i););else for(;--l>=0;)for(;t(i,1),!a(i););}),r&&(o.count=(a,i)=>(gs.setTime(+a),xs.setTime(+i),e(gs),e(xs),Math.floor(r(gs,xs))),o.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?o.filter(n?i=>n(i)%a===0:i=>o.count(0,i)%a===0):o)),o}var ht=te(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);ht.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?te(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):ht);var tf=ht.range;var Dt=te(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*1e3)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds()),rf=Dt.range;var Tn=te(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getMinutes()),kx=Tn.range,Ha=te(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*6e4)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes()),Dx=Ha.range;var Vn=te(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*1e3-e.getMinutes()*6e4)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getHours()),Nx=Vn.range,Ya=te(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*36e5)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours()),Ex=Ya.range;var gt=te(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1),Px=gt.range,Hr=te(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1),Lx=Hr.range,Wa=te(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5)),zx=Wa.range;function Yr(e){return te(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*6e4)/6048e5)}var $t=Yr(0),kn=Yr(1),of=Yr(2),af=Yr(3),Zt=Yr(4),lf=Yr(5),sf=Yr(6),uf=$t.range,Bx=kn.range,Ox=of.range,Ix=af.range,Rx=Zt.range,Fx=lf.range,$x=sf.range;function Wr(e){return te(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/6048e5)}var qr=Wr(0),Dn=Wr(1),cf=Wr(2),ff=Wr(3),er=Wr(4),mf=Wr(5),df=Wr(6),pf=qr.range,Hx=Dn.range,Yx=cf.range,Wx=ff.range,qx=er.range,Gx=mf.range,Ux=df.range;var Nn=te(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth()),Xx=Nn.range,qa=te(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth()),jx=qa.range;var Je=te(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Je.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:te(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});var Qx=Je.range,xt=te(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:te(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});var Kx=xt.range;function gf(e,t,r,n,o,a){let i=[[Dt,1,1e3],[Dt,5,5*1e3],[Dt,15,15*1e3],[Dt,30,30*1e3],[a,1,6e4],[a,5,5*6e4],[a,15,15*6e4],[a,30,30*6e4],[o,1,36e5],[o,3,3*36e5],[o,6,6*36e5],[o,12,12*36e5],[n,1,864e5],[n,2,2*864e5],[r,1,6048e5],[t,1,2592e6],[t,3,3*2592e6],[e,1,31536e6]];function l(u,c,m){let f=c<u;f&&([u,c]=[c,u]);let d=m&&typeof m.range=="function"?m:s(u,c,m),p=d?d.range(u,+c+1):[];return f?p.reverse():p}function s(u,c,m){let f=Math.abs(c-u)/m,d=Er(([,,x])=>x).right(i,f);if(d===i.length)return e.every(Sn(u/31536e6,c/31536e6,m));if(d===0)return ht.every(Math.max(Sn(u,c,m),1));let[p,h]=i[f/i[d-1][2]<i[d][2]/f?d-1:d];return p.every(h)}return[l,s]}var[Zx,ey]=gf(xt,qa,qr,Wa,Ya,Ha),[ys,bs]=gf(Je,Nn,$t,gt,Vn,Tn);function vs(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function ws(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Mo(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function Ss(e){var t=e.dateTime,r=e.date,n=e.time,o=e.periods,a=e.days,i=e.shortDays,l=e.months,s=e.shortMonths,u=To(o),c=Vo(o),m=To(a),f=Vo(a),d=To(i),p=Vo(i),h=To(l),x=Vo(l),g=To(s),S=Vo(s),_={a:V,A:M,b:D,B:N,c:null,d:Sf,e:Sf,f:_y,g:Py,G:zy,H:vy,I:wy,j:Sy,L:Tf,m:Ay,M:Cy,p:Y,q,Q:Cf,s:Mf,S:My,u:Ty,U:Vy,V:ky,w:Dy,W:Ny,x:null,X:null,y:Ey,Y:Ly,Z:By,"%":Af},v={a:k,A:O,b:G,B:X,c:null,d:_f,e:_f,f:Fy,g:Qy,G:Jy,H:Oy,I:Iy,j:Ry,L:kf,m:$y,M:Hy,p:J,q:ue,Q:Cf,s:Mf,S:Yy,u:Wy,U:qy,V:Gy,w:Uy,W:Xy,x:null,X:null,y:jy,Y:Ky,Z:Zy,"%":Af},b={a:F,A:E,b:W,B:P,c:w,d:vf,e:vf,f:gy,g:bf,G:yf,H:wf,I:wf,j:my,L:hy,m:fy,M:dy,p:R,q:cy,Q:yy,s:by,S:py,u:ay,U:iy,V:ly,w:oy,W:sy,x:B,X:A,y:bf,Y:yf,Z:uy,"%":xy};_.x=y(r,_),_.X=y(n,_),_.c=y(t,_),v.x=y(r,v),v.X=y(n,v),v.c=y(t,v);function y($,j){return function(K){var I=[],Re=-1,ne=0,Qe=$.length,Ke,Nr,mc;for(K instanceof Date||(K=new Date(+K));++Re<Qe;)$.charCodeAt(Re)===37&&(I.push($.slice(ne,Re)),(Nr=xf[Ke=$.charAt(++Re)])!=null?Ke=$.charAt(++Re):Nr=Ke==="e"?" ":"0",(mc=j[Ke])&&(Ke=mc(K,Nr)),I.push(Ke),ne=Re+1);return I.push($.slice(ne,Re)),I.join("")}}function C($,j){return function(K){var I=Mo(1900,void 0,1),Re=T(I,$,K+="",0),ne,Qe;if(Re!=K.length)return null;if("Q"in I)return new Date(I.Q);if("s"in I)return new Date(I.s*1e3+("L"in I?I.L:0));if(j&&!("Z"in I)&&(I.Z=0),"p"in I&&(I.H=I.H%12+I.p*12),I.m===void 0&&(I.m="q"in I?I.q:0),"V"in I){if(I.V<1||I.V>53)return null;"w"in I||(I.w=1),"Z"in I?(ne=ws(Mo(I.y,0,1)),Qe=ne.getUTCDay(),ne=Qe>4||Qe===0?Dn.ceil(ne):Dn(ne),ne=Hr.offset(ne,(I.V-1)*7),I.y=ne.getUTCFullYear(),I.m=ne.getUTCMonth(),I.d=ne.getUTCDate()+(I.w+6)%7):(ne=vs(Mo(I.y,0,1)),Qe=ne.getDay(),ne=Qe>4||Qe===0?kn.ceil(ne):kn(ne),ne=gt.offset(ne,(I.V-1)*7),I.y=ne.getFullYear(),I.m=ne.getMonth(),I.d=ne.getDate()+(I.w+6)%7)}else("W"in I||"U"in I)&&("w"in I||(I.w="u"in I?I.u%7:"W"in I?1:0),Qe="Z"in I?ws(Mo(I.y,0,1)).getUTCDay():vs(Mo(I.y,0,1)).getDay(),I.m=0,I.d="W"in I?(I.w+6)%7+I.W*7-(Qe+5)%7:I.w+I.U*7-(Qe+6)%7);return"Z"in I?(I.H+=I.Z/100|0,I.M+=I.Z%100,ws(I)):vs(I)}}function T($,j,K,I){for(var Re=0,ne=j.length,Qe=K.length,Ke,Nr;Re<ne;){if(I>=Qe)return-1;if(Ke=j.charCodeAt(Re++),Ke===37){if(Ke=j.charAt(Re++),Nr=b[Ke in xf?j.charAt(Re++):Ke],!Nr||(I=Nr($,K,I))<0)return-1}else if(Ke!=K.charCodeAt(I++))return-1}return I}function R($,j,K){var I=u.exec(j.slice(K));return I?($.p=c.get(I[0].toLowerCase()),K+I[0].length):-1}function F($,j,K){var I=d.exec(j.slice(K));return I?($.w=p.get(I[0].toLowerCase()),K+I[0].length):-1}function E($,j,K){var I=m.exec(j.slice(K));return I?($.w=f.get(I[0].toLowerCase()),K+I[0].length):-1}function W($,j,K){var I=g.exec(j.slice(K));return I?($.m=S.get(I[0].toLowerCase()),K+I[0].length):-1}function P($,j,K){var I=h.exec(j.slice(K));return I?($.m=x.get(I[0].toLowerCase()),K+I[0].length):-1}function w($,j,K){return T($,t,j,K)}function B($,j,K){return T($,r,j,K)}function A($,j,K){return T($,n,j,K)}function V($){return i[$.getDay()]}function M($){return a[$.getDay()]}function D($){return s[$.getMonth()]}function N($){return l[$.getMonth()]}function Y($){return o[+($.getHours()>=12)]}function q($){return 1+~~($.getMonth()/3)}function k($){return i[$.getUTCDay()]}function O($){return a[$.getUTCDay()]}function G($){return s[$.getUTCMonth()]}function X($){return l[$.getUTCMonth()]}function J($){return o[+($.getUTCHours()>=12)]}function ue($){return 1+~~($.getUTCMonth()/3)}return{format:function($){var j=y($+="",_);return j.toString=function(){return $},j},parse:function($){var j=C($+="",!1);return j.toString=function(){return $},j},utcFormat:function($){var j=y($+="",v);return j.toString=function(){return $},j},utcParse:function($){var j=C($+="",!0);return j.toString=function(){return $},j}}}var xf={"-":"",_:" ",0:"0"},ve=/^\s*\d+/,ty=/^%/,ry=/[\\^$*+?|[\]().{}]/g;function ee(e,t,r){var n=e<0?"-":"",o=(n?-e:e)+"",a=o.length;return n+(a<r?new Array(r-a+1).join(t)+o:o)}function ny(e){return e.replace(ry,"\\$&")}function To(e){return new RegExp("^(?:"+e.map(ny).join("|")+")","i")}function Vo(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function oy(e,t,r){var n=ve.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function ay(e,t,r){var n=ve.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function iy(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function ly(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function sy(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function yf(e,t,r){var n=ve.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function bf(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function uy(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function cy(e,t,r){var n=ve.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function fy(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function vf(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function my(e,t,r){var n=ve.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function wf(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function dy(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function py(e,t,r){var n=ve.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function hy(e,t,r){var n=ve.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function gy(e,t,r){var n=ve.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function xy(e,t,r){var n=ty.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function yy(e,t,r){var n=ve.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function by(e,t,r){var n=ve.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function Sf(e,t){return ee(e.getDate(),t,2)}function vy(e,t){return ee(e.getHours(),t,2)}function wy(e,t){return ee(e.getHours()%12||12,t,2)}function Sy(e,t){return ee(1+gt.count(Je(e),e),t,3)}function Tf(e,t){return ee(e.getMilliseconds(),t,3)}function _y(e,t){return Tf(e,t)+"000"}function Ay(e,t){return ee(e.getMonth()+1,t,2)}function Cy(e,t){return ee(e.getMinutes(),t,2)}function My(e,t){return ee(e.getSeconds(),t,2)}function Ty(e){var t=e.getDay();return t===0?7:t}function Vy(e,t){return ee($t.count(Je(e)-1,e),t,2)}function Vf(e){var t=e.getDay();return t>=4||t===0?Zt(e):Zt.ceil(e)}function ky(e,t){return e=Vf(e),ee(Zt.count(Je(e),e)+(Je(e).getDay()===4),t,2)}function Dy(e){return e.getDay()}function Ny(e,t){return ee(kn.count(Je(e)-1,e),t,2)}function Ey(e,t){return ee(e.getFullYear()%100,t,2)}function Py(e,t){return e=Vf(e),ee(e.getFullYear()%100,t,2)}function Ly(e,t){return ee(e.getFullYear()%1e4,t,4)}function zy(e,t){var r=e.getDay();return e=r>=4||r===0?Zt(e):Zt.ceil(e),ee(e.getFullYear()%1e4,t,4)}function By(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ee(t/60|0,"0",2)+ee(t%60,"0",2)}function _f(e,t){return ee(e.getUTCDate(),t,2)}function Oy(e,t){return ee(e.getUTCHours(),t,2)}function Iy(e,t){return ee(e.getUTCHours()%12||12,t,2)}function Ry(e,t){return ee(1+Hr.count(xt(e),e),t,3)}function kf(e,t){return ee(e.getUTCMilliseconds(),t,3)}function Fy(e,t){return kf(e,t)+"000"}function $y(e,t){return ee(e.getUTCMonth()+1,t,2)}function Hy(e,t){return ee(e.getUTCMinutes(),t,2)}function Yy(e,t){return ee(e.getUTCSeconds(),t,2)}function Wy(e){var t=e.getUTCDay();return t===0?7:t}function qy(e,t){return ee(qr.count(xt(e)-1,e),t,2)}function Df(e){var t=e.getUTCDay();return t>=4||t===0?er(e):er.ceil(e)}function Gy(e,t){return e=Df(e),ee(er.count(xt(e),e)+(xt(e).getUTCDay()===4),t,2)}function Uy(e){return e.getUTCDay()}function Xy(e,t){return ee(Dn.count(xt(e)-1,e),t,2)}function jy(e,t){return ee(e.getUTCFullYear()%100,t,2)}function Qy(e,t){return e=Df(e),ee(e.getUTCFullYear()%100,t,2)}function Ky(e,t){return ee(e.getUTCFullYear()%1e4,t,4)}function Jy(e,t){var r=e.getUTCDay();return e=r>=4||r===0?er(e):er.ceil(e),ee(e.getUTCFullYear()%1e4,t,4)}function Zy(){return"+0000"}function Af(){return"%"}function Cf(e){return+e}function Mf(e){return Math.floor(+e/1e3)}var En,Ga,Nf,Ef,Pf;_s({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function _s(e){return En=Ss(e),Ga=En.format,Nf=En.parse,Ef=En.utcFormat,Pf=En.utcParse,En}function eb(e){return new Date(e)}function tb(e){return e instanceof Date?+e:+new Date(+e)}function Lf(e,t,r,n,o,a,i,l,s,u){var c=wo(),m=c.invert,f=c.domain,d=u(".%L"),p=u(":%S"),h=u("%I:%M"),x=u("%I %p"),g=u("%a %d"),S=u("%b %d"),_=u("%B"),v=u("%Y");function b(y){return(s(y)<y?d:l(y)<y?p:i(y)<y?h:a(y)<y?x:n(y)<y?o(y)<y?g:S:r(y)<y?_:v)(y)}return c.invert=function(y){return new Date(m(y))},c.domain=function(y){return arguments.length?f(Array.from(y,tb)):f().map(eb)},c.ticks=function(y){var C=f();return e(C[0],C[C.length-1],y??10)},c.tickFormat=function(y,C){return C==null?b:u(C)},c.nice=function(y){var C=f();return(!y||typeof y.range!="function")&&(y=t(C[0],C[C.length-1],y??10)),y?f(So(C,y)):c},c.copy=function(){return Jt(c,Lf(e,t,r,n,o,a,i,l,s,u))},c}function Pn(){return at.apply(Lf(ys,bs,Je,Nn,$t,gt,Vn,Tn,Dt,Ga).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function rb(){var e=0,t=1,r,n,o,a,i=Ye,l=!1,s;function u(m){return m==null||isNaN(m=+m)?s:i(o===0?.5:(m=(a(m)-r)*o,l?Math.max(0,Math.min(1,m)):m))}u.domain=function(m){return arguments.length?([e,t]=m,r=a(e=+e),n=a(t=+t),o=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(m){return arguments.length?(l=!!m,u):l},u.interpolator=function(m){return arguments.length?(i=m,u):i};function c(m){return function(f){var d,p;return arguments.length?([d,p]=f,i=m(d,p),u):[i(0),i(1)]}}return u.range=c(Ve),u.rangeRound=c(bo),u.unknown=function(m){return arguments.length?(s=m,u):s},function(m){return a=m,r=m(e),n=m(t),o=r===n?0:1/(n-r),u}}function nb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ko(){var e=Rr(rb()(Ye));return e.copy=function(){return nb(e,ko())},xc.apply(e,arguments)}var Ua=(e,t,r,n,o)=>{let a={};return a.getTimeComponentArrayFromString=i=>[i.slice(0,2),i.slice(3,5),i.slice(6,8),i.slice(9,12)],a.getTimeString=i=>{let[l,s,u,c]=r(i).map(m=>m.toString(10).padStart(2,"0"));return`${l}:${s}:${u}.${c.padStart(3,"0")}`},a.setTime=(i,l,s=0)=>{let[u,c,m,f]=a.getTimeComponentArrayFromString(l);return o.offset(e(i,u,c,m,f),s)},a.getStartOfNextDay=i=>n.offset(n.floor(i),1),a.getEndOfPreviousDay=i=>o.offset(n.floor(i),-1),a.dayInterval=n,a.msInterval=o,a.getDay=t,a};var tC=Ua((e,t,r,n,o)=>new Date(e.getFullYear(),e.getMonth(),e.getDate(),t,r,n,o),e=>e.getDay(),e=>[e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()],gt,ht);var lC=Ua((e,t,r,n,o)=>new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t,r,n,o)),e=>e.getUTCDay(),e=>[e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()],Hr,ht);function Do(){let e=[i=>i],t=[0,0],r="percent",n=null,o=[],a=i=>{let l=new Array(i.length);for(let u of e)for(let c=0;c<i.length;c++){let m=u(i[c],c);Array.isArray(m)?l.push(...m):l.push(m)}let s=[Fe(l),ot(l)];if(s[0]=s[0]==null?Fe(o):Fe([s[0],...o]),s[1]=s[1]==null?ot(o):ot([s[1],...o]),n!=null){let u=Math.max(Math.abs(s[1]-n),Math.abs(s[0]-n));s[0]=n-u,s[1]=n+u}switch(r){case"domain":{s[0]-=t[0],s[1]+=t[1];break}case"percent":{let u=s[1]-s[0];s[0]-=t[0]*u,s[1]+=t[1]*u;break}default:throw new Error(`Unknown padUnit: ${r}`)}return s};return a.accessors=(...i)=>i.length?(e=i[0],a):e,a.pad=(...i)=>i.length?(t=i[0],a):t,a.padUnit=(...i)=>i.length?(r=i[0],a):r,a.include=(...i)=>i.length?(o=i[0],a):o,a.symmetricalAbout=(...i)=>i.length?(n=i[0],a):n,a}function No(){let e=[],t=[0,0],r="percent",n=null,o=[],a=Do(),i=s=>s!=null?s.valueOf():null,l=s=>{let u=e.map(c=>(...m)=>{let f=c(...m);return Array.isArray(f)?f.map(i):i(f)});return a.accessors(u).pad(t).padUnit(r).symmetricalAbout(n!=null?n.valueOf():null).include(o.map(c=>c.valueOf())),a(s).map(c=>new Date(c))};return l.accessors=(...s)=>s.length?(e=s[0],l):e,l.pad=(...s)=>s.length?(t=s[0],l):t,l.padUnit=(...s)=>s.length?(r=s[0],l):r,l.include=(...s)=>s.length?(o=s[0],l):o,l.symmetricalAbout=(...s)=>s.length?(n=s[0],l):n,l}var Cs=Math.PI,Ms=2*Cs,Gr=1e-6,ib=Ms-Gr;function Of(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function lb(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return Of;let r=10**t;return function(n){this._+=n[0];for(let o=1,a=n.length;o<a;++o)this._+=Math.round(arguments[o]*r)/r+n[o]}}var Ur=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?Of:lb(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,o){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+o}`}bezierCurveTo(t,r,n,o,a,i){this._append`C${+t},${+r},${+n},${+o},${this._x1=+a},${this._y1=+i}`}arcTo(t,r,n,o,a){if(t=+t,r=+r,n=+n,o=+o,a=+a,a<0)throw new Error(`negative radius: ${a}`);let i=this._x1,l=this._y1,s=n-t,u=o-r,c=i-t,m=l-r,f=c*c+m*m;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(f>Gr)if(!(Math.abs(m*s-u*c)>Gr)||!a)this._append`L${this._x1=t},${this._y1=r}`;else{let d=n-i,p=o-l,h=s*s+u*u,x=d*d+p*p,g=Math.sqrt(h),S=Math.sqrt(f),_=a*Math.tan((Cs-Math.acos((h+f-x)/(2*g*S)))/2),v=_/S,b=_/g;Math.abs(v-1)>Gr&&this._append`L${t+v*c},${r+v*m}`,this._append`A${a},${a},0,0,${+(m*d>c*p)},${this._x1=t+b*s},${this._y1=r+b*u}`}}arc(t,r,n,o,a,i){if(t=+t,r=+r,n=+n,i=!!i,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(o),s=n*Math.sin(o),u=t+l,c=r+s,m=1^i,f=i?o-a:a-o;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>Gr||Math.abs(this._y1-c)>Gr)&&this._append`L${u},${c}`,n&&(f<0&&(f=f%Ms+Ms),f>ib?this._append`A${n},${n},0,1,${m},${t-l},${r-s}A${n},${n},0,1,${m},${this._x1=u},${this._y1=c}`:f>Gr&&this._append`A${n},${n},0,${+(f>=Cs)},${m},${this._x1=t+n*Math.cos(a)},${this._y1=r+n*Math.sin(a)}`)}rect(t,r,n,o){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+o}h${-n}Z`}toString(){return this._}};function tr(){return new Ur}tr.prototype=Ur.prototype;var ce=e=>typeof e=="function"?e:()=>e;var Xa=()=>{let e=null,t=u=>u.date,r=u=>u.open,n=u=>u.high,o=u=>u.low,a=u=>u.close,i="vertical",l=ce(3),s=function(u){let c=e||tr();return u.forEach(function(m,f){let d=t(m,f),p=r(m,f),h=n(m,f),x=o(m,f),g=a(m,f),S=l(m,f)/2;i==="vertical"?(c.moveTo(d,x),c.lineTo(d,h),c.moveTo(d,p),c.lineTo(d-S,p),c.moveTo(d,g),c.lineTo(d+S,g)):(c.moveTo(x,d),c.lineTo(h,d),c.moveTo(p,d),c.lineTo(p,d+S),c.moveTo(g,d),c.lineTo(g,d-S))}),e?null:c.toString()};return s.context=(...u)=>u.length?(e=u[0],s):e,s.x=(...u)=>u.length?(t=ce(u[0]),s):t,s.open=(...u)=>u.length?(r=ce(u[0]),s):r,s.high=(...u)=>u.length?(n=ce(u[0]),s):n,s.low=(...u)=>u.length?(o=ce(u[0]),s):o,s.close=(...u)=>u.length?(a=ce(u[0]),s):a,s.width=(...u)=>u.length?(l=ce(u[0]),s):l,s.orient=(...u)=>u.length?(i=u[0],s):i,s};var rr=()=>{let e=null,t=s=>s.x,r=s=>s.y,n="center",o="center",a=s=>s.height,i=ce(3),l=function(s,u){let c=e||tr();return s.forEach(function(m,f){let d=t.call(this,m,u||f),p=r.call(this,m,u||f),h=a.call(this,m,u||f),x=i.call(this,m,u||f),g;switch(n){case"left":g=x;break;case"right":g=0;break;case"center":g=x/2;break;default:throw new Error("Invalid horizontal alignment "+n)}let S;switch(o){case"bottom":S=-h;break;case"top":S=0;break;case"center":S=h/2;break;default:throw new Error("Invalid vertical alignment "+o)}c.rect(d-g,p-S,x,h)},this),e?null:c.toString()};return l.context=(...s)=>s.length?(e=s[0],l):e,l.x=(...s)=>s.length?(t=ce(s[0]),l):t,l.y=(...s)=>s.length?(r=ce(s[0]),l):r,l.width=(...s)=>s.length?(i=ce(s[0]),l):i,l.horizontalAlign=(...s)=>s.length?(n=s[0],l):n,l.height=(...s)=>s.length?(a=ce(s[0]),l):a,l.verticalAlign=(...s)=>s.length?(o=s[0],l):o,l};var ja=()=>{let e=null,t=s=>s.date,r=s=>s.open,n=s=>s.high,o=s=>s.low,a=s=>s.close,i=ce(3),l=function(s){let u=e||tr();return s.forEach(function(c,m){let f=t(c,m),d=r(c,m),p=n(c,m),h=o(c,m),x=a(c,m),g=i(c,m),S=g/2;u.rect(f-S,d,g,x-d),u.moveTo(f,Math.min(x,d)),u.lineTo(f,p),u.moveTo(f,Math.max(x,d)),u.lineTo(f,h)}),e?null:u.toString()};return l.context=(...s)=>s.length?(e=s[0],l):e,l.x=(...s)=>s.length?(t=ce(s[0]),l):t,l.open=(...s)=>s.length?(r=ce(s[0]),l):r,l.high=(...s)=>s.length?(n=ce(s[0]),l):n,l.low=(...s)=>s.length?(o=ce(s[0]),l):o,l.close=(...s)=>s.length?(a=ce(s[0]),l):a,l.width=(...s)=>s.length?(i=ce(s[0]),l):i,l};var Qa="http://www.w3.org/1999/xhtml",Ts={svg:"http://www.w3.org/2000/svg",xhtml:Qa,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Ht(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),Ts.hasOwnProperty(t)?{space:Ts[t],local:e}:e}function sb(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===Qa&&t.documentElement.namespaceURI===Qa?t.createElement(e):t.createElementNS(r,e)}}function ub(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ka(e){var t=Ht(e);return(t.local?ub:sb)(t)}function cb(){}function Xr(e){return e==null?cb:function(){return this.querySelector(e)}}function Ff(e){typeof e!="function"&&(e=Xr(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=new Array(i),s,u,c=0;c<i;++c)(s=a[c])&&(u=e.call(s,s.__data__,c,a))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new ie(n,this._parents)}function Eo(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function fb(){return[]}function Po(e){return e==null?fb:function(){return this.querySelectorAll(e)}}function mb(e){return function(){return Eo(e.apply(this,arguments))}}function $f(e){typeof e=="function"?e=mb(e):e=Po(e);for(var t=this._groups,r=t.length,n=[],o=[],a=0;a<r;++a)for(var i=t[a],l=i.length,s,u=0;u<l;++u)(s=i[u])&&(n.push(e.call(s,s.__data__,u,i)),o.push(s));return new ie(n,o)}function Lo(e){return function(){return this.matches(e)}}function Ja(e){return function(t){return t.matches(e)}}var db=Array.prototype.find;function pb(e){return function(){return db.call(this.children,e)}}function hb(){return this.firstElementChild}function Hf(e){return this.select(e==null?hb:pb(typeof e=="function"?e:Ja(e)))}var gb=Array.prototype.filter;function xb(){return Array.from(this.children)}function yb(e){return function(){return gb.call(this.children,e)}}function Yf(e){return this.selectAll(e==null?xb:yb(typeof e=="function"?e:Ja(e)))}function Wf(e){typeof e!="function"&&(e=Lo(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=[],s,u=0;u<i;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new ie(n,this._parents)}function Za(e){return new Array(e.length)}function qf(){return new ie(this._enter||this._groups.map(Za),this._parents)}function zo(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}zo.prototype={constructor:zo,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Gf(e){return function(){return e}}function bb(e,t,r,n,o,a){for(var i=0,l,s=t.length,u=a.length;i<u;++i)(l=t[i])?(l.__data__=a[i],n[i]=l):r[i]=new zo(e,a[i]);for(;i<s;++i)(l=t[i])&&(o[i]=l)}function vb(e,t,r,n,o,a,i){var l,s,u=new Map,c=t.length,m=a.length,f=new Array(c),d;for(l=0;l<c;++l)(s=t[l])&&(f[l]=d=i.call(s,s.__data__,l,t)+"",u.has(d)?o[l]=s:u.set(d,s));for(l=0;l<m;++l)d=i.call(e,a[l],l,a)+"",(s=u.get(d))?(n[l]=s,s.__data__=a[l],u.delete(d)):r[l]=new zo(e,a[l]);for(l=0;l<c;++l)(s=t[l])&&u.get(f[l])===s&&(o[l]=s)}function wb(e){return e.__data__}function Uf(e,t){if(!arguments.length)return Array.from(this,wb);var r=t?vb:bb,n=this._parents,o=this._groups;typeof e!="function"&&(e=Gf(e));for(var a=o.length,i=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=n[u],m=o[u],f=m.length,d=Sb(e.call(c,c&&c.__data__,u,n)),p=d.length,h=l[u]=new Array(p),x=i[u]=new Array(p),g=s[u]=new Array(f);r(c,m,h,x,g,d,t);for(var S=0,_=0,v,b;S<p;++S)if(v=h[S]){for(S>=_&&(_=S+1);!(b=x[_])&&++_<p;);v._next=b||null}}return i=new ie(i,n),i._enter=l,i._exit=s,i}function Sb(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Xf(){return new ie(this._exit||this._groups.map(Za),this._parents)}function jf(e,t,r){var n=this.enter(),o=this,a=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),t!=null&&(o=t(o),o&&(o=o.selection())),r==null?a.remove():r(a),n&&o?n.merge(o).order():o}function Qf(e){for(var t=e.selection?e.selection():e,r=this._groups,n=t._groups,o=r.length,a=n.length,i=Math.min(o,a),l=new Array(o),s=0;s<i;++s)for(var u=r[s],c=n[s],m=u.length,f=l[s]=new Array(m),d,p=0;p<m;++p)(d=u[p]||c[p])&&(f[p]=d);for(;s<o;++s)l[s]=r[s];return new ie(l,this._parents)}function Kf(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,a=n[o],i;--o>=0;)(i=n[o])&&(a&&i.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(i,a),a=i);return this}function Jf(e){e||(e=_b);function t(m,f){return m&&f?e(m.__data__,f.__data__):!m-!f}for(var r=this._groups,n=r.length,o=new Array(n),a=0;a<n;++a){for(var i=r[a],l=i.length,s=o[a]=new Array(l),u,c=0;c<l;++c)(u=i[c])&&(s[c]=u);s.sort(t)}return new ie(o,this._parents).order()}function _b(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Zf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function em(){return Array.from(this)}function tm(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,a=n.length;o<a;++o){var i=n[o];if(i)return i}return null}function rm(){let e=0;for(let t of this)++e;return e}function nm(){return!this.node()}function om(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],a=0,i=o.length,l;a<i;++a)(l=o[a])&&e.call(l,l.__data__,a,o);return this}function Ab(e){return function(){this.removeAttribute(e)}}function Cb(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Mb(e,t){return function(){this.setAttribute(e,t)}}function Tb(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Vb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function kb(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function am(e,t){var r=Ht(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?Cb:Ab:typeof t=="function"?r.local?kb:Vb:r.local?Tb:Mb)(r,t))}function ei(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Db(e){return function(){this.style.removeProperty(e)}}function Nb(e,t,r){return function(){this.style.setProperty(e,t,r)}}function Eb(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function im(e,t,r){return arguments.length>1?this.each((t==null?Db:typeof t=="function"?Eb:Nb)(e,t,r??"")):nr(this.node(),e)}function nr(e,t){return e.style.getPropertyValue(t)||ei(e).getComputedStyle(e,null).getPropertyValue(t)}function Pb(e){return function(){delete this[e]}}function Lb(e,t){return function(){this[e]=t}}function zb(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function lm(e,t){return arguments.length>1?this.each((t==null?Pb:typeof t=="function"?zb:Lb)(e,t)):this.node()[e]}function sm(e){return e.trim().split(/^|\s+/)}function Vs(e){return e.classList||new um(e)}function um(e){this._node=e,this._names=sm(e.getAttribute("class")||"")}um.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function cm(e,t){for(var r=Vs(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function fm(e,t){for(var r=Vs(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function Bb(e){return function(){cm(this,e)}}function Ob(e){return function(){fm(this,e)}}function Ib(e,t){return function(){(t.apply(this,arguments)?cm:fm)(this,e)}}function mm(e,t){var r=sm(e+"");if(arguments.length<2){for(var n=Vs(this.node()),o=-1,a=r.length;++o<a;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?Ib:t?Bb:Ob)(r,t))}function Rb(){this.textContent=""}function Fb(e){return function(){this.textContent=e}}function $b(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function dm(e){return arguments.length?this.each(e==null?Rb:(typeof e=="function"?$b:Fb)(e)):this.node().textContent}function Hb(){this.innerHTML=""}function Yb(e){return function(){this.innerHTML=e}}function Wb(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function pm(e){return arguments.length?this.each(e==null?Hb:(typeof e=="function"?Wb:Yb)(e)):this.node().innerHTML}function qb(){this.nextSibling&&this.parentNode.appendChild(this)}function hm(){return this.each(qb)}function Gb(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gm(){return this.each(Gb)}function xm(e){var t=typeof e=="function"?e:Ka(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ub(){return null}function ym(e,t){var r=typeof e=="function"?e:Ka(e),n=t==null?Ub:typeof t=="function"?t:Xr(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function Xb(){var e=this.parentNode;e&&e.removeChild(this)}function bm(){return this.each(Xb)}function jb(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Qb(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function vm(e){return this.select(e?Qb:jb)}function wm(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Kb(e){return function(t){e.call(this,t,this.__data__)}}function Jb(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Zb(e){return function(){var t=this.__on;if(!!t){for(var r=0,n=-1,o=t.length,a;r<o;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++n]=a;++n?t.length=n:delete this.__on}}}function e1(e,t,r){return function(){var n=this.__on,o,a=Kb(t);if(n){for(var i=0,l=n.length;i<l;++i)if((o=n[i]).type===e.type&&o.name===e.name){this.removeEventListener(o.type,o.listener,o.options),this.addEventListener(o.type,o.listener=a,o.options=r),o.value=t;return}}this.addEventListener(e.type,a,r),o={type:e.type,name:e.name,value:t,listener:a,options:r},n?n.push(o):this.__on=[o]}}function Sm(e,t,r){var n=Jb(e+""),o,a=n.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(o=0,c=l[s];o<a;++o)if((i=n[o]).type===c.type&&i.name===c.name)return c.value}return}for(l=t?e1:Zb,o=0;o<a;++o)this.each(l(n[o],t,r));return this}function _m(e,t,r){var n=ei(e),o=n.CustomEvent;typeof o=="function"?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function t1(e,t){return function(){return _m(this,e,t)}}function r1(e,t){return function(){return _m(this,e,t.apply(this,arguments))}}function Am(e,t){return this.each((typeof t=="function"?r1:t1)(e,t))}function*Cm(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,a=n.length,i;o<a;++o)(i=n[o])&&(yield i)}var Bo=[null];function ie(e,t){this._groups=e,this._parents=t}function Mm(){return new ie([[document.documentElement]],Bo)}function n1(){return this}ie.prototype=Mm.prototype={constructor:ie,select:Ff,selectAll:$f,selectChild:Hf,selectChildren:Yf,filter:Wf,data:Uf,enter:qf,exit:Xf,join:jf,merge:Qf,selection:n1,order:Kf,sort:Jf,call:Zf,nodes:em,node:tm,size:rm,empty:nm,each:om,attr:am,style:im,property:lm,classed:mm,text:dm,html:pm,raise:hm,lower:gm,append:xm,insert:ym,remove:bm,clone:vm,datum:wm,on:Sm,dispatch:Am,[Symbol.iterator]:Cm};var yt=Mm;function L(e){return typeof e=="string"?new ie([[document.querySelector(e)]],[document.documentElement]):new ie([[e]],Bo)}function Tm(e){let t;for(;t=e.sourceEvent;)e=t;return e}function We(e,t){if(e=Tm(e),t===void 0&&(t=e.currentTarget),t){var r=t.ownerSVGElement||t;if(r.createSVGPoint){var n=r.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[e.clientX-o.left-t.clientLeft,e.clientY-o.top-t.clientTop]}}return[e.pageX,e.pageY]}function ks(e){return typeof e=="string"?new ie([document.querySelectorAll(e)],[document.documentElement]):new ie([Eo(e)],Bo)}var oe=e=>e.selection()!==e,U=(e,t)=>{e=e||"g";let r=(a,i)=>i,n=null,o=function(a,i){i=i||(p=>p);let l=a.selection(),s=oe(a)?a:null,c=l.selectChildren(t==null?e:`${e}.${t}`).data(i,r),m=c.enter().append(e).attr("class",t),f=c.exit();c=c.merge(m);let d=s||n;return d&&(c=c.transition(d).style("opacity",1),m.style("opacity",1e-6),f=f.transition(d).style("opacity",1e-6)),f.remove(),c.enter=()=>m,c.exit=()=>f,c};return o.element=(...a)=>a.length?(e=a[0],o):e,o.className=(...a)=>a.length?(t=a[0],o):t,o.key=(...a)=>a.length?(r=a[0],o):r,o.transition=(...a)=>a.length?(n=a[0],o):n,o};function Z(e){return function(){return e}}var Ds=Math.abs,Ae=Math.atan2,bt=Math.cos,Dm=Math.max,ti=Math.min,De=Math.sin,le=Math.sqrt,Le=1e-12,vt=Math.PI,Oo=vt/2,or=2*vt;function Nm(e){return e>1?0:e<-1?vt:Math.acos(e)}function Ns(e){return e>=1?Oo:e<=-1?-Oo:Math.asin(e)}function ar(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{let n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Ur(t)}function l1(e){return e.innerRadius}function s1(e){return e.outerRadius}function u1(e){return e.startAngle}function c1(e){return e.endAngle}function f1(e){return e&&e.padAngle}function m1(e,t,r,n,o,a,i,l){var s=r-e,u=n-t,c=i-o,m=l-a,f=m*s-c*u;if(!(f*f<Le))return f=(c*(t-a)-m*(e-o))/f,[e+f*s,t+f*u]}function ri(e,t,r,n,o,a,i){var l=e-r,s=t-n,u=(i?a:-a)/le(l*l+s*s),c=u*s,m=-u*l,f=e+c,d=t+m,p=r+c,h=n+m,x=(f+p)/2,g=(d+h)/2,S=p-f,_=h-d,v=S*S+_*_,b=o-a,y=f*h-p*d,C=(_<0?-1:1)*le(Dm(0,b*b*v-y*y)),T=(y*_-S*C)/v,R=(-y*S-_*C)/v,F=(y*_+S*C)/v,E=(-y*S+_*C)/v,W=T-x,P=R-g,w=F-x,B=E-g;return W*W+P*P>w*w+B*B&&(T=F,R=E),{cx:T,cy:R,x01:-c,y01:-m,x11:T*(o/b-1),y11:R*(o/b-1)}}function Es(){var e=l1,t=s1,r=Z(0),n=null,o=u1,a=c1,i=f1,l=null,s=ar(u);function u(){var c,m,f=+e.apply(this,arguments),d=+t.apply(this,arguments),p=o.apply(this,arguments)-Oo,h=a.apply(this,arguments)-Oo,x=Ds(h-p),g=h>p;if(l||(l=c=s()),d<f&&(m=d,d=f,f=m),!(d>Le))l.moveTo(0,0);else if(x>or-Le)l.moveTo(d*bt(p),d*De(p)),l.arc(0,0,d,p,h,!g),f>Le&&(l.moveTo(f*bt(h),f*De(h)),l.arc(0,0,f,h,p,g));else{var S=p,_=h,v=p,b=h,y=x,C=x,T=i.apply(this,arguments)/2,R=T>Le&&(n?+n.apply(this,arguments):le(f*f+d*d)),F=ti(Ds(d-f)/2,+r.apply(this,arguments)),E=F,W=F,P,w;if(R>Le){var B=Ns(R/f*De(T)),A=Ns(R/d*De(T));(y-=B*2)>Le?(B*=g?1:-1,v+=B,b-=B):(y=0,v=b=(p+h)/2),(C-=A*2)>Le?(A*=g?1:-1,S+=A,_-=A):(C=0,S=_=(p+h)/2)}var V=d*bt(S),M=d*De(S),D=f*bt(b),N=f*De(b);if(F>Le){var Y=d*bt(_),q=d*De(_),k=f*bt(v),O=f*De(v),G;if(x<vt)if(G=m1(V,M,k,O,Y,q,D,N)){var X=V-G[0],J=M-G[1],ue=Y-G[0],$=q-G[1],j=1/De(Nm((X*ue+J*$)/(le(X*X+J*J)*le(ue*ue+$*$)))/2),K=le(G[0]*G[0]+G[1]*G[1]);E=ti(F,(f-K)/(j-1)),W=ti(F,(d-K)/(j+1))}else E=W=0}C>Le?W>Le?(P=ri(k,O,V,M,d,W,g),w=ri(Y,q,D,N,d,W,g),l.moveTo(P.cx+P.x01,P.cy+P.y01),W<F?l.arc(P.cx,P.cy,W,Ae(P.y01,P.x01),Ae(w.y01,w.x01),!g):(l.arc(P.cx,P.cy,W,Ae(P.y01,P.x01),Ae(P.y11,P.x11),!g),l.arc(0,0,d,Ae(P.cy+P.y11,P.cx+P.x11),Ae(w.cy+w.y11,w.cx+w.x11),!g),l.arc(w.cx,w.cy,W,Ae(w.y11,w.x11),Ae(w.y01,w.x01),!g))):(l.moveTo(V,M),l.arc(0,0,d,S,_,!g)):l.moveTo(V,M),!(f>Le)||!(y>Le)?l.lineTo(D,N):E>Le?(P=ri(D,N,Y,q,f,-E,g),w=ri(V,M,k,O,f,-E,g),l.lineTo(P.cx+P.x01,P.cy+P.y01),E<F?l.arc(P.cx,P.cy,E,Ae(P.y01,P.x01),Ae(w.y01,w.x01),!g):(l.arc(P.cx,P.cy,E,Ae(P.y01,P.x01),Ae(P.y11,P.x11),!g),l.arc(0,0,f,Ae(P.cy+P.y11,P.cx+P.x11),Ae(w.cy+w.y11,w.cx+w.x11),g),l.arc(w.cx,w.cy,E,Ae(w.y11,w.x11),Ae(w.y01,w.x01),!g))):l.arc(0,0,f,b,v,g)}if(l.closePath(),c)return l=null,c+""||null}return u.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,m=(+o.apply(this,arguments)+ +a.apply(this,arguments))/2-vt/2;return[bt(m)*c,De(m)*c]},u.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:Z(+c),u):e},u.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:Z(+c),u):t},u.cornerRadius=function(c){return arguments.length?(r=typeof c=="function"?c:Z(+c),u):r},u.padRadius=function(c){return arguments.length?(n=c==null?null:typeof c=="function"?c:Z(+c),u):n},u.startAngle=function(c){return arguments.length?(o=typeof c=="function"?c:Z(+c),u):o},u.endAngle=function(c){return arguments.length?(a=typeof c=="function"?c:Z(+c),u):a},u.padAngle=function(c){return arguments.length?(i=typeof c=="function"?c:Z(+c),u):i},u.context=function(c){return arguments.length?(l=c??null,u):l},u}var Z7=Array.prototype.slice;function ni(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Em(e){this._context=e}Em.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function oi(e){return new Em(e)}function ai(e){return e[0]}function ii(e){return e[1]}function Ze(e,t){var r=Z(!0),n=null,o=oi,a=null,i=ar(l);e=typeof e=="function"?e:e===void 0?ai:Z(e),t=typeof t=="function"?t:t===void 0?ii:Z(t);function l(s){var u,c=(s=ni(s)).length,m,f=!1,d;for(n==null&&(a=o(d=i())),u=0;u<=c;++u)!(u<c&&r(m=s[u],u,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(m,u,s),+t(m,u,s));if(d)return a=null,d+""||null}return l.x=function(s){return arguments.length?(e=typeof s=="function"?s:Z(+s),l):e},l.y=function(s){return arguments.length?(t=typeof s=="function"?s:Z(+s),l):t},l.defined=function(s){return arguments.length?(r=typeof s=="function"?s:Z(!!s),l):r},l.curve=function(s){return arguments.length?(o=s,n!=null&&(a=o(n)),l):o},l.context=function(s){return arguments.length?(s==null?n=a=null:a=o(n=s),l):n},l}function Io(e,t,r){var n=null,o=Z(!0),a=null,i=oi,l=null,s=ar(u);e=typeof e=="function"?e:e===void 0?ai:Z(+e),t=typeof t=="function"?t:t===void 0?Z(0):Z(+t),r=typeof r=="function"?r:r===void 0?ii:Z(+r);function u(m){var f,d,p,h=(m=ni(m)).length,x,g=!1,S,_=new Array(h),v=new Array(h);for(a==null&&(l=i(S=s())),f=0;f<=h;++f){if(!(f<h&&o(x=m[f],f,m))===g)if(g=!g)d=f,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),p=f-1;p>=d;--p)l.point(_[p],v[p]);l.lineEnd(),l.areaEnd()}g&&(_[f]=+e(x,f,m),v[f]=+t(x,f,m),l.point(n?+n(x,f,m):_[f],r?+r(x,f,m):v[f]))}if(S)return l=null,S+""||null}function c(){return Ze().defined(o).curve(i).context(a)}return u.x=function(m){return arguments.length?(e=typeof m=="function"?m:Z(+m),n=null,u):e},u.x0=function(m){return arguments.length?(e=typeof m=="function"?m:Z(+m),u):e},u.x1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:Z(+m),u):n},u.y=function(m){return arguments.length?(t=typeof m=="function"?m:Z(+m),r=null,u):t},u.y0=function(m){return arguments.length?(t=typeof m=="function"?m:Z(+m),u):t},u.y1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:Z(+m),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(n).y(t)},u.defined=function(m){return arguments.length?(o=typeof m=="function"?m:Z(!!m),u):o},u.curve=function(m){return arguments.length?(i=m,a!=null&&(l=i(a)),u):i},u.context=function(m){return arguments.length?(m==null?a=l=null:l=i(a=m),u):a},u}var ir={draw(e,t){let r=le(t/vt);e.moveTo(r,0),e.arc(0,0,r,0,or)}};var li={draw(e,t){let r=le(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}};var Pm=le(1/3),d1=Pm*2,si={draw(e,t){let r=le(t/d1),n=r*Pm;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}};var ui={draw(e,t){let r=le(t),n=-r/2;e.rect(n,n,r,r)}};var p1=.8908130915292852,Lm=De(vt/10)/De(7*vt/10),h1=De(or/10)*Lm,g1=-bt(or/10)*Lm,ci={draw(e,t){let r=le(t*p1),n=h1*r,o=g1*r;e.moveTo(0,-r),e.lineTo(n,o);for(let a=1;a<5;++a){let i=or*a/5,l=bt(i),s=De(i);e.lineTo(s*r,-l*r),e.lineTo(l*n-s*o,s*n+l*o)}e.closePath()}};var Ps=le(3),fi={draw(e,t){let r=-le(t/(Ps*3));e.moveTo(0,r*2),e.lineTo(-Ps*r,-r),e.lineTo(Ps*r,-r),e.closePath()}};var it=-.5,lt=le(3)/2,Ls=1/le(12),x1=(Ls/2+1)*3,mi={draw(e,t){let r=le(t/x1),n=r/2,o=r*Ls,a=n,i=r*Ls+r,l=-a,s=i;e.moveTo(n,o),e.lineTo(a,i),e.lineTo(l,s),e.lineTo(it*n-lt*o,lt*n+it*o),e.lineTo(it*a-lt*i,lt*a+it*i),e.lineTo(it*l-lt*s,lt*l+it*s),e.lineTo(it*n+lt*o,it*o-lt*n),e.lineTo(it*a+lt*i,it*i-lt*a),e.lineTo(it*l+lt*s,it*s-lt*l),e.closePath()}};function lr(e,t){let r=null,n=ar(o);e=typeof e=="function"?e:Z(e||ir),t=typeof t=="function"?t:Z(t===void 0?64:+t);function o(){let a;if(r||(r=a=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),a)return r=null,a+""||null}return o.type=function(a){return arguments.length?(e=typeof a=="function"?a:Z(a),o):e},o.size=function(a){return arguments.length?(t=typeof a=="function"?a:Z(+a),o):t},o.context=function(a){return arguments.length?(r=a??null,o):r},o}var ge=e=>typeof e=="function"?e:()=>e;function Yt(){let e=arguments;return function(t,r){for(let n=0,o=e.length;n<o;n++)if(e[n](t,r)==null)return!1;return!0}}var sr=(e,t)=>{switch(e){case"left":return t/2;case"right":return-t/2;default:return 0}};var st=e=>{let t=Object.assign({},e),r=()=>{};return Object.keys(t).forEach(n=>{r[n]=(...o)=>o.length?(t[n]=o[0],r):t[n]}),r};var xe=()=>{let e=()=>0,t=l=>l.x,r=l=>l.y,n="center",o=()=>5,a="vertical",i=st({decorate:()=>{},defined:(l,s)=>Yt(e,t,r)(l,s),xScale:pe(),yScale:pe()});return i.values=(l,s)=>{let u=o(l,s),c=sr(n,u),m=i.xScale(),f=i.yScale();if(a==="vertical"){let d=f(r(l,s),s),p=f(e(l,s),s),h=m(t(l,s),s)+c;return{d:l,x:h,y:d,y0:p,width:u,height:d-p,origin:[h,d],baseOrigin:[h,p],transposedX:h,transposedY:d}}else{let d=m(r(l,s),s),p=m(e(l,s),s),h=f(t(l,s),s)+c;return{d:l,x:h,y:d,y0:p,width:u,height:d-p,origin:[d,h],baseOrigin:[p,h],transposedX:d,transposedY:h}}},i.xValues=()=>a==="vertical"?[t]:[e,r],i.yValues=()=>a!=="vertical"?[t]:[e,r],i.baseValue=(...l)=>l.length?(e=ge(l[0]),i):e,i.crossValue=(...l)=>l.length?(t=ge(l[0]),i):t,i.mainValue=(...l)=>l.length?(r=ge(l[0]),i):r,i.bandwidth=(...l)=>l.length?(o=ge(l[0]),i):o,i.align=(...l)=>l.length?(n=l[0],i):n,i.orient=(...l)=>l.length?(a=l[0],i):a,i};var b1="#c60",v1="#6c0",w1="#000",S1="#ddd",_1="#999",se={red:b1,green:v1,black:w1,gray:S1,darkGray:_1};var jr=()=>{let e=xe(),t=Ze().x((o,a)=>e.values(o,a).transposedX).y((o,a)=>e.values(o,a).transposedY),r=U("path","line"),n=o=>{oe(o)&&r.transition(o),t.defined(e.defined()),o.each((a,i,l)=>{let s=r(L(l[i]),[a]);s.enter().attr("fill","none").attr("stroke",se.black),s.attr("d",t),e.decorate()(s,a,i)})};return z(n,e,Q("baseValue","bandwidth","align")),H(n,r,"key"),H(n,t,"curve"),n};var Ln=()=>{let e=xe(),t=Ze().x((n,o)=>e.values(n,o).transposedX).y((n,o)=>e.values(n,o).transposedY),r=n=>{let o=t.context();o.beginPath(),o.strokeStyle=se.black,o.fillStyle="transparent",e.decorate()(o,n),t.defined(e.defined())(n),o.fill(),o.stroke(),o.closePath()};return z(r,e,Q("baseValue","bandwidth","align")),H(r,t,"curve","context"),r};var yE=ke().copy.toString(),bE=_o().copy.toString(),vE=Ao().copy.toString(),wE=Pn().copy.toString(),SE=pe(),_E=Date.now();var Bn=()=>{let e=lr(),t=xe(),r=U("g","point"),n=a=>"translate("+a[0]+", "+a[1]+")",o=a=>{oe(a)&&r.transition(a),a.each((i,l,s)=>{let u=i.filter(t.defined()),c=r(L(s[l]),u);c.enter().attr("transform",(m,f)=>n(t.values(m,f).origin)).attr("fill",se.gray).attr("stroke",se.black).append("path"),c.attr("transform",(m,f)=>n(t.values(m,f).origin)).select("path").attr("d",e),t.decorate()(c,i,l)})};return z(o,t,Q("baseValue","bandwidth","align")),H(o,r,"key"),H(o,e,"type","size"),o};var pi=()=>{let e=lr(),t=xe(),r=n=>{let o=n.filter(t.defined()),a=e.context();o.forEach((i,l)=>{a.save();let s=t.values(i,l);a.translate(s.origin[0],s.origin[1]),a.beginPath(),a.strokeStyle=se.black,a.fillStyle=se.gray,t.decorate()(a,i,l),e(i,l),a.fill(),a.stroke(),a.closePath(),a.restore()})};return z(r,t,Q("baseValue","bandwidth","align")),H(r,e,"size","type","context"),r};var On=()=>{let e=rr().x(0).y(0),t=xe(),r=U("g","bar"),n=l=>t.orient()==="vertical"?l.height:l.width,o=l=>t.orient()==="vertical"?l.width:l.height,a=l=>"translate("+l[0]+", "+l[1]+")",i=l=>{oe(l)&&r.transition(l),l.each((s,u,c)=>{let m=t.orient();if(m!=="vertical"&&m!=="horizontal")throw new Error("The bar series does not support an orientation of "+m);let f=s.filter(t.defined()),d=f.map(t.values);e.width(0).height(0),t.orient()==="vertical"?(e.verticalAlign("top"),e.horizontalAlign("center")):(e.horizontalAlign("right"),e.verticalAlign("center"));let p=r(L(c[u]),f);p.enter().attr("transform",(h,x)=>a(d[x].baseOrigin)).attr("class","bar "+t.orient()).attr("fill",se.darkGray).append("path").attr("d",(h,x)=>(o(e)(d[x].width),e([h]))),p.attr("transform",(h,x)=>a(d[x].origin)).select("path").attr("d",(h,x)=>(o(e)(d[x].width),n(e)(-d[x].height),e([h]))),t.decorate()(p,f,u)})};return z(i,t),H(i,r,"key"),i};var Bs=()=>{let e=xe(),t=Io(),r=U("path","area"),n=o=>{oe(o)&&r.transition(o),t.defined(e.defined()),o.each((a,i,l)=>{let s=a.map(e.values);t.x((m,f)=>s[f].transposedX).y((m,f)=>s[f].transposedY);let u=e.orient()==="vertical"?"y":"x";t[u+"0"]((m,f)=>s[f].y0),t[u+"1"]((m,f)=>s[f].y);let c=r(L(l[i]),[a]);c.enter().attr("fill",se.gray),c.attr("d",t),e.decorate()(c,a,i)})};return z(n,e,Q("bandwidth","align")),H(n,r,"key"),H(n,t,"curve"),n};var Os=()=>{let e=xe(),t=Io(),r=n=>{let o=t.context();t.defined(e.defined());let a=n.map(e.values);t.x((l,s)=>a[s].transposedX).y((l,s)=>a[s].transposedY);let i=e.orient()==="vertical"?"y":"x";t[i+"0"]((l,s)=>a[s].y0),t[i+"1"]((l,s)=>a[s].y),o.beginPath(),o.fillStyle=se.gray,o.strokeStyle="transparent",e.decorate()(o,n),t(n),o.fill(),o.stroke(),o.closePath()};return z(r,e,Q("bandwidth","align")),H(r,t,"curve","context"),r};var hi=()=>{let e,t=u=>u.date,r=u=>u.open,n=u=>u.high,o=u=>u.low,a=u=>u.close,i=()=>5,l="center",s=(u,c)=>e.xScale()(t(u,c));return e=st({decorate:()=>{},defined:(u,c)=>Yt(t,r,o,n,a)(u,c),xScale:pe(),yScale:pe()}),e.values=(u,c)=>{let m=a(u,c),f=r(u,c),d=i(u,c),p=sr(l,d),h="";return m>f?h="up":m<f&&(h="down"),{cross:s(u,c)+p,open:e.yScale()(f),high:e.yScale()(n(u,c)),low:e.yScale()(o(u,c)),close:e.yScale()(m),width:d,direction:h}},e.xValues=()=>[t],e.yValues=()=>[r,n,o,a],e.crossValue=(...u)=>u.length?(t=u[0],e):t,e.openValue=(...u)=>u.length?(r=u[0],e):r,e.highValue=(...u)=>u.length?(n=u[0],e):n,e.lowValue=(...u)=>u.length?(o=u[0],e):o,e.yValue=e.closeValue=(...u)=>u.length?(a=u[0],e):a,e.bandwidth=(...u)=>u.length?(i=ge(u[0]),e):i,e.align=(...u)=>u.length?(l=u[0],e):l,e};var gi=e=>{let t=hi(),r=n=>{let o=n.filter(t.defined()),a=e.context();o.forEach((i,l)=>{a.save();let s=t.values(i,l);a.translate(s.cross,s.high),a.beginPath(),e.x(0).open(()=>s.open-s.high).width(s.width).high(0).low(()=>s.low-s.high).close(()=>s.close-s.high)([i]);let u=s.direction==="up"?se.green:se.red;a.strokeStyle=u,a.fillStyle=u,t.decorate()(a,i,l),a.fill(),a.stroke(),a.closePath(),a.restore()})};return H(r,e,"context"),z(r,t),r};var Is=()=>gi(ja());var Rs=()=>gi(Xa());var Fo=()=>{let e=[],t=o=>o,r=(o,a)=>a,n=st({decorate:()=>{},xScale:pe(),yScale:pe()});return n.xValues=()=>e.map(o=>o.xValues()).reduce((o,a)=>o.concat(a)),n.yValues=()=>e.map(o=>o.yValues()).reduce((o,a)=>o.concat(a)),n.mapping=(...o)=>o.length?(t=o[0],n):t,n.key=(...o)=>o.length?(r=o[0],n):r,n.series=(...o)=>o.length?(e=o[0],n):e,n};var Ue=()=>{let e=Fo(),t=U("g"),r=U("g","multi"),n=o=>{oe(o)&&(r.transition(o),t.transition(o));let a=e.mapping(),i=e.series(),l=e.xScale(),s=e.yScale();o.each((u,c,m)=>{let f=r(L(m[c]),i);f.each((d,p,h)=>{d.xScale(l).yScale(s);let x=a(u,p,i);t(L(h[p]),[x]).call(d)}),f.selection().order(),e.decorate()(f,u,c)})};return z(n,e),H(n,r,"key"),n};var wt=()=>{let e=null,t=Fo(),r=n=>{let o=t.mapping(),a=t.series(),i=t.xScale(),l=t.yScale();a.forEach((s,u)=>{let c=o(n,u,a);s.context(e).xScale(i).yScale(l);let m;s.decorate?(m=s.decorate(),s.decorate((f,d,p)=>{t.decorate()(f,n,u),m(f,d,p)})):t.decorate()(e,n,u),s(c),m&&s.decorate(m)})};return r.context=(...n)=>n.length?(e=n[0],r):e,z(r,t),r};var Fs=e=>{let t=()=>50,r="center",n=dt(),o=st({decorate:()=>{},xScale:ke(),yScale:ke()});return o.offsetScaleForDatum=(a,i,l)=>{let s=t(i,l),u=sr(r,s),c=s/2;return n.domain(Kt(0,a.length)).range([-c+u,c+u])},o.bandwidth=(...a)=>a.length?(t=ge(a[0]),o):t,o.align=(...a)=>a.length?(r=a[0],o):r,z(o,n,Ct({paddingInner:"paddingOuter"})),o};var $s=e=>{let t=Fs(e),r=U("g","grouped"),n=o=>{oe(o)&&r.transition(o),o.each((a,i,l)=>{let s=r(L(l[i]),a);s.enter().append("g"),s.select("g").each((u,c,m)=>{let f=L(m[c]),d=e.orient()!=="horizontal",p=(h,x)=>{let g=t.offsetScaleForDatum(a,h,x);return(d?t.xScale():t.yScale())(h)+g(c)+g.bandwidth()/2};d?(e.xScale(p),e.yScale(t.yScale())):(e.yScale(p),e.xScale(t.xScale())),e.bandwidth&&e.bandwidth((h,x)=>t.offsetScaleForDatum(a,h,x).bandwidth()),e.decorate((h,x)=>t.decorate()(h,x,c)),f.call(e)})})};return z(n,e,Q("decorate","xScale","yScale")),z(n,t,Q("offsetScaleForDatum")),n};var fr=()=>{let e="vertical",t=jr(),r=Ue(),n=o=>o.each((a,i,l)=>{e==="vertical"?r.series(a[0].map(s=>t)).mapping((s,u)=>s.map(c=>c[u])):r.series(a.map(s=>t)).mapping((s,u)=>s[u]),L(l[i]).call(r)});return n.series=(...o)=>o.length?(t=o[0],n):t,n.orient=(...o)=>o.length?(e=o[0],n):e,z(n,r,Q("series","mapping")),n};var W1=e=>e.sort(At).filter((t,r,n)=>n.indexOf(t,r+1)===-1),Jr=e=>{let t=.75,r=a=>{if(a.length<=1)return 10;a=W1(a);let i=Va(a).map(s=>Math.abs(s[0]-s[1])),l=Fe(i);return t*l},n=(a,i,l)=>{if(a.bandwidth)return a.bandwidth();{let u=(Array.isArray(i)?[].concat(...i):i).filter(e.defined()).map(l()).map(a);return r(u)}},o=a=>{let i=l=>{if(e.xBandwidth&&e.yBandwidth)e.xBandwidth(n(e.xScale(),l,e.xValue)),e.yBandwidth(n(e.yScale(),l,e.yValue));else{let s=e.orient&&e.orient()==="horizontal"?e.yScale():e.xScale();e.bandwidth(n(s,l,e.crossValue))}};a instanceof yt?a.each((l,s,u)=>{i(l),e(L(u[s]))}):(i(a),e(a))};return z(o,e),o.widthFraction=(...a)=>a.length?(t=a[0],o):t,o};function $o(e){for(var t=e.length/6|0,r=new Array(t),n=0;n<t;)r[n]="#"+e.slice(n*6,++n*6);return r}function xi(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var Hs=xi($o("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),q1=xi($o("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),G1=xi($o("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),U1=xi($o("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Ys=()=>{let e=l=>l.x,t=l=>l.y,r=l=>l.color,n=()=>5,o=()=>5,a=Hs,i=st({decorate:()=>{},defined:(l,s)=>Yt(e,t,r)(l,s),xScale:pe(),yScale:pe()});return i.pathGenerator=rr().x(0).y(0),i.colorScale=l=>{let s=l.map(r);return ke().domain([Fe(s),ot(s)])},i.values=(l,s)=>({x:i.xScale()(e(l,s)),y:i.yScale()(t(l,s)),colorValue:r(l,s),width:o(l,s),height:n(l,s)}),i.xValues=()=>[e],i.yValues=()=>[t],i.xValue=(...l)=>l.length?(e=ge(l[0]),i):e,i.yValue=(...l)=>l.length?(t=ge(l[0]),i):t,i.colorValue=(...l)=>l.length?(r=ge(l[0]),i):r,i.colorInterpolate=(...l)=>l.length?(a=l[0],i):a,i.xBandwidth=(...l)=>l.length?(o=ge(l[0]),i):o,i.yBandwidth=(...l)=>l.length?(n=ge(l[0]),i):n,z(i,i.pathGenerator,Ct({horizontalAlign:"xAlign",verticalAlign:"yAlign"})),i};var Ws=()=>{let e=Ys(),t=r=>{let n=r.filter(e.defined()),o=e.colorInterpolate(),a=e.colorScale(n),i=e.pathGenerator.context();n.forEach((l,s)=>{i.save(),i.beginPath();let u=e.values(l,s);i.translate(u.x,u.y),i.fillStyle=o(a(u.colorValue)),i.strokeStyle="transparent",e.decorate()(i,l,s),e.pathGenerator.height(u.height).width(u.width)([l]),i.fill(),i.stroke(),i.closePath(),i.restore()})};return H(t,e.pathGenerator,"context"),z(t,e),t};var In=()=>{let e=pe(),t=[10],r=null,n=()=>r??(e.ticks?e.ticks(...t):e.domain());return n.scale=(...o)=>o.length?(e=o[0],n):e,n.ticks=(...o)=>(t=o,n),n.tickArguments=(...o)=>o.length?(t=o[0],n):t,n.tickValues=(...o)=>o.length?(r=o[0],n):r,n};var Im=e=>e,Gs=()=>{let e=()=>{},t=()=>{},r=In(),n=In(),o=U("line","gridline-y").key(Im),a=U("line","gridline-x").key(Im),i=l=>{oe(l)&&(o.transition(l),a.transition(l)),l.each((s,u,c)=>{let m=c[u],f=L(c[u]),d=r.scale(),p=n.scale(),h=m.__x_scale__||d;m.__x_scale__=d.copy();let x=r(),g=o(f,x);g.enter().attr("x1",h).attr("x2",h).attr("y1",p.range()[0]).attr("y2",p.range()[1]).attr("stroke","#bbb"),g.attr("x1",d).attr("x2",d).attr("y1",p.range()[0]).attr("y2",p.range()[1]),g.exit().attr("x1",d).attr("x2",d),e(g,x,u);let S=m.__y_scale__||p;m.__y_scale__=p.copy();let _=n(),v=a(f,_);v.enter().attr("y1",S).attr("y2",S).attr("x1",d.range()[0]).attr("x2",d.range()[1]).attr("stroke","#bbb"),v.attr("y1",p).attr("y2",p).attr("x1",d.range()[0]).attr("x2",d.range()[1]),v.exit().attr("y1",p).attr("y2",p),t(v,_,u)})};return i.yDecorate=(...l)=>l.length?(t=l[0],i):t,i.xDecorate=(...l)=>l.length?(e=l[0],i):e,z(i,o,Ct({key:"xKey"})),z(i,a,Ct({key:"yKey"})),z(i,r,$e("x")),z(i,n,$e("y")),i};var Us=()=>{let e=()=>{},t=()=>{},r=In(),n=In(),o=Ze(),a=()=>{let i=o.context(),l=r.scale(),s=n.scale();r().forEach((u,c)=>{i.save(),i.beginPath(),i.strokeStyle="#bbb",i.fillStyle="transparent",e(i,u,c),o.context(i)(s.domain().map(m=>[l(u),s(m)])),i.fill(),i.stroke(),i.closePath(),i.restore()}),n().forEach((u,c)=>{i.save(),i.beginPath(),i.strokeStyle="#bbb",i.fillStyle="transparent",t(i,u,c),o.context(i)(l.domain().map(m=>[l(m),s(u)])),i.fill(),i.stroke(),i.closePath(),i.restore()})};return a.yDecorate=(...i)=>i.length?(t=i[0],a):t,a.xDecorate=(...i)=>i.length?(e=i[0],a):e,z(a,r,$e("x")),z(a,n,$e("y")),H(a,o,"context"),a};var Q1=e=>e,Rm=(e,t,r,n)=>e[t]?e[t].apply(e,r):n,Xs=e=>e.tickValues()??Rm(e.scale(),"ticks",e.tickArguments(),e.scale().domain()),js=e=>e.tickFormat()??Rm(e.scale(),"tickFormat",e.tickArguments(),Q1);var K1=e=>e,yi=(e,t,r={})=>{let n=[10],o=null,a=()=>{},i=null,l=6,s=6,u=3,c=Ze(),m=U("g","tick").key(K1),f=U("path","domain"),d=()=>({offset:[0,s+u]}),p=()=>({path:[[0,0],[0,s]]}),h=r.labelOffset||d,x=r.tickPath||p,g=(y,C)=>{let T=0;return y.bandwidth&&(T=y.bandwidth()/2,y.round()&&(T=Math.round(T))),R=>C(y(R)+T,0)},S=(y,C)=>v()?`translate(${C}, ${y})`:`translate(${y}, ${C})`,_=y=>v()?y.map(C=>[C[1],C[0]]):y,v=()=>e==="left"||e==="right",b=y=>{oe(y)&&(m.transition(y),f.transition(y)),y.each((C,T,R)=>{let F=R[T],E=L(F);F.__scale__||E.attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e==="right"?"start":e==="left"?"end":"middle");let W=F.__scale__||t;F.__scale__=t.copy();let P=Xs(b),w=js(b),B=e==="bottom"||e==="right"?1:-1,A=([k,O])=>[k,B*O],V=t.range(),M=_([[V[0],B*l],[V[0],0],[V[1],0],[V[1],B*l]]),D=f(E,[C]);D.enter().attr("stroke","#000"),D.attr("d",c(M));let N=m(E,P),Y=P.map((k,O)=>h(k,O,P)),q=P.map((k,O)=>x(k,O,P));N.enter().attr("transform",g(W,S)).append("path").attr("stroke","#000"),N.enter().append("text").attr("transform",(k,O)=>S(...A(Y[O].offset))).attr("fill","#000"),N.exit().attr("transform",g(t,S)),N.select("path").attr("visibility",(k,O)=>q[O].hidden&&"hidden").attr("d",(k,O)=>c(_(q[O].path.map(A)))),N.select("text").attr("visibility",(k,O)=>Y[O].hidden&&"hidden").attr("transform",(k,O)=>S(...A(Y[O].offset))).attr("dy",()=>{let k="0em";return v()?k="0.32em":e==="bottom"&&(k="0.71em"),k}).text(w),N.attr("transform",g(t,S)),a(N,C,T)})};return b.tickFormat=(...y)=>y.length?(i=y[0],b):i,b.tickSize=(...y)=>y.length?(s=l=Number(y[0]),b):s,b.tickSizeInner=(...y)=>y.length?(s=Number(y[0]),b):s,b.tickSizeOuter=(...y)=>y.length?(l=Number(y[0]),b):l,b.tickPadding=(...y)=>y.length?(u=y[0],b):u,b.decorate=(...y)=>y.length?(a=y[0],b):a,b.scale=(...y)=>y.length?(t=y[0],b):t,b.ticks=(...y)=>(n=[...y],b),b.tickArguments=(...y)=>y.length?(n=y[0]==null?[]:[...y[0]],b):n!==null?n.slice():null,b.tickValues=(...y)=>y.length?(o=y[0]==null?[]:[...y[0]],b):o!==null?o.slice():null,b.orient=()=>e,b};var bi=(e,t)=>{let r=!1,o=yi(e,t,{labelOffset:(i,l,s)=>{let u=0,c=o.tickSizeInner()+o.tickPadding(),m=!1;if(r){let f=t(i),d=l<s.length-1?t(s[l+1]):t.range()[1];u=(d-f)/2,c=o.tickPadding(),m=l===s.length-1&&f===d}return{offset:[u,c],hidden:m}}}),a=i=>o(i);return a.tickCenterLabel=(...i)=>i.length?(r=i[0],a):r,z(a,o),a},Rn=e=>bi("top",e),Fn=e=>bi("bottom",e),$n=e=>bi("left",e),mr=e=>bi("right",e);var vi=(e,t)=>{let r=null,n=(s,u,c)=>{if(t.step)return t.step();let m=t(s);return u<c.length-1?t(c[u+1])/m:(t.range()[1]-m)*2},i=yi(e,t,{labelOffset:()=>({offset:[0,i.tickPadding()]}),tickPath:(s,u,c)=>{let m=0;return r?m=r(s,u):m=n(s,u,c)/2,{path:[[m,0],[m,i.tickSizeInner()]],hidden:u===c.length-1}}}),l=s=>{i(s)};return l.tickOffset=(...s)=>s.length?(r=s[0],l):r,z(l,i),l},wi=e=>vi("top",e),Si=e=>vi("bottom",e),_i=e=>vi("left",e),Ai=e=>vi("right",e);var Qs="__d3fc-elements__",Zr=e=>e[Qs]||{},Ci=(e,t)=>void(e[Qs]=t),Fm=e=>delete e[Qs];var Z1=e=>e.tagName==="D3FC-GROUP"?[e,...e.querySelectorAll("d3fc-canvas, d3fc-group, d3fc-svg")]:[e],ev=e=>{let{width:t,height:r}=Zr(e),n=e.useDevicePixelRatio&&window.devicePixelRatio!=null?window.devicePixelRatio:1,o=e.clientWidth*n,a=e.clientHeight*n,i=o!==t||a!==r,l=e.children[0];Ci(e,{pixelRatio:n,width:o,height:a,resized:i,child:l})};if(typeof CustomEvent!="function")throw new Error("d3fc-element depends on CustomEvent. Make sure that you load a polyfill in older browsers. See README.");var tv=e=>{let t=Zr(e),r=new CustomEvent("measure",{detail:t});e.dispatchEvent(r)},rv=e=>{let t=Zr(e),r=new CustomEvent("draw",{detail:t});e.dispatchEvent(r)},Hm=e=>{let t=e.map(Z1).reduce((r,n)=>r.concat(n));t.forEach(ev),t.forEach(tv),t.forEach(rv)};var Wm=e=>Zr(e.ownerDocument).queue||[],nv=(e,t)=>{let{requestId:r}=Zr(e.ownerDocument);r==null&&(r=requestAnimationFrame(()=>{let n=Wm(e);Hm(n),ov(e)})),Ci(e.ownerDocument,{queue:t,requestId:r})},ov=e=>Fm(e.ownerDocument),Ym=(e,t)=>{let r=e;do if(r.parentNode===t)return!0;while(r=r.parentNode);return!1},Ho=e=>{let t=Wm(e);if(t.indexOf(e)>-1||t.some(a=>Ym(e,a)))return;let o=t.filter(a=>!Ym(a,e));o.push(e),nv(e,o)};if(typeof HTMLElement!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var av=e=>{e.__measureListener__==null&&(e.__measureListener__=t=>e.setMeasurements(t.detail),e.addEventListener("measure",e.__measureListener__))},iv=e=>{e.__measureListener__!=null&&(e.removeEventListener("measure",e.__measureListener__),e.__measureListener__=null)},Mi=(e,t)=>class extends HTMLElement{static get observedAttributes(){return["use-device-pixel-ratio"]}attributeChangedCallback(r){switch(r){case"use-device-pixel-ratio":this.requestRedraw();break}}connectedCallback(){this.childNodes.length===0&&this.appendChild(e()),av(this)}disconnectedCallback(){iv(this)}setMeasurements({width:r,height:n}){let{childNodes:[o,...a]}=this;if(a.length>0)throw new Error("A d3fc-svg/canvas element must only contain a single svg/canvas element.");t(this,o,{width:r,height:n})}get useDevicePixelRatio(){return this.hasAttribute("use-device-pixel-ratio")&&this.getAttribute("use-device-pixel-ratio")!=="false"}set useDevicePixelRatio(r){r&&!this.useDevicePixelRatio?this.setAttribute("use-device-pixel-ratio",""):!r&&this.useDevicePixelRatio&&this.removeAttribute("use-device-pixel-ratio"),this.requestRedraw()}requestRedraw(){Ho(this)}};var Ti=class extends Mi(()=>document.createElement("canvas"),(e,t,{width:r,height:n})=>{t.setAttribute("width",r),t.setAttribute("height",n),e.setWebglViewport&&t.getContext("webgl").viewport(0,0,r,n)}){get setWebglViewport(){return this.hasAttribute("set-webgl-viewport")&&this.getAttribute("set-webgl-viewport")!=="false"}set setWebglViewport(e){e&&!this.setWebglViewport?this.setAttribute("set-webgl-viewport",""):!e&&this.setWebglViewport&&this.removeAttribute("set-webgl-viewport"),this.requestRedraw()}};var Ks=e=>{e.autoResize?lv(e):qm(e)},lv=e=>{e.__autoResizeListener__==null&&(e.__autoResizeListener__=()=>Ho(e),addEventListener("resize",e.__autoResizeListener__))},qm=e=>{e.__autoResizeListener__!=null&&(removeEventListener("resize",e.__autoResizeListener__),e.__autoResizeListener__=null)},Vi=class extends HTMLElement{connectedCallback(){Ks(this)}disconnectedCallback(){qm(this)}requestRedraw(){Ho(this)}get autoResize(){return this.hasAttribute("auto-resize")&&this.getAttribute("auto-resize")!=="false"}set autoResize(e){e&&!this.autoResize?this.setAttribute("auto-resize",""):!e&&this.autoResize&&this.removeAttribute("auto-resize"),Ks(this)}static get observedAttributes(){return["auto-resize"]}attributeChangedCallback(e){switch(e){case"auto-resize":Ks(this);break}}};var Gm=Mi(()=>document.createElementNS("http://www.w3.org/2000/svg","svg"),(e,t,{width:r,height:n})=>{t.setAttribute("viewBox",`0 0 ${r} ${n}`)});var Um="d3fc-canvas,d3fc-svg{position:relative;display:block}d3fc-canvas>canvas,d3fc-svg>svg{position:absolute;height:100%;width:100%}d3fc-svg>svg{overflow:visible}",Yo=document.createElement("style");Yo.setAttribute("type","text/css");document.querySelector("head").appendChild(Yo);Yo.styleSheet?Yo.styleSheet.cssText+=Um:Yo.textContent+=Um;if(typeof customElements!="object"||typeof customElements.define!="function")throw new Error("d3fc-element depends on Custom Elements (v1). Make sure that you load a polyfill in older browsers. See README.");var Js=[],Zs=(e,t)=>{customElements.get(e)?Js.push(e):customElements.define(e,t)};Zs("d3fc-canvas",Ti);Zs("d3fc-group",Vi);Zs("d3fc-svg",Gm);Js.length>0&&console.warn(`The d3fc components "${Js.join(", ")}" is/are already registered on window. Be aware that this can create compatibility issues if different versions are used.`);var sv={value:()=>{}};function jm(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new ki(r)}function ki(e){this._=e}function uv(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}ki.prototype=jm.prototype={constructor:ki,on:function(e,t){var r=this._,n=uv(e+"",r),o,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((o=(e=n[a]).type)&&(o=cv(r[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=n[a]).type)r[o]=Xm(r[o],e.name,t);else if(t==null)for(o in r)r[o]=Xm(r[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new ki(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,a;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,o=a.length;n<o;++n)a[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,a=n.length;o<a;++o)n[o].value.apply(t,r)}};function cv(e,t){for(var r=0,n=e.length,o;r<n;++r)if((o=e[r]).name===t)return o.value}function Xm(e,t,r){for(var n=0,o=e.length;n<o;++n)if(e[n].name===t){e[n]=sv,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var Wt=jm;var eu=()=>{let e=Wt("point");function t(o){let a=We(o);e.call("point",this,[{x:a[0],y:a[1]}])}function r(){e.call("point",this,[])}let n=o=>{o.on("mouseenter.pointer",t).on("mousemove.pointer",t).on("mouseleave.pointer",r)};return H(n,e,"on"),n};var tu=(...e)=>{let t={},r=n=>{for(let o of Object.keys(t))n[o].apply(null,t[o]);return n};for(let n of e)r[n]=(...o)=>o.length?(t[n]=o,r):t[n];return r};var Qm=`d3fc-group.cartesian-chart{width:100%;height:100%;overflow:hidden;display:grid;display:-ms-grid;grid-template-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-columns:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);grid-template-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);-ms-grid-rows:minmax(1em,max-content) auto 1fr auto minmax(1em,max-content);}
d3fc-group.cartesian-chart>.top-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:1;-ms-grid-row:1;}
d3fc-group.cartesian-chart>.top-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:2;-ms-grid-row:2;}
d3fc-group.cartesian-chart>.left-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:1;-ms-grid-column:1;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.left-axis{width:3em;grid-column:2;-ms-grid-column:2;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.plot-area{overflow:hidden;grid-column:3;-ms-grid-column:3;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-axis{width:3em;grid-column:4;-ms-grid-column:4;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.right-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:5;-ms-grid-column:5;grid-row:3;-ms-grid-row:3;}
d3fc-group.cartesian-chart>.bottom-axis{height:2em;grid-column:3;-ms-grid-column:3;grid-row:4;-ms-grid-row:4;}
d3fc-group.cartesian-chart>.bottom-label{align-self:center;-ms-grid-column-align:center;justify-self:center;-ms-grid-row-align:center;grid-column:3;-ms-grid-column:3;grid-row:5;-ms-grid-row:5;}
d3fc-group.cartesian-chart>.y-label{display:flex;transform:rotate(-90deg);width:1em;white-space:nowrap;justify-content:center;}`,Wo=document.createElement("style");Wo.setAttribute("type","text/css");document.querySelector("head").appendChild(Wo);Wo.styleSheet?Wo.styleSheet.cssText+=Qm:Wo.textContent+=Qm;var Xe=e=>typeof e=="function"?e:()=>e,qo=(...e)=>{let{xScale:t,yScale:r,xAxis:n,yAxis:o}=fv(...e),a=Xe(""),i=Xe(""),l=Xe(""),s=Xe(null),u=Xe(null),c=Xe("right"),m=Xe("bottom"),f=null,d=null,p=null,h=!1,x=!0,g=tu("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),S=()=>{},_=tu("tickFormat","ticks","tickArguments","tickSize","tickSizeInner","tickSizeOuter","tickValues","tickPadding","tickCenterLabel"),v=()=>{},b=()=>{},y=U("d3fc-group","cartesian-chart"),C=U("d3fc-canvas","webgl-plot-area"),T=U("d3fc-canvas","canvas-plot-area"),R=U("d3fc-svg","svg-plot-area"),F=U("d3fc-svg","x-axis").key(M=>M),E=U("d3fc-svg","y-axis").key(M=>M),W=U("div","chart-label"),P=U("div","x-label").key(M=>M),w=U("div","y-label").key(M=>M),B=M=>D=>oe(M)?D.transition(M):D,A=M=>{let D=B(M);M.each((N,Y,q)=>{let k=y(L(q[Y]),[N]);k.enter().attr("auto-resize",""),W(k,[m(N)]).attr("class",O=>O==="top"?"chart-label bottom-label":"chart-label top-label").style("margin-bottom",O=>O==="top"?0:"1em").style("margin-top",O=>O==="top"?"1em":0).text(a(N)),P(k,[m(N)]).attr("class",O=>`x-label ${O}-label`).text(i(N)),w(k,[c(N)]).attr("class",O=>`y-label ${O}-label`).text(l(N)),C(k,f?[N]:[]).attr("set-webgl-viewport","").classed("plot-area",!0).attr("use-device-pixel-ratio",x).on("draw",(O,G)=>{let{child:X,pixelRatio:J}=O.detail;f.context(h?null:X.getContext("webgl")).pixelRatio(J).xScale(t).yScale(r),f(G)}),k.select(".webgl-plot-area>canvas").on("webglcontextlost",O=>{console.warn("WebGLRenderingContext lost"),O.preventDefault(),h=!0,k.node().requestRedraw()}).on("webglcontextrestored",()=>{console.info("WebGLRenderingContext restored"),h=!1,k.node().requestRedraw()}),T(k,d?[N]:[]).classed("plot-area",!0).attr("use-device-pixel-ratio",x).on("draw",(O,G)=>{let{child:X,pixelRatio:J}=O.detail,ue=X.getContext("2d");ue.save(),x&&ue.scale(J,J),d.context(ue).xScale(t).yScale(r),d(G),ue.restore()}),R(k,p?[N]:[]).classed("plot-area",!0).on("draw",(O,G)=>{let{child:X}=O.detail;p.xScale(t).yScale(r),D(L(X).datum(G)).call(p)}),F(k,[m(N)]).attr("class",O=>`x-axis ${O}-axis`).style("height",s(N)).on("measure",(O,G)=>{let{width:X,height:J,child:ue}=O.detail;G==="top"&&L(ue).attr("viewBox",`0 ${-J} ${X} ${J}`),t.range([0,X])}).on("draw",(O,G)=>{let{child:X}=O.detail,J=G==="top"?n.top(t):n.bottom(t);J.decorate(S),D(L(X).datum(G)).call(g(J))}),E(k,[c(N)]).attr("class",O=>`y-axis ${O}-axis`).style("width",u(N)).on("measure",(O,G)=>{let{width:X,height:J,child:ue}=O.detail;G==="left"&&L(ue).attr("viewBox",`${-X} 0 ${X} ${J}`),r.range([J,0])}).on("draw",(O,G)=>{let{child:X}=O.detail,J=G==="left"?o.left(r):o.right(r);J.decorate(v),D(L(X).datum(G)).call(_(J))}),k.each((O,G,X)=>X[G].requestRedraw()),b(k,N,Y)})},V=Q(/range\w*/,/tickFormat/);return z(A,t,V,$e("x")),z(A,r,V,$e("y")),z(A,g,$e("x")),z(A,_,$e("y")),A.xOrient=(...M)=>M.length?(m=Xe(M[0]),A):m,A.yOrient=(...M)=>M.length?(c=Xe(M[0]),A):c,A.xDecorate=(...M)=>M.length?(S=M[0],A):S,A.yDecorate=(...M)=>M.length?(v=M[0],A):v,A.chartLabel=(...M)=>M.length?(a=Xe(M[0]),A):a,A.xLabel=(...M)=>M.length?(i=Xe(M[0]),A):i,A.yLabel=(...M)=>M.length?(l=Xe(M[0]),A):l,A.xAxisHeight=(...M)=>M.length?(s=Xe(M[0]),A):s,A.yAxisWidth=(...M)=>M.length?(u=Xe(M[0]),A):u,A.webglPlotArea=(...M)=>M.length?(f=M[0],A):f,A.canvasPlotArea=(...M)=>M.length?(d=M[0],A):d,A.svgPlotArea=(...M)=>M.length?(p=M[0],A):p,A.decorate=(...M)=>M.length?(b=M[0],A):b,A.useDevicePixelRatio=(...M)=>M.length?(x=M[0],A):x,A},fv=(...e)=>{let t={xScale:pe(),yScale:pe(),xAxis:{bottom:Fn,top:Rn},yAxis:{right:mr,left:$n}};return e.length===1&&!e[0].domain&&!e[0].range?Object.assign(t,e[0]):Object.assign(t,{xScale:e[0]||t.xScale,yScale:e[1]||t.yScale})};var Km=e=>typeof e=="function"?e:()=>e,Di=(e,t)=>(...r)=>{let n=Km(""),o=t,a=()=>{},i=qo(...r),l=s=>{e(i,o),i.decorate((u,c,m)=>{u.enter().select(".x-label").style("height","1em").style("line-height","1em");let f=i.yOrient()(c);u.enter().append("div").attr("class","y-label-container").style("grid-column",f==="left"?1:5).style("-ms-grid-column",f==="left"?1:5).style("grid-row",3).style("-ms-grid-row",3).style("width","1em").style("display","flex").style("align-items","center").style("justify-content","center").style("white-space","nowrap").append("div").attr("class","y-label").style("transform","rotate(-90deg)"),u.select(".y-label-container>.y-label").text(n),a(u,c,m)}),s.call(i)};return z(l,i,Lr(/^x/,/^y/,"chartLabel")),l.yLabel=(...s)=>s.length?(n=Km(s[0]),l):n,l.plotArea=(...s)=>s.length?(o=s[0],l):o,l.decorate=(...s)=>s.length?(a=s[0],l):a,l};var mv=Di((e,t)=>e.svgPlotArea(t),jr);var dv=Di((e,t)=>e.canvasPlotArea(t),Ln);var Jm={passive:!1},en={capture:!0,passive:!1};function Ni(e){e.stopImmediatePropagation()}function dr(e){e.preventDefault(),e.stopImmediatePropagation()}function Go(e){var t=e.document.documentElement,r=L(e).on("dragstart.drag",dr,en);"onselectstart"in t?r.on("selectstart.drag",dr,en):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Uo(e,t){var r=e.document.documentElement,n=L(e).on("dragstart.drag",null);t&&(n.on("click.drag",dr,en),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in r?n.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect)}var Xo=e=>()=>e;function jo(e,{sourceEvent:t,subject:r,target:n,identifier:o,active:a,x:i,y:l,dx:s,dy:u,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:s,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:c}})}jo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function pv(e){return!e.ctrlKey&&!e.button}function hv(){return this.parentNode}function gv(e,t){return t??{x:e.x,y:e.y}}function xv(){return navigator.maxTouchPoints||"ontouchstart"in this}function Hn(){var e=pv,t=hv,r=gv,n=xv,o={},a=Wt("start","drag","end"),i=0,l,s,u,c,m=0;function f(v){v.on("mousedown.drag",d).filter(n).on("touchstart.drag",x).on("touchmove.drag",g,Jm).on("touchend.drag touchcancel.drag",S).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(v,b){if(!(c||!e.call(this,v,b))){var y=_(this,t.call(this,v,b),v,b,"mouse");!y||(L(v.view).on("mousemove.drag",p,en).on("mouseup.drag",h,en),Go(v.view),Ni(v),u=!1,l=v.clientX,s=v.clientY,y("start",v))}}function p(v){if(dr(v),!u){var b=v.clientX-l,y=v.clientY-s;u=b*b+y*y>m}o.mouse("drag",v)}function h(v){L(v.view).on("mousemove.drag mouseup.drag",null),Uo(v.view,u),dr(v),o.mouse("end",v)}function x(v,b){if(!!e.call(this,v,b)){var y=v.changedTouches,C=t.call(this,v,b),T=y.length,R,F;for(R=0;R<T;++R)(F=_(this,C,v,b,y[R].identifier,y[R]))&&(Ni(v),F("start",v,y[R]))}}function g(v){var b=v.changedTouches,y=b.length,C,T;for(C=0;C<y;++C)(T=o[b[C].identifier])&&(dr(v),T("drag",v,b[C]))}function S(v){var b=v.changedTouches,y=b.length,C,T;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),C=0;C<y;++C)(T=o[b[C].identifier])&&(Ni(v),T("end",v,b[C]))}function _(v,b,y,C,T,R){var F=a.copy(),E=We(R||y,b),W,P,w;if((w=r.call(v,new jo("beforestart",{sourceEvent:y,target:f,identifier:T,active:i,x:E[0],y:E[1],dx:0,dy:0,dispatch:F}),C))!=null)return W=w.x-E[0]||0,P=w.y-E[1]||0,function B(A,V,M){var D=E,N;switch(A){case"start":o[T]=B,N=i++;break;case"end":delete o[T],--i;case"drag":E=We(M||V,b),N=i;break}F.call(A,v,new jo(A,{sourceEvent:V,subject:w,target:f,identifier:T,active:N,x:E[0]+W,y:E[1]+P,dx:E[0]-D[0],dy:E[1]-D[1],dispatch:F}),C)}}return f.filter=function(v){return arguments.length?(e=typeof v=="function"?v:Xo(!!v),f):e},f.container=function(v){return arguments.length?(t=typeof v=="function"?v:Xo(v),f):t},f.subject=function(v){return arguments.length?(r=typeof v=="function"?v:Xo(v),f):r},f.touchable=function(v){return arguments.length?(n=typeof v=="function"?v:Xo(!!v),f):n},f.on=function(){var v=a.on.apply(a,arguments);return v===a?f:v},f.clickDistance=function(v){return arguments.length?(m=(v=+v)*v,f):Math.sqrt(m)},f}var Yn=0,Ko=0,Qo=0,ed=1e3,Ei,Jo,Pi=0,tn=0,Li=0,Zo=typeof performance=="object"&&performance.now?performance:Date,td=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ta(){return tn||(td(yv),tn=Zo.now()+Li)}function yv(){tn=0}function ea(){this._call=this._time=this._next=null}ea.prototype=zi.prototype={constructor:ea,restart:function(e,t,r){if(typeof e!="function")throw new TypeError("callback is not a function");r=(r==null?ta():+r)+(t==null?0:+t),!this._next&&Jo!==this&&(Jo?Jo._next=this:Ei=this,Jo=this),this._call=e,this._time=r,ru()},stop:function(){this._call&&(this._call=null,this._time=1/0,ru())}};function zi(e,t,r){var n=new ea;return n.restart(e,t,r),n}function rd(){ta(),++Yn;for(var e=Ei,t;e;)(t=tn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Yn}function Zm(){tn=(Pi=Zo.now())+Li,Yn=Ko=0;try{rd()}finally{Yn=0,vv(),tn=0}}function bv(){var e=Zo.now(),t=e-Pi;t>ed&&(Li-=t,Pi=e)}function vv(){for(var e,t=Ei,r,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(r=t._next,t._next=null,t=e?e._next=r:Ei=r);Jo=e,ru(n)}function ru(e){if(!Yn){Ko&&(Ko=clearTimeout(Ko));var t=e-tn;t>24?(e<1/0&&(Ko=setTimeout(Zm,e-Zo.now()-Li)),Qo&&(Qo=clearInterval(Qo))):(Qo||(Pi=Zo.now(),Qo=setInterval(bv,ed)),Yn=1,td(Zm))}}function Bi(e,t,r){var n=new ea;return t=t==null?0:+t,n.restart(o=>{n.stop(),e(o+t)},t,r),n}var wv=Wt("start","end","cancel","interrupt"),Sv=[],ad=0,nd=1,Ii=2,Oi=3,od=4,Ri=5,ra=6;function pr(e,t,r,n,o,a){var i=e.__transition;if(!i)e.__transition={};else if(r in i)return;_v(e,r,{name:t,index:n,group:o,on:wv,tween:Sv,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ad})}function na(e,t){var r=ye(e,t);if(r.state>ad)throw new Error("too late; already scheduled");return r}function Me(e,t){var r=ye(e,t);if(r.state>Oi)throw new Error("too late; already running");return r}function ye(e,t){var r=e.__transition;if(!r||!(r=r[t]))throw new Error("transition not found");return r}function _v(e,t,r){var n=e.__transition,o;n[t]=r,r.timer=zi(a,0,r.time);function a(u){r.state=nd,r.timer.restart(i,r.delay,r.time),r.delay<=u&&i(u-r.delay)}function i(u){var c,m,f,d;if(r.state!==nd)return s();for(c in n)if(d=n[c],d.name===r.name){if(d.state===Oi)return Bi(i);d.state===od?(d.state=ra,d.timer.stop(),d.on.call("interrupt",e,e.__data__,d.index,d.group),delete n[c]):+c<t&&(d.state=ra,d.timer.stop(),d.on.call("cancel",e,e.__data__,d.index,d.group),delete n[c])}if(Bi(function(){r.state===Oi&&(r.state=od,r.timer.restart(l,r.delay,r.time),l(u))}),r.state=Ii,r.on.call("start",e,e.__data__,r.index,r.group),r.state===Ii){for(r.state=Oi,o=new Array(f=r.tween.length),c=0,m=-1;c<f;++c)(d=r.tween[c].value.call(e,e.__data__,r.index,r.group))&&(o[++m]=d);o.length=m+1}}function l(u){for(var c=u<r.duration?r.ease.call(null,u/r.duration):(r.timer.restart(s),r.state=Ri,1),m=-1,f=o.length;++m<f;)o[m].call(e,c);r.state===Ri&&(r.on.call("end",e,e.__data__,r.index,r.group),s())}function s(){r.state=ra,r.timer.stop(),delete n[t];for(var u in n)return;delete e.__transition}}function hr(e,t){var r=e.__transition,n,o,a=!0,i;if(!!r){t=t==null?null:t+"";for(i in r){if((n=r[i]).name!==t){a=!1;continue}o=n.state>Ii&&n.state<Ri,n.state=ra,n.timer.stop(),n.on.call(o?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete r[i]}a&&delete e.__transition}}function id(e){return this.each(function(){hr(this,e)})}function Av(e,t){var r,n;return function(){var o=Me(this,e),a=o.tween;if(a!==r){n=r=a;for(var i=0,l=n.length;i<l;++i)if(n[i].name===t){n=n.slice(),n.splice(i,1);break}}o.tween=n}}function Cv(e,t,r){var n,o;if(typeof r!="function")throw new Error;return function(){var a=Me(this,e),i=a.tween;if(i!==n){o=(n=i).slice();for(var l={name:t,value:r},s=0,u=o.length;s<u;++s)if(o[s].name===t){o[s]=l;break}s===u&&o.push(l)}a.tween=o}}function ld(e,t){var r=this._id;if(e+="",arguments.length<2){for(var n=ye(this.node(),r).tween,o=0,a=n.length,i;o<a;++o)if((i=n[o]).name===e)return i.value;return null}return this.each((t==null?Av:Cv)(r,e,t))}function Wn(e,t,r){var n=e._id;return e.each(function(){var o=Me(this,n);(o.value||(o.value={}))[t]=r.apply(this,arguments)}),function(o){return ye(o,n).value[t]}}function Fi(e,t){var r;return(typeof t=="number"?_e:t instanceof Te?Or:(r=Te(t))?(t=r,Or):yo)(e,t)}function Mv(e){return function(){this.removeAttribute(e)}}function Tv(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vv(e,t,r){var n,o=r+"",a;return function(){var i=this.getAttribute(e);return i===o?null:i===n?a:a=t(n=i,r)}}function kv(e,t,r){var n,o=r+"",a;return function(){var i=this.getAttributeNS(e.space,e.local);return i===o?null:i===n?a:a=t(n=i,r)}}function Dv(e,t,r){var n,o,a;return function(){var i,l=r(this),s;return l==null?void this.removeAttribute(e):(i=this.getAttribute(e),s=l+"",i===s?null:i===n&&s===o?a:(o=s,a=t(n=i,l)))}}function Nv(e,t,r){var n,o,a;return function(){var i,l=r(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),s=l+"",i===s?null:i===n&&s===o?a:(o=s,a=t(n=i,l)))}}function sd(e,t){var r=Ht(e),n=r==="transform"?ns:Fi;return this.attrTween(e,typeof t=="function"?(r.local?Nv:Dv)(r,n,Wn(this,"attr."+e,t)):t==null?(r.local?Tv:Mv)(r):(r.local?kv:Vv)(r,n,t))}function Ev(e,t){return function(r){this.setAttribute(e,t.call(this,r))}}function Pv(e,t){return function(r){this.setAttributeNS(e.space,e.local,t.call(this,r))}}function Lv(e,t){var r,n;function o(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&Pv(e,a)),r}return o._value=t,o}function zv(e,t){var r,n;function o(){var a=t.apply(this,arguments);return a!==n&&(r=(n=a)&&Ev(e,a)),r}return o._value=t,o}function ud(e,t){var r="attr."+e;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;var n=Ht(e);return this.tween(r,(n.local?Lv:zv)(n,t))}function Bv(e,t){return function(){na(this,e).delay=+t.apply(this,arguments)}}function Ov(e,t){return t=+t,function(){na(this,e).delay=t}}function cd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Bv:Ov)(t,e)):ye(this.node(),t).delay}function Iv(e,t){return function(){Me(this,e).duration=+t.apply(this,arguments)}}function Rv(e,t){return t=+t,function(){Me(this,e).duration=t}}function fd(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Iv:Rv)(t,e)):ye(this.node(),t).duration}function Fv(e,t){if(typeof t!="function")throw new Error;return function(){Me(this,e).ease=t}}function md(e){var t=this._id;return arguments.length?this.each(Fv(t,e)):ye(this.node(),t).ease}function $v(e,t){return function(){var r=t.apply(this,arguments);if(typeof r!="function")throw new Error;Me(this,e).ease=r}}function dd(e){if(typeof e!="function")throw new Error;return this.each($v(this._id,e))}function pd(e){typeof e!="function"&&(e=Lo(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=[],s,u=0;u<i;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new Oe(n,this._parents,this._name,this._id)}function hd(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,r=e._groups,n=t.length,o=r.length,a=Math.min(n,o),i=new Array(n),l=0;l<a;++l)for(var s=t[l],u=r[l],c=s.length,m=i[l]=new Array(c),f,d=0;d<c;++d)(f=s[d]||u[d])&&(m[d]=f);for(;l<n;++l)i[l]=t[l];return new Oe(i,this._parents,this._name,this._id)}function Hv(e){return(e+"").trim().split(/^|\s+/).every(function(t){var r=t.indexOf(".");return r>=0&&(t=t.slice(0,r)),!t||t==="start"})}function Yv(e,t,r){var n,o,a=Hv(t)?na:Me;return function(){var i=a(this,e),l=i.on;l!==n&&(o=(n=l).copy()).on(t,r),i.on=o}}function gd(e,t){var r=this._id;return arguments.length<2?ye(this.node(),r).on.on(e):this.each(Yv(r,e,t))}function Wv(e){return function(){var t=this.parentNode;for(var r in this.__transition)if(+r!==e)return;t&&t.removeChild(this)}}function xd(){return this.on("end.remove",Wv(this._id))}function yd(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Xr(e));for(var n=this._groups,o=n.length,a=new Array(o),i=0;i<o;++i)for(var l=n[i],s=l.length,u=a[i]=new Array(s),c,m,f=0;f<s;++f)(c=l[f])&&(m=e.call(c,c.__data__,f,l))&&("__data__"in c&&(m.__data__=c.__data__),u[f]=m,pr(u[f],t,r,f,u,ye(c,r)));return new Oe(a,this._parents,t,r)}function bd(e){var t=this._name,r=this._id;typeof e!="function"&&(e=Po(e));for(var n=this._groups,o=n.length,a=[],i=[],l=0;l<o;++l)for(var s=n[l],u=s.length,c,m=0;m<u;++m)if(c=s[m]){for(var f=e.call(c,c.__data__,m,s),d,p=ye(c,r),h=0,x=f.length;h<x;++h)(d=f[h])&&pr(d,t,r,h,f,p);a.push(f),i.push(c)}return new Oe(a,i,t,r)}var qv=yt.prototype.constructor;function vd(){return new qv(this._groups,this._parents)}function Gv(e,t){var r,n,o;return function(){var a=nr(this,e),i=(this.style.removeProperty(e),nr(this,e));return a===i?null:a===r&&i===n?o:o=t(r=a,n=i)}}function wd(e){return function(){this.style.removeProperty(e)}}function Uv(e,t,r){var n,o=r+"",a;return function(){var i=nr(this,e);return i===o?null:i===n?a:a=t(n=i,r)}}function Xv(e,t,r){var n,o,a;return function(){var i=nr(this,e),l=r(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),nr(this,e))),i===s?null:i===n&&s===o?a:(o=s,a=t(n=i,l))}}function jv(e,t){var r,n,o,a="style."+t,i="end."+a,l;return function(){var s=Me(this,e),u=s.on,c=s.value[a]==null?l||(l=wd(t)):void 0;(u!==r||o!==c)&&(n=(r=u).copy()).on(i,o=c),s.on=n}}function Sd(e,t,r){var n=(e+="")=="transform"?rs:Fi;return t==null?this.styleTween(e,Gv(e,n)).on("end.style."+e,wd(e)):typeof t=="function"?this.styleTween(e,Xv(e,n,Wn(this,"style."+e,t))).each(jv(this._id,e)):this.styleTween(e,Uv(e,n,t),r).on("end.style."+e,null)}function Qv(e,t,r){return function(n){this.style.setProperty(e,t.call(this,n),r)}}function Kv(e,t,r){var n,o;function a(){var i=t.apply(this,arguments);return i!==o&&(n=(o=i)&&Qv(e,i,r)),n}return a._value=t,a}function _d(e,t,r){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;return this.tween(n,Kv(e,t,r??""))}function Jv(e){return function(){this.textContent=e}}function Zv(e){return function(){var t=e(this);this.textContent=t??""}}function Ad(e){return this.tween("text",typeof e=="function"?Zv(Wn(this,"text",e)):Jv(e==null?"":e+""))}function ew(e){return function(t){this.textContent=e.call(this,t)}}function tw(e){var t,r;function n(){var o=e.apply(this,arguments);return o!==r&&(t=(r=o)&&ew(o)),t}return n._value=e,n}function Cd(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,tw(e))}function Md(){for(var e=this._name,t=this._id,r=$i(),n=this._groups,o=n.length,a=0;a<o;++a)for(var i=n[a],l=i.length,s,u=0;u<l;++u)if(s=i[u]){var c=ye(s,t);pr(s,e,r,u,i,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Oe(n,this._parents,e,r)}function Td(){var e,t,r=this,n=r._id,o=r.size();return new Promise(function(a,i){var l={value:i},s={value:function(){--o===0&&a()}};r.each(function(){var u=Me(this,n),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(s)),u.on=t}),o===0&&a()})}var rw=0;function Oe(e,t,r,n){this._groups=e,this._parents=t,this._name=r,this._id=n}function Vd(e){return yt().transition(e)}function $i(){return++rw}var qt=yt.prototype;Oe.prototype=Vd.prototype={constructor:Oe,select:yd,selectAll:bd,selectChild:qt.selectChild,selectChildren:qt.selectChildren,filter:pd,merge:hd,selection:vd,transition:Md,call:qt.call,nodes:qt.nodes,node:qt.node,size:qt.size,empty:qt.empty,each:qt.each,on:gd,attr:sd,attrTween:ud,style:Sd,styleTween:_d,text:Ad,textTween:Cd,remove:xd,tween:ld,delay:cd,duration:fd,ease:md,easeVarying:dd,end:Td,[Symbol.iterator]:qt[Symbol.iterator]};function Hi(e){return--e*e*e+1}function Yi(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var nw={time:null,delay:0,duration:250,ease:Yi};function ow(e,t){for(var r;!(r=e.__transition)||!(r=r[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return r}function kd(e){var t,r;e instanceof Oe?(t=e._id,e=e._name):(t=$i(),(r=nw).time=ta(),e=e==null?null:e+"");for(var n=this._groups,o=n.length,a=0;a<o;++a)for(var i=n[a],l=i.length,s,u=0;u<l;++u)(s=i[u])&&pr(s,e,t,u,i,r||ow(s,t));return new Oe(n,this._parents,e,t)}yt.prototype.interrupt=id;yt.prototype.transition=kd;var{abs:AY,max:CY,min:MY}=Math;function Dd(e){return[+e[0],+e[1]]}function aw(e){return[Dd(e[0]),Dd(e[1])]}var TY={name:"x",handles:["w","e"].map(nu),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},VY={name:"y",handles:["n","s"].map(nu),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},kY={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(nu),input:function(e){return e==null?null:aw(e)},output:function(e){return e}};function nu(e){return{type:e}}var oa=e=>()=>e;function ou(e,{sourceEvent:t,target:r,transform:n,dispatch:o}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:o}})}function St(e,t,r){this.k=e,this.x=t,this.y=r}St.prototype={constructor:St,scale:function(e){return e===1?this:new St(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new St(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Pt=new St(1,0,0);au.prototype=St.prototype;function au(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Pt;return e.__zoom}function Wi(e){e.stopImmediatePropagation()}function qn(e){e.preventDefault(),e.stopImmediatePropagation()}function uw(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function cw(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function Nd(){return this.__zoom||Pt}function fw(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function mw(){return navigator.maxTouchPoints||"ontouchstart"in this}function dw(e,t,r){var n=e.invertX(t[0][0])-r[0][0],o=e.invertX(t[1][0])-r[1][0],a=e.invertY(t[0][1])-r[0][1],i=e.invertY(t[1][1])-r[1][1];return e.translate(o>n?(n+o)/2:Math.min(0,n)||Math.max(0,o),i>a?(a+i)/2:Math.min(0,a)||Math.max(0,i))}function qi(){var e=uw,t=cw,r=dw,n=fw,o=mw,a=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],l=250,s=os,u=Wt("start","zoom","end"),c,m,f,d=500,p=150,h=0,x=10;function g(w){w.property("__zoom",Nd).on("wheel.zoom",T,{passive:!1}).on("mousedown.zoom",R).on("dblclick.zoom",F).filter(o).on("touchstart.zoom",E).on("touchmove.zoom",W).on("touchend.zoom touchcancel.zoom",P).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}g.transform=function(w,B,A,V){var M=w.selection?w.selection():w;M.property("__zoom",Nd),w!==M?b(w,B,A,V):M.interrupt().each(function(){y(this,arguments).event(V).start().zoom(null,typeof B=="function"?B.apply(this,arguments):B).end()})},g.scaleBy=function(w,B,A,V){g.scaleTo(w,function(){var M=this.__zoom.k,D=typeof B=="function"?B.apply(this,arguments):B;return M*D},A,V)},g.scaleTo=function(w,B,A,V){g.transform(w,function(){var M=t.apply(this,arguments),D=this.__zoom,N=A==null?v(M):typeof A=="function"?A.apply(this,arguments):A,Y=D.invert(N),q=typeof B=="function"?B.apply(this,arguments):B;return r(_(S(D,q),N,Y),M,i)},A,V)},g.translateBy=function(w,B,A,V){g.transform(w,function(){return r(this.__zoom.translate(typeof B=="function"?B.apply(this,arguments):B,typeof A=="function"?A.apply(this,arguments):A),t.apply(this,arguments),i)},null,V)},g.translateTo=function(w,B,A,V,M){g.transform(w,function(){var D=t.apply(this,arguments),N=this.__zoom,Y=V==null?v(D):typeof V=="function"?V.apply(this,arguments):V;return r(Pt.translate(Y[0],Y[1]).scale(N.k).translate(typeof B=="function"?-B.apply(this,arguments):-B,typeof A=="function"?-A.apply(this,arguments):-A),D,i)},V,M)};function S(w,B){return B=Math.max(a[0],Math.min(a[1],B)),B===w.k?w:new St(B,w.x,w.y)}function _(w,B,A){var V=B[0]-A[0]*w.k,M=B[1]-A[1]*w.k;return V===w.x&&M===w.y?w:new St(w.k,V,M)}function v(w){return[(+w[0][0]+ +w[1][0])/2,(+w[0][1]+ +w[1][1])/2]}function b(w,B,A,V){w.on("start.zoom",function(){y(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){y(this,arguments).event(V).end()}).tween("zoom",function(){var M=this,D=arguments,N=y(M,D).event(V),Y=t.apply(M,D),q=A==null?v(Y):typeof A=="function"?A.apply(M,D):A,k=Math.max(Y[1][0]-Y[0][0],Y[1][1]-Y[0][1]),O=M.__zoom,G=typeof B=="function"?B.apply(M,D):B,X=s(O.invert(q).concat(k/O.k),G.invert(q).concat(k/G.k));return function(J){if(J===1)J=G;else{var ue=X(J),$=k/ue[2];J=new St($,q[0]-ue[0]*$,q[1]-ue[1]*$)}N.zoom(null,J)}})}function y(w,B,A){return!A&&w.__zooming||new C(w,B)}function C(w,B){this.that=w,this.args=B,this.active=0,this.sourceEvent=null,this.extent=t.apply(w,B),this.taps=0}C.prototype={event:function(w){return w&&(this.sourceEvent=w),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(w,B){return this.mouse&&w!=="mouse"&&(this.mouse[1]=B.invert(this.mouse[0])),this.touch0&&w!=="touch"&&(this.touch0[1]=B.invert(this.touch0[0])),this.touch1&&w!=="touch"&&(this.touch1[1]=B.invert(this.touch1[0])),this.that.__zoom=B,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(w){var B=L(this.that).datum();u.call(w,this.that,new ou(w,{sourceEvent:this.sourceEvent,target:g,type:w,transform:this.that.__zoom,dispatch:u}),B)}};function T(w,...B){if(!e.apply(this,arguments))return;var A=y(this,B).event(w),V=this.__zoom,M=Math.max(a[0],Math.min(a[1],V.k*Math.pow(2,n.apply(this,arguments)))),D=We(w);if(A.wheel)(A.mouse[0][0]!==D[0]||A.mouse[0][1]!==D[1])&&(A.mouse[1]=V.invert(A.mouse[0]=D)),clearTimeout(A.wheel);else{if(V.k===M)return;A.mouse=[D,V.invert(D)],hr(this),A.start()}qn(w),A.wheel=setTimeout(N,p),A.zoom("mouse",r(_(S(V,M),A.mouse[0],A.mouse[1]),A.extent,i));function N(){A.wheel=null,A.end()}}function R(w,...B){if(f||!e.apply(this,arguments))return;var A=w.currentTarget,V=y(this,B,!0).event(w),M=L(w.view).on("mousemove.zoom",q,!0).on("mouseup.zoom",k,!0),D=We(w,A),N=w.clientX,Y=w.clientY;Go(w.view),Wi(w),V.mouse=[D,this.__zoom.invert(D)],hr(this),V.start();function q(O){if(qn(O),!V.moved){var G=O.clientX-N,X=O.clientY-Y;V.moved=G*G+X*X>h}V.event(O).zoom("mouse",r(_(V.that.__zoom,V.mouse[0]=We(O,A),V.mouse[1]),V.extent,i))}function k(O){M.on("mousemove.zoom mouseup.zoom",null),Uo(O.view,V.moved),qn(O),V.event(O).end()}}function F(w,...B){if(!!e.apply(this,arguments)){var A=this.__zoom,V=We(w.changedTouches?w.changedTouches[0]:w,this),M=A.invert(V),D=A.k*(w.shiftKey?.5:2),N=r(_(S(A,D),V,M),t.apply(this,B),i);qn(w),l>0?L(this).transition().duration(l).call(b,N,V,w):L(this).call(g.transform,N,V,w)}}function E(w,...B){if(!!e.apply(this,arguments)){var A=w.touches,V=A.length,M=y(this,B,w.changedTouches.length===V).event(w),D,N,Y,q;for(Wi(w),N=0;N<V;++N)Y=A[N],q=We(Y,this),q=[q,this.__zoom.invert(q),Y.identifier],M.touch0?!M.touch1&&M.touch0[2]!==q[2]&&(M.touch1=q,M.taps=0):(M.touch0=q,D=!0,M.taps=1+!!c);c&&(c=clearTimeout(c)),D&&(M.taps<2&&(m=q[0],c=setTimeout(function(){c=null},d)),hr(this),M.start())}}function W(w,...B){if(!!this.__zooming){var A=y(this,B).event(w),V=w.changedTouches,M=V.length,D,N,Y,q;for(qn(w),D=0;D<M;++D)N=V[D],Y=We(N,this),A.touch0&&A.touch0[2]===N.identifier?A.touch0[0]=Y:A.touch1&&A.touch1[2]===N.identifier&&(A.touch1[0]=Y);if(N=A.that.__zoom,A.touch1){var k=A.touch0[0],O=A.touch0[1],G=A.touch1[0],X=A.touch1[1],J=(J=G[0]-k[0])*J+(J=G[1]-k[1])*J,ue=(ue=X[0]-O[0])*ue+(ue=X[1]-O[1])*ue;N=S(N,Math.sqrt(J/ue)),Y=[(k[0]+G[0])/2,(k[1]+G[1])/2],q=[(O[0]+X[0])/2,(O[1]+X[1])/2]}else if(A.touch0)Y=A.touch0[0],q=A.touch0[1];else return;A.zoom("touch",r(_(N,Y,q),A.extent,i))}}function P(w,...B){if(!!this.__zooming){var A=y(this,B).event(w),V=w.changedTouches,M=V.length,D,N;for(Wi(w),f&&clearTimeout(f),f=setTimeout(function(){f=null},d),D=0;D<M;++D)N=V[D],A.touch0&&A.touch0[2]===N.identifier?delete A.touch0:A.touch1&&A.touch1[2]===N.identifier&&delete A.touch1;if(A.touch1&&!A.touch0&&(A.touch0=A.touch1,delete A.touch1),A.touch0)A.touch0[1]=this.__zoom.invert(A.touch0[0]);else if(A.end(),A.taps===2&&(N=We(N,this),Math.hypot(m[0]-N[0],m[1]-N[1])<x)){var Y=L(this).on("dblclick.zoom");Y&&Y.apply(this,arguments)}}}return g.wheelDelta=function(w){return arguments.length?(n=typeof w=="function"?w:oa(+w),g):n},g.filter=function(w){return arguments.length?(e=typeof w=="function"?w:oa(!!w),g):e},g.touchable=function(w){return arguments.length?(o=typeof w=="function"?w:oa(!!w),g):o},g.extent=function(w){return arguments.length?(t=typeof w=="function"?w:oa([[+w[0][0],+w[0][1]],[+w[1][0],+w[1][1]]]),g):t},g.scaleExtent=function(w){return arguments.length?(a[0]=+w[0],a[1]=+w[1],g):[a[0],a[1]]},g.translateExtent=function(w){return arguments.length?(i[0][0]=+w[0][0],i[1][0]=+w[1][0],i[0][1]=+w[0][1],i[1][1]=+w[1][1],g):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},g.constrain=function(w){return arguments.length?(r=w,g):r},g.duration=function(w){return arguments.length?(l=+w,g):l},g.interpolate=function(w){return arguments.length?(s=w,g):s},g.on=function(){var w=u.on.apply(u,arguments);return w===u?g:w},g.clickDistance=function(w){return arguments.length?(h=(w=+w)*w,g):Math.sqrt(h)},g.tapDistance=function(w){return arguments.length?(x=+w,g):x},g}var aW=Symbol("d3fc-domain-zoom");var re={none:"none",ordinal:"ordinal",time:"time",linear:"linear"},Gn=e=>{let t="crossValues",r=null,n=null,o=()=>{let a=i=>{let l=r?e[t].filter(s=>r==s.name):e[t];return t=="crossValues"&&l.length>1?!1:l.some(s=>i.includes(s.type))};return e[t].length===0?re.none:n!=re.time&&a(["datetime","date"])?re.time:n!=re.linear&&a(["integer","float"])||n==re.ordinal?re.linear:re.ordinal};return o.settingName=(...a)=>a.length?(t=a[0],o):t,o.settingValue=(...a)=>a.length?(r=a[0],o):r,o.excludeType=(...a)=>a.length?(n=a[0],o):n,o};var cu={};Aa(cu,{domain:()=>Cw,labelFunction:()=>uu,scale:()=>Aw});function pw(e){var t=0,r=e.children,n=r&&r.length;if(!n)t=1;else for(;--n>=0;)t+=r[n].value;e.value=t}function Ed(){return this.eachAfter(pw)}function Pd(e,t){let r=-1;for(let n of this)e.call(t,n,++r,this);return this}function Ld(e,t){for(var r=this,n=[r],o,a,i=-1;r=n.pop();)if(e.call(t,r,++i,this),o=r.children)for(a=o.length-1;a>=0;--a)n.push(o[a]);return this}function zd(e,t){for(var r=this,n=[r],o=[],a,i,l,s=-1;r=n.pop();)if(o.push(r),a=r.children)for(i=0,l=a.length;i<l;++i)n.push(a[i]);for(;r=o.pop();)e.call(t,r,++s,this);return this}function Bd(e,t){let r=-1;for(let n of this)if(e.call(t,n,++r,this))return n}function Od(e){return this.eachAfter(function(t){for(var r=+e(t.data)||0,n=t.children,o=n&&n.length;--o>=0;)r+=n[o].value;t.value=r})}function Id(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function Rd(e){for(var t=this,r=hw(t,e),n=[t];t!==r;)t=t.parent,n.push(t);for(var o=n.length;e!==r;)n.splice(o,0,e),e=e.parent;return n}function hw(e,t){if(e===t)return e;var r=e.ancestors(),n=t.ancestors(),o=null;for(e=r.pop(),t=n.pop();e===t;)o=e,e=r.pop(),t=n.pop();return o}function Fd(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function $d(){return Array.from(this)}function Hd(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function Yd(){var e=this,t=[];return e.each(function(r){r!==e&&t.push({source:r.parent,target:r})}),t}function*Wd(){var e=this,t,r=[e],n,o,a;do for(t=r.reverse(),r=[];e=t.pop();)if(yield e,n=e.children)for(o=0,a=n.length;o<a;++o)r.push(n[o]);while(r.length)}function gr(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=yw)):t===void 0&&(t=xw);for(var r=new aa(e),n,o=[r],a,i,l,s;n=o.pop();)if((i=t(n.data))&&(s=(i=Array.from(i)).length))for(n.children=i,l=s-1;l>=0;--l)o.push(a=i[l]=new aa(i[l])),a.parent=n,a.depth=n.depth+1;return r.eachBefore(vw)}function gw(){return gr(this).eachBefore(bw)}function xw(e){return e.children}function yw(e){return Array.isArray(e)?e[1]:null}function bw(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function vw(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function aa(e){this.data=e,this.depth=this.height=0,this.parent=null}aa.prototype=gr.prototype={constructor:aa,count:Ed,each:Pd,eachAfter:zd,eachBefore:Ld,find:Bd,sum:Od,sort:Id,path:Rd,ancestors:Fd,descendants:$d,leaves:Hd,links:Yd,copy:gw,[Symbol.iterator]:Wd};function qd(e){if(typeof e!="function")throw new Error;return e}function Un(){return 0}function Xn(e){return function(){return e}}function Gi(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Ui(e,t,r,n,o){for(var a=e.children,i,l=-1,s=a.length,u=e.value&&(n-t)/e.value;++l<s;)i=a[l],i.y0=r,i.y1=o,i.x0=t,i.x1=t+=i.value*u}function iu(){var e=1,t=1,r=0,n=!1;function o(i){var l=i.height+1;return i.x0=i.y0=r,i.x1=e,i.y1=t/l,i.eachBefore(a(t,l)),n&&i.eachBefore(Gi),i}function a(i,l){return function(s){s.children&&Ui(s,s.x0,i*(s.depth+1)/l,s.x1,i*(s.depth+2)/l);var u=s.x0,c=s.y0,m=s.x1-r,f=s.y1-r;m<u&&(u=m=(u+m)/2),f<c&&(c=f=(c+f)/2),s.x0=u,s.y0=c,s.x1=m,s.y1=f}}return o.round=function(i){return arguments.length?(n=!!i,o):n},o.size=function(i){return arguments.length?(e=+i[0],t=+i[1],o):[e,t]},o.padding=function(i){return arguments.length?(r=+i,o):r},o}function Gd(e,t,r,n,o){for(var a=e.children,i,l=-1,s=a.length,u=e.value&&(o-r)/e.value;++l<s;)i=a[l],i.x0=t,i.x1=n,i.y0=r,i.y1=r+=i.value*u}var ww=(1+Math.sqrt(5))/2;function Sw(e,t,r,n,o,a){for(var i=[],l=t.children,s,u,c=0,m=0,f=l.length,d,p,h=t.value,x,g,S,_,v,b,y;c<f;){d=o-r,p=a-n;do x=l[m++].value;while(!x&&m<f);for(g=S=x,b=Math.max(p/d,d/p)/(h*e),y=x*x*b,v=Math.max(S/y,y/g);m<f;++m){if(x+=u=l[m].value,u<g&&(g=u),u>S&&(S=u),y=x*x*b,_=Math.max(S/y,y/g),_>v){x-=u;break}v=_}i.push(s={value:x,dice:d<p,children:l.slice(c,m)}),s.dice?Ui(s,r,n,o,h?n+=p*x/h:a):Gd(s,r,n,h?r+=d*x/h:o,a),h-=x,c=m}return i}var Ud=function e(t){function r(n,o,a,i,l){Sw(t,n,o,a,i,l)}return r.ratio=function(n){return e((n=+n)>1?n:1)},r}(ww);function lu(){var e=Ud,t=!1,r=1,n=1,o=[0],a=Un,i=Un,l=Un,s=Un,u=Un;function c(f){return f.x0=f.y0=0,f.x1=r,f.y1=n,f.eachBefore(m),o=[0],t&&f.eachBefore(Gi),f}function m(f){var d=o[f.depth],p=f.x0+d,h=f.y0+d,x=f.x1-d,g=f.y1-d;x<p&&(p=x=(p+x)/2),g<h&&(h=g=(h+g)/2),f.x0=p,f.y0=h,f.x1=x,f.y1=g,f.children&&(d=o[f.depth+1]=a(f)/2,p+=u(f)-d,h+=i(f)-d,x-=l(f)-d,g-=s(f)-d,x<p&&(p=x=(p+x)/2),g<h&&(h=g=(h+g)/2),e(f,p,h,x,g))}return c.round=function(f){return arguments.length?(t=!!f,c):t},c.size=function(f){return arguments.length?(r=+f[0],n=+f[1],c):[r,n]},c.tile=function(f){return arguments.length?(e=qd(f),c):e},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(a=typeof f=="function"?f:Xn(+f),c):a},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(i=typeof f=="function"?f:Xn(+f),c):i},c.paddingRight=function(f){return arguments.length?(l=typeof f=="function"?f:Xn(+f),c):l},c.paddingBottom=function(f){return arguments.length?(s=typeof f=="function"?f:Xn(+f),c):s},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:Xn(+f),c):u},c}function su(e,t,r,n,o){var a=e.children,i,l=a.length,s,u=new Array(l+1);for(u[0]=s=i=0;i<l;++i)u[i+1]=s+=a[i].value;c(0,l,e.value,t,r,n,o);function c(m,f,d,p,h,x,g){if(m>=f-1){var S=a[m];S.x0=p,S.y0=h,S.x1=x,S.y1=g;return}for(var _=u[m],v=d/2+_,b=m+1,y=f-1;b<y;){var C=b+y>>>1;u[C]<v?b=C+1:y=C}v-u[b-1]<u[b]-v&&m+1<b&&--b;var T=u[b]-_,R=d-T;if(x-p>g-h){var F=d?(p*R+x*T)/d:x;c(m,b,T,p,h,F,g),c(b,f,R,F,h,x,g)}else{var E=d?(h*R+g*T)/d:g;c(m,b,T,p,h,x,E),c(b,f,R,p,E,x,g)}}}var Xd=e=>{let t=r=>(n,o)=>n===void 0?o:o===void 0?n:r(n,o);return e.reduce((r,n)=>[t(Math.min)(r[0],n[0]),t(Math.max)(r[1],n[1])],[void 0,void 0])},xr=e=>Array.isArray(e)?e.flat(1/0):[e];var _w=1,Xi=e=>{let t=r=>e(r);return z(t,e),t.bandwidth=(...r)=>r.length?(e.bandwidth(...r),t):Math.max(e.bandwidth(),_w),t};var jd=e=>{let t=r=>e(r);return z(t,e),t.ticks=function(){return[]},t};var Aw=()=>jd(Xi(dt())),Cw=()=>{let e=["crossValue"],t="horizontal",r=o=>{let a=xr(o);return n([...new Set(a.map(i=>i[e[0]]))])},n=o=>t=="vertical"?o.reverse():o;return r.valueName=(...o)=>o.length?(e=[o[0]],r):e[0],r.valueNames=(...o)=>o.length?(e=o[0],r):e,r.orient=(...o)=>o.length?(t=o[0],r):t,r},uu=e=>t=>t[e].join("|");var Ki={};Aa(Ki,{component:()=>Vw,domain:()=>mu,labelFunction:()=>du,scale:()=>Tw,tickFormatFunction:()=>pu});var ji=()=>{let e=[0,0],t="percent",r=n=>{switch(t){case"domain":{n[0]-=e[0],n[1]+=e[1];break}case"percent":{let o=n[1]-n[0];n[0]-=e[0]*o,n[1]+=e[1]*o;break}default:throw new Error("Unknown padUnit: "+t)}return n};return r.pad=function(...n){return n.length?(e=n[0],r):e},r.padUnit=function(...n){return n.length?(t=n[0],r):t},r};var Qd=function(){let e=[function(a){return a}],t=null,r=[],n=ji(),o=function(i){let l=new Array(i.length),s=!0,u=!1,c,m=e[Symbol.iterator]();try{for(let d;!(s=(d=m.next()).done);s=!0){let p=d.value;for(let h=0;h<i.length;h++){let x=p(i[h],h);Array.isArray(x)?l.push.apply(l,fu(x)):l.push(x)}}}catch(d){u=!0,c=d}finally{try{!s&&m.return&&m.return()}finally{if(u)throw c}}let f=[Fe(l),ot(l)];if(f[0]=f[0]==null?Fe(r):Fe([f[0]].concat(fu(r))),f[1]=f[1]==null?ot(r):ot([f[1]].concat(fu(r))),t!=null){let d=Math.max(Math.abs(f[1]-t),Math.abs(f[0]-t));f[0]=t-d,f[1]=t+d}return n(f)};return o.accessors=function(){return arguments.length?(e=arguments.length<=0?void 0:arguments[0],o):e},o.pad=function(...a){return a.length?(n.pad(a[0]),o):n.pad},o.padUnit=function(...a){return a.length?(n.padUnit(a[0]),o):n.padUnit},o.include=function(...a){return a.length?(r=a[0],o):r},o.symmetricalAbout=function(...a){return a.length?(t=a[0],o):t},o.paddingStrategy=function(...a){return a.length?(n=a[0],o):n},o},fu=function(e){if(Array.isArray(e)){let t=Array(e.length);for(let r=0;r<e.length;r++)t[r]=e[r];return t}else return Array.from(e)};var Mw=1e7,Qi=(e,t)=>{let r=Math.ceil(Math.abs(Math.log10(t-e)))+1;return n=>Math.abs(n)>=Mw?kt(".3s")(n):Number.isInteger(n)?kt(",.0f")(n):kt(`,.${r}f`)(n)};function jn(e){return e.getRootNode().host}function yr(e){return e.closest("#container.chart")}var Tw=()=>ke(),mu=()=>{let e=Qd().pad([0,.1]).padUnit("percent"),t=["crossValue"],r=a=>(e.accessors(t.map(i=>l=>parseFloat(l[i]))),o(xr(a)));z(r,e);let n=a=>{let i=t.map(l=>a.map(s=>s[l]).sort((s,u)=>s-u).filter((s,u,c)=>u===0||s!==c[u-1]).reduce((s,u,c,m)=>c===0||s<=u-m[c-1]?s:Math.abs(u-m[c-1])));return Math.min(...i)},o=a=>{if(e.padUnit()=="domain"){let i=n(a);return e.pad([i/2,i/2])(a)}else return e(a)};return r.valueName=(...a)=>a.length?(t=[a[0]],r):t[0],r.valueNames=(...a)=>a.length?(t=a[0],r):t,r},du=e=>t=>t[e][0],pu=Qi,Vw=e=>{let t=null,r="horizontal",n=null,o=(u,c)=>{try{return yr(u.node()).querySelector(".cartesian-chart").querySelector(`.${c}-axis`)}catch{return null}},a=u=>{let c=L(u).select("text").node();c.style.fontSize="80%"},i=(u,c)=>{let m=u.getBoundingClientRect();c.each((f,d,p)=>{let h=L(p[d]).node().getBoundingClientRect();(r=="vertical"&&m.width<h.width||r=="horizontal"&&m.height<h.height)&&a(p[d])})},l=(u,c,m)=>{let f=o(u,c);f&&i(f,u)},s=()=>({bottom:Fn,left:$n,top:Rn,right:mr,decorate:l});return s.domain=(...u)=>u.length?(t=u[0],s):t,s.orient=(...u)=>u.length?(r=u[0],s):r,s.settingName=(...u)=>u.length?(n=u[0],s):n,s};var gu={};Aa(gu,{domain:()=>Dw,labelFunction:()=>hu,scale:()=>kw});var kw=()=>Pn(),Dw=()=>{let e=No(),t=["crossValue"],r=a=>(e.accessors(t.map(i=>l=>new Date(l[i]))),o(xr(a)));z(r,e,Q("include","paddingStrategy"));let n=a=>{let i=t.map(l=>a.map(s=>new Date(s[l]).getTime()).sort((s,u)=>s-u).filter((s,u,c)=>u===0||s!==c[u-1]).reduce((s,u,c,m)=>c===0||Math.abs(s)<=Math.abs(u-m[c-1])?Math.abs(s):Math.abs(u-m[c-1])));return Math.min(...i)},o=a=>{let i=Math.abs(n(a));return e.padUnit("domain").pad([i/2,i/2])(a)};return r.valueName=(...a)=>a.length?(t=[a[0]],r):t[0],r.valueNames=(...a)=>a.length?(t=a[0],r):t,r},hu=e=>t=>new Date(t[e][0]);var yu={};Aa(yu,{component:()=>Pw,domain:()=>Ew,labelFunction:()=>xu,scale:()=>Nw});var Kd=(...e)=>{let t={},r=n=>{for(let o of Object.keys(t))n[o](t[o]);return n};for(let n of e)r[n]=(...o)=>o.length?(t[n]=o[0],r):t[n];return r};var Ji=(e,t,r)=>{let n=6,o=6,a=Kd("tickFormat","ticks","tickArguments","tickValues","tickPadding"),i=(...h)=>{},l=null,s=U("g","group"),u=U("path","domain"),c=(h,x)=>f()?`translate(${x}, ${h})`:`translate(${h}, ${x})`,m=h=>f()?h.map(x=>[x[1],x[0]]):h,f=()=>e==="left"||e==="right",d=h=>{if(!l){a(t(r).decorate(i))(h);return}h.each((x,g,S)=>{let _=S[g],v=L(_),b=e==="bottom"||e==="right"?1:-1,y=r.range(),C=m([[y[0],b*n],[y[0],0],[y[1],0],[y[1],b*n]]);u(v,[x]).attr("d",Ze()(C)).attr("stroke","#000").attr("fill","none");let R=s(v,l),F=W=>Array.isArray(o)?o[W]:o,E=W=>{let P=0;for(let w=0;w<W;w++)P+=F(w);return P};R.attr("transform",(W,P)=>c(0,b*E(P))).each((W,P,w)=>{let B=L(w[P]),A=p(r,W);a(t(A)).decorate((M,D)=>i(M,D,P)).tickSizeInner(F(P)).tickOffset(M=>A.step(M)/2)(B),B.select("path.domain").attr("visibility","hidden")}),R.exit().attr("transform",(W,P)=>c(0,b*E(P)))})},p=(h,x)=>{function g(S){let _=S.domain;return _.reduce((v,b)=>v+h(b),0)/_.length}return g.ticks=()=>x,g.tickFormat=()=>S=>S.text,g.copy=()=>p(h,x),g.step=S=>S.domain.length*h.step(),z(g,h,Q("ticks","step","copy")),g};return d.tickSize=(...h)=>h.length?(o=n=Number(h[0]),d):o,d.tickSizeInner=(...h)=>h.length?(o=Array.isArray(h[0])?h[0]:Number(h[0]),d):o,d.tickSizeOuter=(...h)=>h.length?(n=Number(h[0]),d):n,d.decorate=(...h)=>h.length?(i=h[0],d):i,d.groups=(...h)=>h.length?(l=h[0],d):l,z(d,a),d},Jd=e=>Ji("top",wi,e),Zd=e=>Ji("bottom",Si,e),ep=e=>Ji("left",_i,e),tp=e=>Ji("right",Ai,e);var Nw=()=>Xi(dt()).padding(.5),Ew=()=>{let e=["crossValue"],t="horizontal",r=o=>{let a=xr(o);return n([...Array.from(new Set(a.map(i=>i[e[0]])))])},n=o=>t=="vertical"?o.reverse():o;return r.valueName=(...o)=>o.length?(e=[o[0]],r):e[0],r.valueNames=(...o)=>o.length?(e=o[0],r):e,r.orient=(...o)=>o.length?(t=o[0],r):t,r},xu=(e,t)=>r=>r[e].map((n,o)=>{let a=t.crossValues[o].type;return a==="datetime"?new Date(n).toLocaleString(void 0,{year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3}):a==="date"?new Date(n).toLocaleDateString():n}).join("|"),Pw=e=>{let t="horizontal",r="crossValues",n=null,o=()=>{let f=e[r].length>1,d=i(n),p=d.map(l),h=f?p.map(v=>v.size):p[0].size,x=p.reduce((v,b)=>v+b.size,0),g=v=>b=>{let y=v(b);return f&&y.groups(d).tickSizeInner(h).tickSizeOuter(x),t!=="horizontal"&&y.tickPadding(10),y},S=(v,b,y)=>{let C=p[y].rotation;t==="horizontal"&&m(v,C),s(v,C)},_=a(f);return{bottom:g(_.bottom),left:g(_.left),right:g(_.right),top:g(_.top),size:`${x+10}px`,decorate:S}},a=f=>f?{bottom:Zd,left:ep,top:Jd,right:tp}:{bottom:Si,left:_i,top:wi,right:Ai},i=f=>{let d=[];return f.forEach(p=>{(p&&p.split?p.split("|"):[p]).forEach((x,g)=>{for(;d.length<=g;)d.push([]);let S=d[g];S.length>0&&S[S.length-1].text===x?S[S.length-1].domain.push(p):S.push({text:x,domain:[p]})})}),d.reverse()},l=f=>{let d=e.size.width,p=Math.max(...f.map(h=>h.text?h.text.length:0));return t==="horizontal"?f&&f.length*16>d-100?{size:p*5+10,rotation:90}:f&&f.length*(p*6+10)>d-100?{size:p*3+20,rotation:45}:{size:25,rotation:0}:{size:p*5+10,rotation:0}},s=(f,d)=>{let p=b=>{let y=b.indexOf(",")!==-1?",":" ",C=b.substring(b.indexOf("(")+1,b.indexOf(")")).split(y).map(T=>parseInt(T));for(;C.length<2;)C.push(0);return C},g=d?(b,y)=>b.x+b.width+14>y.x+y.width:(b,y)=>b.x<=y.x+y.width&&y.x<=b.x+b.width&&b.y<=y.y+y.height&&y.y<=b.y+b.height,S=(b,y)=>b.x>=y.x&&b.x+b.width<=y.x+y.width&&b.y>=y.y&&b.y+b.height<=y.y+y.height,_=t=="horizontal"?u(f):null,v=[];f.each((b,y,C)=>{let T=L(C[y]),R=p(T.attr("transform")),F=T.node().getBBox(),E={x:F.x+R[0],y:F.y+R[1],width:F.width,height:F.height},P=v.some(w=>g(w,E))||_&&!S(E,_);T.attr("visibility",P?"hidden":""),P||v.push(E)})},u=f=>{let d=yr(f.node());if(d===null)return;let p=d.querySelector(".cartesian-chart"),h=p.querySelector(".x-axis"),x=p.getBoundingClientRect(),g=h.getBoundingClientRect();return{x:x.left-g.left,width:x.width,y:x.top-g.top,height:x.height}},c=f=>f?f<60?`rotate(-${f} 5 5)`:`rotate(-${f} 3 7)`:"translate(0, 8)",m=(f,d)=>{let p=c(d),h=d?"end":"";f.each((x,g,S)=>{L(S[g]).select("text").attr("transform",p).style("text-anchor",h)})};return o.orient=(...f)=>f.length?(t=f[0],o):t,o.settingName=(...f)=>f.length?(r=f[0],o):r,o.domain=(...f)=>f.length?(n=f[0],o):n,o};var Lw={none:cu,ordinal:yu,time:gu,linear:Ki},ae=e=>{let t=null,r="horizontal",n="crossValues",o,a=["crossValue"],i=null,l=null,s=["include","paddingStrategy","pad"],u={},c=d=>{let p=Gn(e).excludeType(t).settingName(n).settingValue(o)(),h=Lw[p],x=h.domain().valueNames(a);s.forEach(v=>{u[v]&&x[v]&&x[v](u[v])}),x.orient&&x.orient(r);let g=x(d);i!==null&&(g=i(g)),l&&typeof g[0]=="number"&&(l[0]=g[0]=Math.min(g[0],l[0]),l[1]=g[1]=Math.max(g[1],l[1]));let S=h.hasOwnProperty("component")?m(h,g,d):f(),_=h==Ki?pu(g[0],g[1]):void 0;return{scale:h.scale(),domain:g,domainFunction:x,labelFunction:h.labelFunction,component:{bottom:S.bottom,left:S.left,top:S.top,right:S.right},size:S.size,decorate:S.decorate,label:e[n].map(v=>v.name).join(", "),tickFormatFunction:_}},m=(d,p,h)=>d.component(e).orient(r).settingName(n).domain(p)(h),f=()=>({bottom:Fn,left:$n,top:Rn,right:mr,decorate:()=>{}});return c.memoValue=(...d)=>d.length?(l=d[0],c):l,c.excludeType=(...d)=>d.length?(t=d[0],c):t,c.orient=(...d)=>d.length?(r=d[0],c):r,c.settingName=(...d)=>d.length?(n=d[0],c):n,c.settingValue=(...d)=>d.length?(o=d[0],c):o,c.valueName=(...d)=>d.length?(a=[d[0]],c):a[0],c.valueNames=(...d)=>d.length?(a=d[0],c):a,c.modifyDomain=d=>d?(i=d,c):i,s.forEach(d=>{c[d]=(...p)=>p.length?(u[d]=p[0],c):u[d]}),c};var ut=(e,t)=>rp(e,t,(r,n)=>r.svgPlotArea(n),!1),Qn=(e,t)=>rp(e,t,(r,n)=>r.canvasPlotArea(n).svgPlotArea(Bn()),!0),rp=(e,t,r,n)=>{let o=null,a=null,i=qo({xScale:e.scale,yScale:t.scale,xAxis:e.component,yAxis:t.component}).xDomain(e.domain).xLabel(e.label).xAxisHeight(e.size).xDecorate(e.decorate).xTickFormat(e.tickFormatFunction).yDomain(t.domain).yLabel(t.label).yAxisWidth(t.size).yDecorate(t.decorate).yOrient("left").yTickFormat(t.tickFormatFunction);e.decorate&&i.xDecorate(e.decorate),t.decorate&&i.yDecorate(t.decorate),i.xPaddingInner&&i.xPaddingInner(1),i.xPaddingOuter&&i.xPaddingOuter(.5),i.yPaddingInner&&i.yPaddingInner(1),i.yPaddingOuter&&i.yPaddingOuter(.5),i.axisSplitter=(...s)=>s.length?(o=s[0],i):o,i.altAxis=(...s)=>s.length?(a=s[0],i):a,i.plotArea=function(...s){return s.length==0?n?this.canvasPlotArea():this.svgPlotArea():r(this,...s)};let l=i.decorate();return i.decorate((s,u)=>{let c=s.select("d3fc-svg.plot-area"),m=c.select("svg").node();m.setAttribute("viewBox",`0 0 ${c.node().clientWidth} ${c.node().clientHeight}`),m.setAttribute("preserveAspectRatio","none");for(let f of["x-axis","y-axis"])s.select(`d3fc-svg.${f} svg`).node().setAttribute("preserveAspectRatio","none");if(l(s,u),n){let f=s.select(".svg-plot-area").node(),d=s.select(".canvas-plot-area").node();ks([f,d]).order()}if(!!o){if(o.haveSplit()){let f=o.altData(),d=U("d3fc-svg","y2-axis").key(g=>g),p=U("g","y-series").key(g=>g);s.append("div").attr("class","y-label right-label").style("grid-column",5).style("-ms-grid-column",5).style("grid-row",3).style("-ms-grid-row",3).style("width",a.size||"1em").style("display","flex").style("align-items","center").style("justify-content","center").append("span").attr("class","y-label splitter-label").style("transform","rotate(-90deg)");let h=a.scale.domain(a.domain),x=a.component.right(h);if(x.tickFormat(a.tickFormatFunction),a.decorate&&x.decorate(a.decorate),d(s,["right"]).attr("class",g=>`y-axis ${g}-axis`).on("measure",function(g,S){let{width:_,height:v}=g.detail;S==="left"&&L(g.currentTarget).select("svg").attr("viewBox",`${-_} 0 ${_} ${v}`).attr("preserveAspectRatio","none"),h.range([v,0])}).on("draw",function(g,S){L(g.currentTarget).select("svg").call(x)}),n){let g=S=>{let _=i.plotArea();_.context(S.node().getContext("2d")).xScale(e.scale);let v=[t.scale,h];[u,f].forEach((b,y)=>{_.yScale(v[y]),_(b)})};s.select("d3fc-canvas.plot-area").on("draw",function(S,_){g(L(S.currentTarget).select("canvas"))})}else{let g=function(S){let _=i.plotArea();_.xScale(e.scale);let v=[t.scale,h];p(S,[u,f]).each((b,y,C)=>{_.yScale(v[y]),L(C[y]).datum(b).call(_)})};s.select("d3fc-svg.plot-area").on("draw",function(S,_){g(L(S.currentTarget).select("svg"))})}}o(s)}}),i};function be(e,t,r){let n=e.select(t);return n.size()>0?n:r()}function Lt(e,t,r="right"){if(r==="right"||r==="bottom")return e[r]<t[r];if(r==="left"||r==="top")return e[r]>t[r];throw`Direction being checked for overflow is invalid: ${r}`}function bu(e,t,r,n=0){let o=e==="x"?"width":"height",a=t[e],i=t[e]+t[o],l=r[e],s=r[e]+r[o],u=l+n>a&&l-n<i,c=s+n>a&&s-n<i,m=l+n<a&&s-n>i;return u||c||m}var np=`<ul id="tooltip-values"></ul>
`;function Gt(e,t){switch(e){case"date":case"datetime":return t instanceof Date?t:new Date(parseInt(t)).toLocaleString([],{dateStyle:"short",timeStyle:"medium"});case"integer":return parseInt(t,10);case"float":return parseFloat(t)}return t}function Zi(e,t){return t.crossValues.length===0?[]:e.crossValue.length===0?[]:((e.crossValue.split?e.crossValue.split("|"):Array.isArray(e.crossValue)?e.crossValue:[e.crossValue])||[e.key]).map((n,o)=>({name:t.crossValues[o].name,value:Gt(t.crossValues[o].type,n)}))}function el(e,t){if(t.splitValues.length===0)return[];let r=[e.mainValue];return e.key?r=e.key.split("|"):e.mainValue?.split&&(r=e.mainValue.split("|")),t.splitValues.map((n,o)=>({name:n.name,value:Gt(n.type,r[o])}))}function tl(e,t){return t.mainValues.length>1?e.mainValues?t.mainValues.map((r,n)=>({name:r.name,value:Gt(r.type,e.mainValues[n])})):t.mainValues.map(r=>({name:r.name,value:Gt(r.type,e.row[Bw(e.key,r,t.realValues)])})):[{name:t.mainValues[0].name,value:Gt(t.mainValues[0].type,e.colorValue||e.mainValue-e.baseValue||e.mainValue||e.mainValues)}]}function Bw(e,t,r){if(!e)return t.name;if(e.includes("|")){let o=e.split("|");return o[o.length-1]===t.name?e:`${r.includes(o[o.length-1])?o.slice(0,o.length-1).join("|"):e}|${t.name}`}return r.includes(e)?t.name:`${e}|${t.name}`}function op(e,t,r){let n=Zi(t,r).concat(el(t,r)).concat(tl(t,r));Ow(e,n)}function Ow(e,t){e.select("#tooltip-values").selectAll("li").data(t).join("li").each(function(r){L(this).text(`${r.name}: `).append("b").text(Iw(r.value))})}var Iw=e=>e==null?"-":e.toLocaleString(void 0,{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2});var ap=e=>[e.name,"==",e.value],ia=(e,t,r)=>{let n=tl(t,r).map(l=>l.name),o=Zi(t,r).map(ap),a=el(t,r).map(ap),i=r.filter.concat(o).concat(a);e.dispatchEvent(new CustomEvent("perspective-click",{bubbles:!0,composed:!0,detail:{column_names:n,config:{filter:i},row:t.row}}))},ip=()=>{let e=null,t=r=>{let n=r.node();r.on("click",(o,a)=>ia(n,a,e))};return t.settings=(...r)=>r.length?(e=r[0],t):e,t};var br=()=>{let e=!1,t=null,r=null,n=!1,o=a=>{let i=a.node();if(!i||!i.isConnected){lp(t);return}let l=L(yr(i));t=Rw(l);let s=function(c,m){op(t,m,r);let f=a.nodes(),d=f.indexOf(this);Fw(l.node(),f[d],t,n),L(f[d]).style("opacity","0.7")},u=function(c,m){lp(t);let f=a.nodes(),d=f.indexOf(this);f&&L(f[d]).style("opacity","1")};e?a.each(function(c){return s.call(this,void 0,c)}):(a.on("mouseover",s).on("mouseout",u),ip().settings(r)(a))};return o.alwaysShow=(...a)=>a.length?(e=a[0],o):e,o.centered=(...a)=>a.length?(n=a[0],o):n,o.settings=(...a)=>a.length?(r=a[0],o):r,o};function Rw(e){return be(e,"div.tooltip",()=>e.append("div").attr("class","tooltip").style("z-index",3).style("opacity",0).html(np))}function Fw(e,t,r,n){let o=e.getBoundingClientRect(),a=t.getBoundingClientRect(),i=a.left+a.width/2-o.left,l=a.top-o.top+e.scrollTop;n&&(l=a.top+a.height/2-o.top+e.scrollTop),r.style("left",`${i}px`).style("top",`${l}px`).style("opacity",.9),n&&([i,l]=$w(r,o)),Hw(r,o,i,l,n)}function $w(e,t){let r=e.node().getBoundingClientRect(),n=r.width/2,o=r.left-n-t.left;e.style("left",`${o}px`);let a=r.height/2,i=r.top-a-t.top;return e.style("top",`${i}px`),[o,i]}function Hw(e,t,r,n,o=!1){let a=e.node().getBoundingClientRect();if(Lt(t,a)){let i=a.right-t.right;e.style("left",`${r-i}px`)}if(Lt(t,a,"bottom")){let i=a.bottom-t.bottom;e.style("top",`${n-i}px`)}if(!!o){if(Lt(t,a,"left")){let i=a.left-t.left;e.style("left",`${r-i}px`)}if(Lt(t,a,"top")){let i=a.top-t.top;e.style("top",`${n-i}px`)}}}function lp(e){e&&e.style("opacity",0)}function rl(e,t){let r=e.mainValues.length>1?$s(On()):On();return r=r.decorate(n=>{br().settings(e)(n),n.style("fill",o=>t(o.key))}),Jr(Yw(r)).crossValue(n=>n.crossValue).mainValue(n=>n.mainValue?n.mainValue:0).baseValue(n=>n.baseValue)}var Yw=e=>{let t=r=>e(r);return z(t,e),t.bandwidth=(...r)=>r.length?(e.bandwidth(Math.max(r[0],1)),t):e.bandwidth(),t};function vr(e){return e.split("|").slice(0,-1).join("|")}function nl(e,t){return e.data.map(r=>Object.entries(r).filter(([n,o])=>n.split("|").at(-1)===t&&!!o).map(([n,o])=>o)).flat()}function zt(e){let t=e.data&&e.data.length>0?e.data[0]:{},r=Object.keys(t).filter(n=>n!=="__ROW_PATH__");return _t().settings(e).domain(r)()}function sp(e,t){let r=nl(e,t),n=[...new Set(r)].sort();return _t().settings(e).domain(n)()}function rn(e,t){let r=[...new Set(t)];return _t().settings(e).domain(r)()}function up(e){let t=e.data[0]??{},r=Object.keys(t).filter(o=>o!=="__ROW_PATH__").map(o=>vr(o)),n=[...new Set(r)];return _t().settings(e).domain(n)()}function _t(){let e=null,t=null,r={},n=a=>nn(a,r.colorStyles&&r.colorStyles.opacity),o=()=>{let a=r.colorStyles,i=t||[a.series];if(i||e.length>1){let l=e.length>1?a.scheme:i;return mt(l.map(n)).domain(e)}return null};return o.domain=(...a)=>a.length===0?e:(e=a[0],o),o.defaultColors=(...a)=>a.length?(t=a[0],o):t,o.mapFunction=(...a)=>a.length?(n=a[0],o):n,o.settings=(...a)=>a.length?(r=a[0],o):r,o}function Bt(e){return on(1)(e)}function nn(e,t=.5){return on(t)(e)}function on(e){return t=>{let r=Te(t);return r!=null&&(r.opacity=e),r+""}}var Ww={none:uu,ordinal:xu,time:hu,linear:du},ct=e=>{let t=Gn(e),r="__ROW_PATH__",n=Ww[t()],o=(a,i)=>n(r,e)(a);return z(o,t),o.valueName=(...a)=>a.length?(r=a[0],o):r,o};function an(e,t,{stack:r=!1,excludeEmpty:n=!1}={}){let o=t||e.data;return e.splitValues.length>0?qw(e,o,{stack:r,excludeEmpty:n}):[o]}function qw(e,t,{stack:r=!1,excludeEmpty:n=!1}){let o={};return t.forEach(a=>{let i={},l={};Object.keys(a).filter(s=>s!=="__ROW_PATH__").filter(s=>!n||a[s]!=null&&a[s]!=null).forEach(s=>{let u=s.split("|"),c=u[u.length-1],m=a[s]||0,f=`${c}${m>=0?"+ve":"-ve"}`,d=u.slice(0,u.length-1).join("|"),p=l[d]=l[d]||{__ROW_PATH__:a.__ROW_PATH__},h=i[f]||0;p.__KEY__=d,r?(p[c]=h+m,p[`__BASE_VALUE__${c}`]=h,i[f]=p[c]):p[c]=m,p.row=a}),Object.keys(l).forEach(s=>{(o[s]=o[s]||[]).push(l[s])})}),Object.keys(o).map(a=>{let i=o[a];return i.key=a,i})}function cp(e,t){let r={stack:!1},n=an(e,t,r).map(o=>fp(e,o,r));return e.mainValues.length>1?n.reduce((a,i)=>a.concat(i)):n}function ol(e,t){let r={stack:!0};return an(e,t,r).map(n=>fp(e,n,r))}function Gw(e,t,{stack:r=!1}){let n=ct(e);return o=>{let a=l=>r&&l[`__BASE_VALUE__${o.name}`]||0,i=t.map((l,s)=>({crossValue:n(l,s),mainValue:l[o.name]?l[o.name]:null,baseValue:a(l),key:l.__KEY__?`${l.__KEY__}|${o.name}`:o.name,row:l.row||l}));return i.key=i[0].key,i}}function fp(e,t,{stack:r=!1}){let n=Gw(e,t,{stack:r});return e.mainValues.length>1?e.mainValues.map(n):n(e.mainValues[0])}var al="http://www.w3.org/1999/xhtml",il={svg:"http://www.w3.org/2000/svg",xhtml:al,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function la(e){var t=e+="",r=t.indexOf(":");return r>=0&&(t=e.slice(0,r))!=="xmlns"&&(e=e.slice(r+1)),il.hasOwnProperty(t)?{space:il[t],local:e}:e}function Uw(e){return function(){var t=this.ownerDocument,r=this.namespaceURI;return r===al&&t.documentElement.namespaceURI===al?t.createElement(e):t.createElementNS(r,e)}}function Xw(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function sa(e){var t=la(e);return(t.local?Xw:Uw)(t)}var jw=0;function wu(){return new vu}function vu(){this._="@"+(++jw).toString(36)}vu.prototype=wu.prototype={constructor:vu,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}};var dp=function(e){return function(){return this.matches(e)}};typeof document<"u"&&(Kn=document.documentElement,Kn.matches||(mp=Kn.webkitMatchesSelector||Kn.msMatchesSelector||Kn.mozMatchesSelector||Kn.oMatchesSelector,dp=function(e){return function(){return mp.call(this,e)}}));var Kn,mp,Su=dp;var hp={},ua=null;typeof document<"u"&&(pp=document.documentElement,"onmouseenter"in pp||(hp={mouseenter:"mouseover",mouseleave:"mouseout"}));var pp;function Qw(e,t,r){return e=gp(e,t,r),function(n){var o=n.relatedTarget;(!o||o!==this&&!(o.compareDocumentPosition(this)&8))&&e.call(this,n)}}function gp(e,t,r){return function(n){var o=ua;ua=n;try{e.call(this,this.__data__,t,r)}finally{ua=o}}}function Kw(e){return e.trim().split(/^|\s+/).map(function(t){var r="",n=t.indexOf(".");return n>=0&&(r=t.slice(n+1),t=t.slice(0,n)),{type:t,name:r}})}function Jw(e){return function(){var t=this.__on;if(!!t){for(var r=0,n=-1,o=t.length,a;r<o;++r)a=t[r],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.capture):t[++n]=a;++n?t.length=n:delete this.__on}}}function Zw(e,t,r){var n=hp.hasOwnProperty(e.type)?Qw:gp;return function(o,a,i){var l=this.__on,s,u=n(t,a,i);if(l){for(var c=0,m=l.length;c<m;++c)if((s=l[c]).type===e.type&&s.name===e.name){this.removeEventListener(s.type,s.listener,s.capture),this.addEventListener(s.type,s.listener=u,s.capture=r),s.value=t;return}}this.addEventListener(e.type,u,r),s={type:e.type,name:e.name,value:t,listener:u,capture:r},l?l.push(s):this.__on=[s]}}function xp(e,t,r){var n=Kw(e+""),o,a=n.length,i;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,c;s<u;++s)for(o=0,c=l[s];o<a;++o)if((i=n[o]).type===c.type&&i.name===c.name)return c.value}return}for(l=t?Zw:Jw,r==null&&(r=!1),o=0;o<a;++o)this.each(l(n[o],t,r));return this}function eS(){}function ca(e){return e==null?eS:function(){return this.querySelector(e)}}function vp(e){typeof e!="function"&&(e=ca(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=new Array(i),s,u,c=0;c<i;++c)(s=a[c])&&(u=e.call(s,s.__data__,c,a))&&("__data__"in s&&(u.__data__=s.__data__),l[c]=u);return new de(n,this._parents)}function tS(){return[]}function _u(e){return e==null?tS:function(){return this.querySelectorAll(e)}}function wp(e){typeof e!="function"&&(e=_u(e));for(var t=this._groups,r=t.length,n=[],o=[],a=0;a<r;++a)for(var i=t[a],l=i.length,s,u=0;u<l;++u)(s=i[u])&&(n.push(e.call(s,s.__data__,u,i)),o.push(s));return new de(n,o)}function Sp(e){typeof e!="function"&&(e=Su(e));for(var t=this._groups,r=t.length,n=new Array(r),o=0;o<r;++o)for(var a=t[o],i=a.length,l=n[o]=[],s,u=0;u<i;++u)(s=a[u])&&e.call(s,s.__data__,u,a)&&l.push(s);return new de(n,this._parents)}function ll(e){return new Array(e.length)}function _p(){return new de(this._enter||this._groups.map(ll),this._parents)}function fa(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}fa.prototype={constructor:fa,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ap(e){return function(){return e}}var Cp="$";function rS(e,t,r,n,o,a){for(var i=0,l,s=t.length,u=a.length;i<u;++i)(l=t[i])?(l.__data__=a[i],n[i]=l):r[i]=new fa(e,a[i]);for(;i<s;++i)(l=t[i])&&(o[i]=l)}function nS(e,t,r,n,o,a,i){var l,s,u={},c=t.length,m=a.length,f=new Array(c),d;for(l=0;l<c;++l)(s=t[l])&&(f[l]=d=Cp+i.call(s,s.__data__,l,t),d in u?o[l]=s:u[d]=s);for(l=0;l<m;++l)d=Cp+i.call(e,a[l],l,a),(s=u[d])?(n[l]=s,s.__data__=a[l],u[d]=null):r[l]=new fa(e,a[l]);for(l=0;l<c;++l)(s=t[l])&&u[f[l]]===s&&(o[l]=s)}function Mp(e,t){if(!e)return d=new Array(this.size()),u=-1,this.each(function(y){d[++u]=y}),d;var r=t?nS:rS,n=this._parents,o=this._groups;typeof e!="function"&&(e=Ap(e));for(var a=o.length,i=new Array(a),l=new Array(a),s=new Array(a),u=0;u<a;++u){var c=n[u],m=o[u],f=m.length,d=e.call(c,c&&c.__data__,u,n),p=d.length,h=l[u]=new Array(p),x=i[u]=new Array(p),g=s[u]=new Array(f);r(c,m,h,x,g,d,t);for(var S=0,_=0,v,b;S<p;++S)if(v=h[S]){for(S>=_&&(_=S+1);!(b=x[_])&&++_<p;);v._next=b||null}}return i=new de(i,n),i._enter=l,i._exit=s,i}function Tp(){return new de(this._exit||this._groups.map(ll),this._parents)}function Vp(e){for(var t=this._groups,r=e._groups,n=t.length,o=r.length,a=Math.min(n,o),i=new Array(n),l=0;l<a;++l)for(var s=t[l],u=r[l],c=s.length,m=i[l]=new Array(c),f,d=0;d<c;++d)(f=s[d]||u[d])&&(m[d]=f);for(;l<n;++l)i[l]=t[l];return new de(i,this._parents)}function kp(){for(var e=this._groups,t=-1,r=e.length;++t<r;)for(var n=e[t],o=n.length-1,a=n[o],i;--o>=0;)(i=n[o])&&(a&&a!==i.nextSibling&&a.parentNode.insertBefore(i,a),a=i);return this}function Dp(e){e||(e=oS);function t(m,f){return m&&f?e(m.__data__,f.__data__):!m-!f}for(var r=this._groups,n=r.length,o=new Array(n),a=0;a<n;++a){for(var i=r[a],l=i.length,s=o[a]=new Array(l),u,c=0;c<l;++c)(u=i[c])&&(s[c]=u);s.sort(t)}return new de(o,this._parents).order()}function oS(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Np(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ep(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}function Pp(){for(var e=this._groups,t=0,r=e.length;t<r;++t)for(var n=e[t],o=0,a=n.length;o<a;++o){var i=n[o];if(i)return i}return null}function Lp(){var e=0;return this.each(function(){++e}),e}function zp(){return!this.node()}function Bp(e){for(var t=this._groups,r=0,n=t.length;r<n;++r)for(var o=t[r],a=0,i=o.length,l;a<i;++a)(l=o[a])&&e.call(l,l.__data__,a,o);return this}function aS(e){return function(){this.removeAttribute(e)}}function iS(e){return function(){this.removeAttributeNS(e.space,e.local)}}function lS(e,t){return function(){this.setAttribute(e,t)}}function sS(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function uS(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttribute(e):this.setAttribute(e,r)}}function cS(e,t){return function(){var r=t.apply(this,arguments);r==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,r)}}function Op(e,t){var r=la(e);if(arguments.length<2){var n=this.node();return r.local?n.getAttributeNS(r.space,r.local):n.getAttribute(r)}return this.each((t==null?r.local?iS:aS:typeof t=="function"?r.local?cS:uS:r.local?sS:lS)(r,t))}function ma(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function fS(e){return function(){this.style.removeProperty(e)}}function mS(e,t,r){return function(){this.style.setProperty(e,t,r)}}function dS(e,t,r){return function(){var n=t.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,r)}}function Ip(e,t,r){var n;return arguments.length>1?this.each((t==null?fS:typeof t=="function"?dS:mS)(e,t,r??"")):ma(n=this.node()).getComputedStyle(n,null).getPropertyValue(e)}function pS(e){return function(){delete this[e]}}function hS(e,t){return function(){this[e]=t}}function gS(e,t){return function(){var r=t.apply(this,arguments);r==null?delete this[e]:this[e]=r}}function Rp(e,t){return arguments.length>1?this.each((t==null?pS:typeof t=="function"?gS:hS)(e,t)):this.node()[e]}function Fp(e){return e.trim().split(/^|\s+/)}function Au(e){return e.classList||new $p(e)}function $p(e){this._node=e,this._names=Fp(e.getAttribute("class")||"")}$p.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Hp(e,t){for(var r=Au(e),n=-1,o=t.length;++n<o;)r.add(t[n])}function Yp(e,t){for(var r=Au(e),n=-1,o=t.length;++n<o;)r.remove(t[n])}function xS(e){return function(){Hp(this,e)}}function yS(e){return function(){Yp(this,e)}}function bS(e,t){return function(){(t.apply(this,arguments)?Hp:Yp)(this,e)}}function Wp(e,t){var r=Fp(e+"");if(arguments.length<2){for(var n=Au(this.node()),o=-1,a=r.length;++o<a;)if(!n.contains(r[o]))return!1;return!0}return this.each((typeof t=="function"?bS:t?xS:yS)(r,t))}function vS(){this.textContent=""}function wS(e){return function(){this.textContent=e}}function SS(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function qp(e){return arguments.length?this.each(e==null?vS:(typeof e=="function"?SS:wS)(e)):this.node().textContent}function _S(){this.innerHTML=""}function AS(e){return function(){this.innerHTML=e}}function CS(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Gp(e){return arguments.length?this.each(e==null?_S:(typeof e=="function"?CS:AS)(e)):this.node().innerHTML}function MS(){this.nextSibling&&this.parentNode.appendChild(this)}function Up(){return this.each(MS)}function TS(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Xp(){return this.each(TS)}function jp(e){var t=typeof e=="function"?e:sa(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function VS(){return null}function Qp(e,t){var r=typeof e=="function"?e:sa(e),n=t==null?VS:typeof t=="function"?t:ca(t);return this.select(function(){return this.insertBefore(r.apply(this,arguments),n.apply(this,arguments)||null)})}function kS(){var e=this.parentNode;e&&e.removeChild(this)}function Kp(){return this.each(kS)}function Jp(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Zp(e,t,r){var n=ma(e),o=n.CustomEvent;o?o=new o(t,r):(o=n.document.createEvent("Event"),r?(o.initEvent(t,r.bubbles,r.cancelable),o.detail=r.detail):o.initEvent(t,!1,!1)),e.dispatchEvent(o)}function DS(e,t){return function(){return Zp(this,e,t)}}function NS(e,t){return function(){return Zp(this,e,t.apply(this,arguments))}}function eh(e,t){return this.each((typeof t=="function"?NS:DS)(e,t))}var sl=[null];function de(e,t){this._groups=e,this._parents=t}function ES(){return new de([[document.documentElement]],sl)}de.prototype=ES.prototype={constructor:de,select:vp,selectAll:wp,filter:Sp,data:Mp,enter:_p,exit:Tp,merge:Vp,order:kp,sort:Dp,call:Np,nodes:Ep,node:Pp,size:Lp,empty:zp,each:Bp,attr:Op,style:Ip,property:Rp,classed:Wp,text:qp,html:Gp,raise:Up,lower:Xp,append:jp,insert:Qp,remove:Kp,datum:Jp,on:xp,dispatch:eh};function Cu(e){return typeof e=="string"?new de([[document.querySelector(e)]],[document.documentElement]):new de([[e]],sl)}function ln(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Ot(e){return e=ln(Math.abs(e)),e?e[1]:NaN}function th(e,t){return function(r,n){for(var o=r.length,a=[],i=0,l=e[0],s=0;o>0&&l>0&&(s+l+1>n&&(l=Math.max(1,n-s)),a.push(r.substring(o-=l,o+l)),!((s+=l+1)>n));)l=e[i=(i+1)%e.length];return a.reverse().join(t)}}function rh(e,t){e=e.toPrecision(t);e:for(var r=e.length,n=1,o=-1,a;n<r;++n)switch(e[n]){case".":o=a=n;break;case"0":o===0&&(o=n),a=n;break;case"e":break e;default:o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(a+1):e}var Mu;function nh(e,t){var r=ln(e,t);if(!r)return e+"";var n=r[0],o=r[1],a=o-(Mu=Math.max(-8,Math.min(8,Math.floor(o/3)))*3)+1,i=n.length;return a===i?n:a>i?n+new Array(a-i+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+new Array(1-a).join("0")+ln(e,Math.max(0,t+a-1))[0]}function Tu(e,t){var r=ln(e,t);if(!r)return e+"";var n=r[0],o=r[1];return o<0?"0."+new Array(-o).join("0")+n:n.length>o+1?n.slice(0,o+1)+"."+n.slice(o+1):n+new Array(o-n.length+2).join("0")}var ul={"":rh,"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:function(e){return Math.round(e).toString(10)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return Tu(e*100,t)},r:Tu,s:nh,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};var PS=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;function Ut(e){return new oh(e)}function oh(e){if(!(t=PS.exec(e)))throw new Error("invalid format: "+e);var t,r=t[1]||" ",n=t[2]||">",o=t[3]||"-",a=t[4]||"",i=!!t[5],l=t[6]&&+t[6],s=!!t[7],u=t[8]&&+t[8].slice(1),c=t[9]||"";c==="n"?(s=!0,c="g"):ul[c]||(c=""),(i||r==="0"&&n==="=")&&(i=!0,r="0",n="="),this.fill=r,this.align=n,this.sign=o,this.symbol=a,this.zero=i,this.width=l,this.comma=s,this.precision=u,this.type=c}oh.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width==null?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision==null?"":"."+Math.max(0,this.precision|0))+this.type};var ah=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function LS(e){return e}function Jn(e){var t=e.grouping&&e.thousands?th(e.grouping,e.thousands):LS,r=e.currency,n=e.decimal;function o(i){i=Ut(i);var l=i.fill,s=i.align,u=i.sign,c=i.symbol,m=i.zero,f=i.width,d=i.comma,p=i.precision,h=i.type,x=c==="$"?r[0]:c==="#"&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",g=c==="$"?r[1]:/[%p]/.test(h)?"%":"",S=ul[h],_=!h||/[defgprs%]/.test(h);p=p==null?h?6:12:/[gprs]/.test(h)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p));function v(b){var y=x,C=g,T,R,F;if(h==="c")C=S(b)+C,b="";else{b=+b;var E=(b<0||1/b<0)&&(b*=-1,!0);if(b=S(b,p),E){for(T=-1,R=b.length,E=!1;++T<R;)if(F=b.charCodeAt(T),48<F&&F<58||h==="x"&&96<F&&F<103||h==="X"&&64<F&&F<71){E=!0;break}}if(y=(E?u==="("?u:"-":u==="-"||u==="("?"":u)+y,C=C+(h==="s"?ah[8+Mu/3]:"")+(E&&u==="("?")":""),_){for(T=-1,R=b.length;++T<R;)if(F=b.charCodeAt(T),48>F||F>57){C=(F===46?n+b.slice(T+1):b.slice(T))+C,b=b.slice(0,T);break}}}d&&!m&&(b=t(b,1/0));var W=y.length+b.length+C.length,P=W<f?new Array(f-W+1).join(l):"";switch(d&&m&&(b=t(P+b,P.length?f-C.length:1/0),P=""),s){case"<":return y+b+C+P;case"=":return y+P+b+C;case"^":return P.slice(0,W=P.length>>1)+y+b+C+P.slice(W)}return P+y+b+C}return v.toString=function(){return i+""},v}function a(i,l){var s=o((i=Ut(i),i.type="f",i)),u=Math.max(-8,Math.min(8,Math.floor(Ot(l)/3)))*3,c=Math.pow(10,-u),m=ah[8+u/3];return function(f){return s(c*f)+m}}return{format:o,formatPrefix:a}}var cl,sn,Zn;Vu({decimal:".",thousands:",",grouping:[3],currency:["$",""]});function Vu(e){return cl=Jn(e),sn=cl.format,Zn=cl.formatPrefix,cl}function ku(e){return Math.max(0,-Ot(Math.abs(e)))}function Du(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Ot(t)/3)))*3-Ot(Math.abs(e)))}function Nu(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Ot(t)-Ot(e))+1}var zS={value:function(){}};function lh(){for(var e=0,t=arguments.length,r={},n;e<t;++e){if(!(n=arguments[e]+"")||n in r)throw new Error("illegal type: "+n);r[n]=[]}return new fl(r)}function fl(e){this._=e}function BS(e,t){return e.trim().split(/^|\s+/).map(function(r){var n="",o=r.indexOf(".");if(o>=0&&(n=r.slice(o+1),r=r.slice(0,o)),r&&!t.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:n}})}fl.prototype=lh.prototype={constructor:fl,on:function(e,t){var r=this._,n=BS(e+"",r),o,a=-1,i=n.length;if(arguments.length<2){for(;++a<i;)if((o=(e=n[a]).type)&&(o=OS(r[o],e.name)))return o;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<i;)if(o=(e=n[a]).type)r[o]=ih(r[o],e.name,t);else if(t==null)for(o in r)r[o]=ih(r[o],e.name,null);return this},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new fl(e)},call:function(e,t){if((o=arguments.length-2)>0)for(var r=new Array(o),n=0,o,a;n<o;++n)r[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],n=0,o=a.length;n<o;++n)a[n].value.apply(t,r)},apply:function(e,t,r){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],o=0,a=n.length;o<a;++o)n[o].value.apply(t,r)}};function OS(e,t){for(var r=0,n=e.length,o;r<n;++r)if((o=e[r]).name===t)return o.value}function ih(e,t,r){for(var n=0,o=e.length;n<o;++n)if(e[n].name===t){e[n]=zS,e=e.slice(0,n).concat(e.slice(n+1));break}return r!=null&&e.push({name:t,value:r}),e}var ml=lh;function Xt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function dl(e){return e.length===1&&(e=IS(e)),{left:function(t,r,n,o){for(n==null&&(n=0),o==null&&(o=t.length);n<o;){var a=n+o>>>1;e(t[a],r)<0?n=a+1:o=a}return n},right:function(t,r,n,o){for(n==null&&(n=0),o==null&&(o=t.length);n<o;){var a=n+o>>>1;e(t[a],r)>0?o=a:n=a+1}return n}}}function IS(e){return function(t,r){return Xt(e(t),r)}}var sh=dl(Xt),uh=sh.right,RS=sh.left,un=uh;var ch=Array.prototype,$S=ch.slice,HS=ch.map;var Eu=Math.sqrt(50),Pu=Math.sqrt(10),Lu=Math.sqrt(2);function hl(e,t,r){var n,o=-1,a,i,l;if(t=+t,e=+e,r=+r,e===t&&r>0)return[e];if((n=t<e)&&(a=e,e=t,t=a),(l=fh(e,t,r))===0||!isFinite(l))return[];if(l>0)for(e=Math.ceil(e/l),t=Math.floor(t/l),i=new Array(a=Math.ceil(t-e+1));++o<a;)i[o]=(e+o)*l;else for(e=Math.floor(e*l),t=Math.ceil(t*l),i=new Array(a=Math.ceil(e-t+1));++o<a;)i[o]=(e-o)/l;return n&&i.reverse(),i}function fh(e,t,r){var n=(t-e)/Math.max(0,r),o=Math.floor(Math.log(n)/Math.LN10),a=n/Math.pow(10,o);return o>=0?(a>=Eu?10:a>=Pu?5:a>=Lu?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=Eu?10:a>=Pu?5:a>=Lu?2:1)}function wr(e,t,r){var n=Math.abs(t-e)/Math.max(0,r),o=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),a=n/o;return a>=Eu?o*=10:a>=Pu?o*=5:a>=Lu&&(o*=2),t<e?-o:o}var rt="$";function gl(){}gl.prototype=dh.prototype={constructor:gl,has:function(e){return rt+e in this},get:function(e){return this[rt+e]},set:function(e,t){return this[rt+e]=t,this},remove:function(e){var t=rt+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===rt&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===rt&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===rt&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===rt&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===rt&&++e;return e},empty:function(){for(var e in this)if(e[0]===rt)return!1;return!0},each:function(e){for(var t in this)t[0]===rt&&e(this[t],t.slice(1),this)}};function dh(e,t){var r=new gl;if(e instanceof gl)e.each(function(l,s){r.set(s,l)});else if(Array.isArray(e)){var n=-1,o=e.length,a;if(t==null)for(;++n<o;)r.set(n,e[n]);else for(;++n<o;)r.set(t(a=e[n],n,e),a)}else if(e)for(var i in e)r.set(i,e[i]);return r}var da=dh;function xl(){}var cn=da.prototype;xl.prototype=XS.prototype={constructor:xl,has:cn.has,add:function(e){return e+="",this[rt+e]=e,this},remove:cn.remove,clear:cn.clear,values:cn.keys,size:cn.size,empty:cn.empty,each:cn.each};function XS(e,t){var r=new xl;if(e instanceof xl)e.each(function(a){r.add(a)});else if(e){var n=-1,o=e.length;if(t==null)for(;++n<o;)r.add(e[n]);else for(;++n<o;)r.add(t(e[n],n,e))}return r}var ph=Array.prototype,yl=ph.map,fn=ph.slice;function eo(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function pa(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function dn(){}var Sr=.7,mn=1/Sr,to="\\s*([+-]?\\d+)\\s*",ha="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Rt="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",QS=/^#([0-9a-f]{3,8})$/,KS=new RegExp("^rgb\\("+[to,to,to]+"\\)$"),JS=new RegExp("^rgb\\("+[Rt,Rt,Rt]+"\\)$"),ZS=new RegExp("^rgba\\("+[to,to,to,ha]+"\\)$"),e2=new RegExp("^rgba\\("+[Rt,Rt,Rt,ha]+"\\)$"),t2=new RegExp("^hsl\\("+[ha,Rt,Rt]+"\\)$"),r2=new RegExp("^hsla\\("+[ha,Rt,Rt,ha]+"\\)$"),hh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eo(dn,_r,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:gh,formatHex:gh,formatHsl:n2,formatRgb:xh,toString:xh});function gh(){return this.rgb().formatHex()}function n2(){return Sh(this).formatHsl()}function xh(){return this.rgb().formatRgb()}function _r(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=QS.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?yh(t):r===3?new Ne(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?bl(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?bl(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=KS.exec(e))?new Ne(t[1],t[2],t[3],1):(t=JS.exec(e))?new Ne(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ZS.exec(e))?bl(t[1],t[2],t[3],t[4]):(t=e2.exec(e))?bl(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=t2.exec(e))?wh(t[1],t[2]/100,t[3]/100,1):(t=r2.exec(e))?wh(t[1],t[2]/100,t[3]/100,t[4]):hh.hasOwnProperty(e)?yh(hh[e]):e==="transparent"?new Ne(NaN,NaN,NaN,0):null}function yh(e){return new Ne(e>>16&255,e>>8&255,e&255,1)}function bl(e,t,r,n){return n<=0&&(e=t=r=NaN),new Ne(e,t,r,n)}function Iu(e){return e instanceof dn||(e=_r(e)),e?(e=e.rgb(),new Ne(e.r,e.g,e.b,e.opacity)):new Ne}function ro(e,t,r,n){return arguments.length===1?Iu(e):new Ne(e,t,r,n??1)}function Ne(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}eo(Ne,ro,pa(dn,{brighter:function(e){return e=e==null?mn:Math.pow(mn,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Sr:Math.pow(Sr,e),new Ne(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:bh,formatHex:bh,formatRgb:vh,toString:vh}));function bh(){return"#"+Bu(this.r)+Bu(this.g)+Bu(this.b)}function vh(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Bu(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function wh(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new It(e,t,r,n)}function Sh(e){if(e instanceof It)return new It(e.h,e.s,e.l,e.opacity);if(e instanceof dn||(e=_r(e)),!e)return new It;if(e instanceof It)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(t,r,n),a=Math.max(t,r,n),i=NaN,l=a-o,s=(a+o)/2;return l?(t===a?i=(r-n)/l+(r<n)*6:r===a?i=(n-t)/l+2:i=(t-r)/l+4,l/=s<.5?a+o:2-a-o,i*=60):l=s>0&&s<1?0:i,new It(i,l,s,e.opacity)}function _h(e,t,r,n){return arguments.length===1?Sh(e):new It(e,t,r,n??1)}function It(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}eo(It,_h,pa(dn,{brighter:function(e){return e=e==null?mn:Math.pow(mn,e),new It(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Sr:Math.pow(Sr,e),new It(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,o=2*r-n;return new Ne(Ou(e>=240?e-240:e+120,o,n),Ou(e,o,n),Ou(e<120?e+240:e-120,o,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function Ou(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}var Ah=Math.PI/180,Ch=180/Math.PI;var kh=-.14861,Ru=1.78277,Fu=-.29227,vl=-.90649,ga=1.97294,Mh=ga*vl,Th=ga*Ru,Vh=Ru*Fu-vl*kh;function o2(e){if(e instanceof pn)return new pn(e.h,e.s,e.l,e.opacity);e instanceof Ne||(e=Iu(e));var t=e.r/255,r=e.g/255,n=e.b/255,o=(Vh*n+Mh*t-Th*r)/(Vh+Mh-Th),a=n-o,i=(ga*(r-o)-Fu*a)/vl,l=Math.sqrt(i*i+a*a)/(ga*o*(1-o)),s=l?Math.atan2(i,a)*Ch-120:NaN;return new pn(s<0?s+360:s,l,o,e.opacity)}function Ie(e,t,r,n){return arguments.length===1?o2(e):new pn(e,t,r,n??1)}function pn(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}eo(pn,Ie,pa(dn,{brighter:function(e){return e=e==null?mn:Math.pow(mn,e),new pn(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Sr:Math.pow(Sr,e),new pn(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*Ah,t=+this.l,r=isNaN(this.s)?0:this.s*t*(1-t),n=Math.cos(e),o=Math.sin(e);return new Ne(255*(t+r*(kh*n+Ru*o)),255*(t+r*(Fu*n+vl*o)),255*(t+r*(ga*n)),this.opacity)}}));function $u(e,t,r,n,o){var a=e*e,i=a*e;return((1-3*e+3*a-i)*t+(4-6*a+3*i)*r+(1+3*e+3*a-3*i)*n+i*o)/6}function Dh(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),o=e[n],a=e[n+1],i=n>0?e[n-1]:2*o-a,l=n<t-1?e[n+2]:2*a-o;return $u((r-n/t)*t,i,o,a,l)}}function Nh(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),o=e[(n+t-1)%t],a=e[n%t],i=e[(n+1)%t],l=e[(n+2)%t];return $u((r-n/t)*t,o,a,i,l)}}function no(e){return function(){return e}}function Eh(e,t){return function(r){return e+r*t}}function a2(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function Ph(e,t){var r=t-e;return r?Eh(e,r>180||r<-180?r-360*Math.round(r/360):r):no(isNaN(e)?t:e)}function Lh(e){return(e=+e)==1?jt:function(t,r){return r-t?a2(t,r,e):no(isNaN(t)?r:t)}}function jt(e,t){var r=t-e;return r?Eh(e,r):no(isNaN(e)?t:e)}var Hu=function e(t){var r=Lh(t);function n(o,a){var i=r((o=ro(o)).r,(a=ro(a)).r),l=r(o.g,a.g),s=r(o.b,a.b),u=jt(o.opacity,a.opacity);return function(c){return o.r=i(c),o.g=l(c),o.b=s(c),o.opacity=u(c),o+""}}return n.gamma=e,n}(1);function zh(e){return function(t){var r=t.length,n=new Array(r),o=new Array(r),a=new Array(r),i,l;for(i=0;i<r;++i)l=ro(t[i]),n[i]=l.r||0,o[i]=l.g||0,a[i]=l.b||0;return n=e(n),o=e(o),a=e(a),l.opacity=1,function(s){return l.r=n(s),l.g=o(s),l.b=a(s),l+""}}}var cZ=zh(Dh),fZ=zh(Nh);function Bh(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),o;return function(a){for(o=0;o<r;++o)n[o]=e[o]*(1-a)+t[o]*a;return n}}function Oh(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ih(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,o=new Array(n),a=new Array(r),i;for(i=0;i<n;++i)o[i]=hn(e[i],t[i]);for(;i<r;++i)a[i]=t[i];return function(l){for(i=0;i<n;++i)a[i]=o[i](l);return a}}function Rh(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Ar(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Fh(e,t){var r={},n={},o;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(o in t)o in e?r[o]=hn(e[o],t[o]):n[o]=t[o];return function(a){for(o in r)n[o]=r[o](a);return n}}var Wu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Yu=new RegExp(Wu.source,"g");function i2(e){return function(){return e}}function l2(e){return function(t){return e(t)+""}}function $h(e,t){var r=Wu.lastIndex=Yu.lastIndex=0,n,o,a,i=-1,l=[],s=[];for(e=e+"",t=t+"";(n=Wu.exec(e))&&(o=Yu.exec(t));)(a=o.index)>r&&(a=t.slice(r,a),l[i]?l[i]+=a:l[++i]=a),(n=n[0])===(o=o[0])?l[i]?l[i]+=o:l[++i]=o:(l[++i]=null,s.push({i,x:Ar(n,o)})),r=Yu.lastIndex;return r<t.length&&(a=t.slice(r),l[i]?l[i]+=a:l[++i]=a),l.length<2?s[0]?l2(s[0].x):i2(t):(t=s.length,function(u){for(var c=0,m;c<t;++c)l[(m=s[c]).i]=m.x(u);return l.join("")})}function hn(e,t){var r=typeof t,n;return t==null||r==="boolean"?no(t):(r==="number"?Ar:r==="string"?(n=_r(t))?(t=n,Hu):$h:t instanceof _r?Hu:t instanceof Date?Rh:Oh(t)?Bh:Array.isArray(t)?Ih:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Fh:Ar)(e,t)}function qu(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Hh(e){return function t(r){r=+r;function n(o,a){var i=e((o=Ie(o)).h,(a=Ie(a)).h),l=jt(o.s,a.s),s=jt(o.l,a.l),u=jt(o.opacity,a.opacity);return function(c){return o.h=i(c),o.s=l(c),o.l=s(Math.pow(c,r)),o.opacity=u(c),o+""}}return n.gamma=t,n}(1)}var s2=Hh(Ph),oo=Hh(jt);function wl(e){return function(){return e}}function Gu(e){return+e}var Yh=[0,1];function Sl(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:wl(t)}function u2(e){return function(t,r){var n=e(t=+t,r=+r);return function(o){return o<=t?0:o>=r?1:n(o)}}}function c2(e){return function(t,r){var n=e(t=+t,r=+r);return function(o){return o<=0?t:o>=1?r:n(o)}}}function f2(e,t,r,n){var o=e[0],a=e[1],i=t[0],l=t[1];return a<o?(o=r(a,o),i=n(l,i)):(o=r(o,a),i=n(i,l)),function(s){return i(o(s))}}function m2(e,t,r,n){var o=Math.min(e.length,t.length)-1,a=new Array(o),i=new Array(o),l=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++l<o;)a[l]=r(e[l],e[l+1]),i[l]=n(t[l],t[l+1]);return function(s){var u=un(e,s,1,o)-1;return i[u](a[u](s))}}function xa(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp())}function ao(e,t){var r=Yh,n=Yh,o=hn,a=!1,i,l,s;function u(){return i=Math.min(r.length,n.length)>2?m2:f2,l=s=null,c}function c(m){return(l||(l=i(r,n,a?u2(e):e,o)))(+m)}return c.invert=function(m){return(s||(s=i(n,r,Sl,a?c2(t):t)))(+m)},c.domain=function(m){return arguments.length?(r=yl.call(m,Gu),u()):r.slice()},c.range=function(m){return arguments.length?(n=fn.call(m),u()):n.slice()},c.rangeRound=function(m){return n=fn.call(m),o=qu,u()},c.clamp=function(m){return arguments.length?(a=!!m,u()):a},c.interpolate=function(m){return arguments.length?(o=m,u()):o},u()}function Wh(e,t,r){var n=e[0],o=e[e.length-1],a=wr(n,o,t??10),i;switch(r=Ut(r??",f"),r.type){case"s":{var l=Math.max(Math.abs(n),Math.abs(o));return r.precision==null&&!isNaN(i=Du(a,l))&&(r.precision=i),Zn(r,l)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=Nu(a,Math.max(Math.abs(n),Math.abs(o))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=ku(a))&&(r.precision=i-(r.type==="%")*2);break}}return sn(r)}function ya(e){var t=e.domain;return e.ticks=function(r){var n=t();return hl(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){return Wh(t(),r,n)},e.nice=function(r){var n=t(),o=n.length-1,a=r??10,i=n[0],l=n[o],s=wr(i,l,a);return s&&(s=wr(Math.floor(i/s)*s,Math.ceil(l/s)*s,a),n[0]=Math.floor(i/s)*s,n[o]=Math.ceil(l/s)*s,t(n)),e},e}function io(){var e=ao(Sl,Ar);return e.copy=function(){return xa(e,io())},ya(e)}var p2=1e3,h2=p2*60,g2=h2*60,Uu=g2*24,Eee=Uu*7,Pee=Uu*30,Lee=Uu*365;function nt(e){return e.match(/.{6}/g).map(function(t){return"#"+t})}var x2=nt("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");var y2=nt("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6");var b2=nt("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9");var v2=nt("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");var w2=oo(Ie(300,.5,0),Ie(-240,.5,1));var S2=oo(Ie(-100,.75,.35),Ie(80,1.5,.8)),_2=oo(Ie(260,.75,.35),Ie(80,1.5,.8)),Zee=Ie();function _l(e){var t=e.length;return function(r){return e[Math.max(0,Math.min(t-1,Math.floor(r*t)))]}}var A2=_l(nt("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),C2=_l(nt("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),M2=_l(nt("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),T2=_l(nt("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Cr(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Xu(e){return e.length===1&&(e=V2(e)),{left:function(t,r,n,o){for(n==null&&(n=0),o==null&&(o=t.length);n<o;){var a=n+o>>>1;e(t[a],r)<0?n=a+1:o=a}return n},right:function(t,r,n,o){for(n==null&&(n=0),o==null&&(o=t.length);n<o;){var a=n+o>>>1;e(t[a],r)>0?o=a:n=a+1}return n}}}function V2(e){return function(t,r){return Cr(e(t),r)}}var qh=Xu(Cr),k2=qh.right,D2=qh.left;var Gh=Array.prototype,E2=Gh.slice,P2=Gh.map;var nre=Math.sqrt(50),ore=Math.sqrt(10),are=Math.sqrt(2);function Cl(e,t){var r=-1,n=e.length,o,a;if(t==null){for(;++r<n;)if((a=e[r])!=null&&a>=a){o=a;break}for(;++r<n;)(a=e[r])!=null&&a>o&&(o=a)}else{for(;++r<n;)if((a=t(e[r],r,e))!=null&&a>=a){o=a;break}for(;++r<n;)(a=t(e[r],r,e))!=null&&a>o&&(o=a)}return o}function Ml(e,t){var r=0,n=e.length,o,a=-1;if(t==null)for(;++a<n;)(o=+e[a])&&(r+=o);else for(;++a<n;)(o=+t(e[a],a,e))&&(r+=o);return r}var H2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Qh=function(t){return t},Xh=function(t){for(var r=[],n=0,o=t.length;n<o;n++)r[n]=t[o-n-1];return r},jh=function(t,r){t.each(function(){for(var n=Cu(this),o=n.text().split(/\s+/).reverse(),a,i=[],l=0,s=1.2,u=n.attr("y"),c=parseFloat(n.attr("dy"))||0,m=n.text(null).append("tspan").attr("x",0).attr("dy",c+"em");a=o.pop();)i.push(a),m.text(i.join(" ")),m.node().getComputedTextLength()>r&&i.length>1&&(i.pop(),m.text(i.join(" ")),i=[a],m=n.append("tspan").attr("x",0).attr("dy",s+c+"em").text(a))})},Y2=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=arguments[1],n=arguments[2],o=arguments[3],a=arguments[4];if((typeof r>"u"?"undefined":H2(r))==="object"){if(r.length===0)return t;for(var i=r.length;i<t.length;i++)r.push(t[i]);return r}else if(typeof r=="function"){for(var l=[],s=t.length,u=0;u<s;u++)l.push(r({i:u,genLength:s,generatedLabels:t,domain:n,range:o,labelDelimiter:a}));return l}return t},W2=function(t,r,n){var o=[];if(r.length>1)o=r;else for(var a=t.domain(),i=(a[a.length-1]-a[0])/(r-1),l=0;l<r;l++)o.push(a[0]+l*i);var s=o.map(n);return{data:o,labels:s,feature:function(c){return t(c)}}},q2=function(t,r,n){var o=t.range().map(function(a){var i=t.invertExtent(a);return r(i[0])+" "+n+" "+r(i[1])});return{data:t.range(),labels:o,feature:Qh}},G2=function(t){return{data:t.domain(),labels:t.domain(),feature:function(n){return t(n)}}},U2=function(t,r,n){t.call("cellover",n,r)},X2=function(t,r,n){t.call("cellout",n,r)},j2=function(t,r,n){t.call("cellclick",n,r)},he={d3_drawShapes:function(t,r,n,o,a,i){t==="rect"?r.attr("height",n).attr("width",o):t==="circle"?r.attr("r",a):t==="line"?r.attr("x1",0).attr("x2",o).attr("y1",0).attr("y2",0):t==="path"&&r.attr("d",i)},d3_addText:function(t,r,n,o,a){r.append("text").attr("class",o+"label");var i=t.selectAll("g."+o+"cell text."+o+"label").data(n).text(Qh);return a&&t.selectAll("g."+o+"cell text."+o+"label").call(jh,a),i},d3_calcType:function(t,r,n,o,a,i){var l=t.invertExtent?q2(t,a,i):t.ticks?W2(t,n,a):G2(t),s=t.range&&t.range()||t.domain();return l.labels=Y2(l.labels,o,t.domain(),s,i),r&&(l.labels=Xh(l.labels),l.data=Xh(l.data)),l},d3_filterCells:function(t,r){var n=t.data.map(function(i,l){return{data:i,label:t.labels[l]}}).filter(r),o=n.map(function(i){return i.data}),a=n.map(function(i){return i.label});return t.data=t.data.filter(function(i){return o.indexOf(i)!==-1}),t.labels=t.labels.filter(function(i){return a.indexOf(i)!==-1}),t},d3_placement:function(t,r,n,o,a,i){r.attr("transform",n),o.attr("transform",a),t==="horizontal"&&o.style("text-anchor",i)},d3_addEvents:function(t,r){t.on("mouseover.legend",function(n){U2(r,n,this)}).on("mouseout.legend",function(n){X2(r,n,this)}).on("click.legend",function(n){j2(r,n,this)})},d3_title:function(t,r,n,o){if(r!==""){var a=t.selectAll("text."+n+"legendTitle");a.data([r]).enter().append("text").attr("class",n+"legendTitle"),t.selectAll("text."+n+"legendTitle").text(r),o&&t.selectAll("text."+n+"legendTitle").call(jh,o);var i=t.select("."+n+"legendCells"),l=t.select("."+n+"legendTitle").nodes().map(function(u){return u.getBBox().height})[0],s=-i.nodes().map(function(u){return u.getBBox().x})[0];i.attr("transform","translate("+s+","+l+")")}},d3_defaultLocale:{format:sn,formatPrefix:Zn},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};function Tl(){var e=io(),t="rect",r=15,n=15,o=10,a=2,i=[5],l=void 0,s=[],u="",c=!1,m="",f=he.d3_defaultLocale,d=he.d3_defaultFormatSpecifier,p=10,h="middle",x=he.d3_defaultDelimiter,g=void 0,S="vertical",_=!1,v=void 0,b=void 0,y=ml("cellover","cellout","cellclick");function C(T){var R=he.d3_calcType(e,_,i,s,f.format(d),x),F=T.selectAll("g").data([e]);F.enter().append("g").attr("class",u+"legendCells"),l&&he.d3_filterCells(R,l);var E=T.select("."+u+"legendCells").selectAll("."+u+"cell").data(R.data),W=E.enter().append("g").attr("class",u+"cell");W.append(t).attr("class",u+"swatch");var P=T.selectAll("g."+u+"cell "+t+"."+u+"swatch").data(R.data);he.d3_addEvents(W,y),E.exit().transition().style("opacity",0).remove(),P.exit().transition().style("opacity",0).remove(),P=P.merge(P),he.d3_drawShapes(t,P,n,r,o,v);var w=he.d3_addText(T,W,R.labels,u,g);E=W.merge(E);var B=w.nodes().map(function(N){return N.getBBox()}),A=P.nodes().map(function(N){return N.getBBox()});c?P.attr("class",function(N){return u+"swatch "+R.feature(N)}):t=="line"?P.style("stroke",R.feature):P.style("fill",R.feature);var V=void 0,M=void 0,D=h=="start"?0:h=="middle"?.5:1;S==="vertical"?function(){var N=B.map(function(Y,q){return Math.max(Y.height,A[q].height)});V=function(q,k){var O=Ml(N.slice(0,k));return"translate(0, "+(O+k*a)+")"},M=function(q,k){return"translate( "+(A[k].width+A[k].x+p)+", "+(A[k].y+A[k].height/2+5)+")"}}():S==="horizontal"&&(V=function(Y,q){return"translate("+q*(A[q].width+a)+",0)"},M=function(Y,q){return"translate("+(A[q].width*D+A[q].x)+`,
          `+(A[q].height+A[q].y+p+8)+")"}),he.d3_placement(S,E,V,w,M,h),he.d3_title(T,m,u,b),E.transition().style("opacity",1)}return C.scale=function(T){return arguments.length?(e=T,C):e},C.cells=function(T){return arguments.length?((T.length>1||T>=2)&&(i=T),C):i},C.cellFilter=function(T){return arguments.length?(l=T,C):l},C.shape=function(T,R){return arguments.length?((T=="rect"||T=="circle"||T=="line"||T=="path"&&typeof R=="string")&&(t=T,v=R),C):t},C.shapeWidth=function(T){return arguments.length?(r=+T,C):r},C.shapeHeight=function(T){return arguments.length?(n=+T,C):n},C.shapeRadius=function(T){return arguments.length?(o=+T,C):o},C.shapePadding=function(T){return arguments.length?(a=+T,C):a},C.labels=function(T){return arguments.length?(s=T,C):s},C.labelAlign=function(T){return arguments.length?((T=="start"||T=="end"||T=="middle")&&(h=T),C):h},C.locale=function(T){return arguments.length?(f=Jn(T),C):f},C.labelFormat=function(T){return arguments.length?(d=Ut(T),C):C.locale().format(d)},C.labelOffset=function(T){return arguments.length?(p=+T,C):p},C.labelDelimiter=function(T){return arguments.length?(x=T,C):x},C.labelWrap=function(T){return arguments.length?(g=T,C):g},C.useClass=function(T){return arguments.length?((T===!0||T===!1)&&(c=T),C):c},C.orient=function(T){return arguments.length?(T=T.toLowerCase(),(T=="horizontal"||T=="vertical")&&(S=T),C):S},C.ascending=function(T){return arguments.length?(_=!!T,C):_},C.classPrefix=function(T){return arguments.length?(u=T,C):u},C.title=function(T){return arguments.length?(m=T,C):m},C.titleWidth=function(T){return arguments.length?(b=T,C):b},C.textWrap=function(T){return arguments.length?(textWrap=T,C):textWrap},C.on=function(){var T=y.on.apply(y,arguments);return T===y?C:T},C}function Kh(){var e=io(),t="path",r=15,n=15,o=10,a=5,i=[5],l=void 0,s=[],u="",c="",m=he.d3_defaultLocale,f=he.d3_defaultFormatSpecifier,d="middle",p=10,h=he.d3_defaultDelimiter,x=void 0,g="vertical",S=!1,_=void 0,v=ml("cellover","cellout","cellclick");function b(y){var C=he.d3_calcType(e,S,i,s,m.format(f),h),T=y.selectAll("g").data([e]);l&&he.d3_filterCells(C,l),T.enter().append("g").attr("class",u+"legendCells");var R=y.select("."+u+"legendCells").selectAll("."+u+"cell").data(C.data),F=R.enter().append("g").attr("class",u+"cell");F.append(t).attr("class",u+"swatch");var E=y.selectAll("g."+u+"cell "+t+"."+u+"swatch");he.d3_addEvents(F,v),R.exit().transition().style("opacity",0).remove(),E.exit().transition().style("opacity",0).remove(),E=E.merge(E),he.d3_drawShapes(t,E,n,r,o,C.feature);var W=he.d3_addText(y,F,C.labels,u,x);R=F.merge(R);var P=W.nodes().map(function(N){return N.getBBox()}),w=E.nodes().map(function(N){return N.getBBox()}),B=Cl(w,function(N){return N.height}),A=Cl(w,function(N){return N.width}),V=void 0,M=void 0,D=d=="start"?0:d=="middle"?.5:1;g==="vertical"?function(){var N=P.map(function(Y,q){return Math.max(B,Y.height)});V=function(q,k){var O=Ml(N.slice(0,k));return"translate(0, "+(O+k*a)+" )"},M=function(q,k){return"translate( "+(A+p)+`,
              `+(w[k].y+w[k].height/2+5)+")"}}():g==="horizontal"&&(V=function(Y,q){return"translate( "+q*(A+a)+",0)"},M=function(Y,q){return"translate( "+(w[q].width*D+w[q].x)+`,
              `+(B+p)+")"}),he.d3_placement(g,R,V,W,M,d),he.d3_title(y,c,u,_),R.transition().style("opacity",1)}return b.scale=function(y){return arguments.length?(e=y,b):e},b.cells=function(y){return arguments.length?((y.length>1||y>=2)&&(i=y),b):i},b.cellFilter=function(y){return arguments.length?(l=y,b):l},b.shapePadding=function(y){return arguments.length?(a=+y,b):a},b.labels=function(y){return arguments.length?(s=y,b):s},b.labelAlign=function(y){return arguments.length?((y=="start"||y=="end"||y=="middle")&&(d=y),b):d},b.locale=function(y){return arguments.length?(m=Jn(y),b):m},b.labelFormat=function(y){return arguments.length?(f=Ut(y),b):b.locale().format(f)},b.labelOffset=function(y){return arguments.length?(p=+y,b):p},b.labelDelimiter=function(y){return arguments.length?(h=y,b):h},b.labelWrap=function(y){return arguments.length?(x=y,b):x},b.orient=function(y){return arguments.length?(y=y.toLowerCase(),(y=="horizontal"||y=="vertical")&&(g=y),b):g},b.ascending=function(y){return arguments.length?(S=!!y,b):S},b.classPrefix=function(y){return arguments.length?(u=y,b):u},b.title=function(y){return arguments.length?(c=y,b):c},b.titleWidth=function(y){return arguments.length?(_=y,b):_},b.on=function(){var y=v.on.apply(v,arguments);return y===v?b:y},b}var Zh=`<span id="up-arrow">&#9650;</span>
<span id="page-text"></span>
<span id="down-arrow">&#9660;</span>
`;function eg(e){let t=e.select("g.legendCells"),r=e.node().getBoundingClientRect();if(!Lt(r,t.node().getBoundingClientRect()))return;let n=e.select(".legend");t.selectAll(".label").text((o,a,i)=>{let l=i[a];if(Lt(r,l.getBoundingClientRect())){let s=K2(l,n,r);return`${o.substring(0,s-3)}...`}else return o})}function K2(e,t,r){let n=e.getBoundingClientRect(),o=t.node().createSVGPoint(),a=3;return o.x=r.right-n.left-a,o.y=0,e.getCharNumAtPosition(o)}var gn=10;function Mr(e,t,r){let n=L(jn(e).getContainer()).node().getBoundingClientRect(),o=e.getBoundingClientRect(),a={top:o.top+r-gn,right:o.right+t+gn,bottom:o.bottom+r+gn,left:o.left+t-gn},i={x:t,y:r};return[{edge:"right",dimension:"x"},{edge:"left",dimension:"x"},{edge:"top",dimension:"y"},{edge:"bottom",dimension:"y"}].forEach(s=>{if(Lt(n,a,s.edge)){let u=a[s.edge]-n[s.edge];i[s.dimension]=i[s.dimension]-u}}),i}var ju="resize.for-dragging";function tg(){let e=!0,t=null,r=n=>{let o=n.node(),a=o.getRootNode().host.closest("perspective-viewer");o.style.cursor="move",t.legend&&(o.style.left=t.legend.left,o.style.top=t.legend.top);let i=Hn().on("drag",function(l){let s=Mr(this,l.dx,l.dy);this.style.left=`${this.offsetLeft+s.x}px`,this.style.top=`${this.offsetTop+s.y}px`;let u={left:this.style.left,top:this.style.top};t.legend={...t.legend,...u},e=e3(o)?Z2(o):J2(o,e)});i.on("end",function(l){L(window).on(ju,null),a?.dispatchEvent(new Event("perspective-config-update"))}),n.call(i)};return r.settings=(...n)=>n.length?(t=n[0],r):t,r}function J2(e,t){return t!==!1&&L(window).on(ju,function(){let r=Mr(e,0,0);e.style.left=`${e.offsetLeft+r.x}px`,e.style.top=`${e.offsetTop+r.y}px`}),!1}function Z2(e){return L(window).on(ju,null),e.style.left="auto",!0}function e3(e){let t=e.getBoundingClientRect(),r=L(yr(e)).node().getBoundingClientRect(),n=5;return t.right+gn+n>=r.right&&t.top-gn-n<=r.top}var rg="horizontal-drag-handle",ng="vertical-drag-handle",t3="corner-drag-handle",ag="dragHandles",og=0,Tr="resize";function ig(){let e=9,t=3,r=null,n={height:100,width:100},o={height:null,width:null},a=[],i=(c,m)=>a.filter(f=>f.event===c).forEach(f=>f.execute(m)),l=c=>{if(n3(c))return;let m={left:k=>i(Tr,{horizontal:B(k),vertical:!1}),top:k=>i(Tr,{horizontal:!1,vertical:V(k)}),right:k=>i(Tr,{horizontal:A(k),vertical:!1}),bottom:k=>i(Tr,{horizontal:!1,vertical:M(k)}),topleft:k=>i(Tr,{horizontal:B(k),vertical:V(k)}),topright:k=>i(Tr,{horizontal:A(k),vertical:V(k)}),bottomright:k=>i(Tr,{horizontal:A(k),vertical:M(k)}),bottomleft:k=>i(Tr,{horizontal:B(k),vertical:M(k)})},f=c.node();r.legend&&(f.style.height=r.legend.height,f.style.width=r.legend.width);let d=f.getBoundingClientRect(),p=c.append("svg").attr("id",ag).attr("width",d.width).attr("height",d.height),h=p.append("g"),x=k=>k==="left"||k==="right",g={left:0,top:e,right:d.width-e,bottom:e},S={left:e,top:0,right:e,bottom:d.height-e},_=["left","top","right","bottom"],[v,b,y,C]=_.map(k=>h.append("rect").attr("id",`drag${k}`).attr("class",x(k)?ng:rg).attr("y",S[k]).attr("x",g[k]).attr("height",x(k)?d.height-e*2:e).attr("width",x(k)?e:d.width-e*2).attr("fill",x(k)?"lightgreen":"lightblue").attr("fill-opacity",og).style("z-index",t).attr("cursor",x(k)?"ew-resize":"ns-resize").call(Hn().on("drag",m[k]))),T=k=>`${k[0]}${k[1]}`,R={topleft:"nwse",topright:"nesw",bottomright:"nwse",bottomleft:"nesw"},F=[["top","left"],["top","right"],["bottom","right"],["bottom","left"]],[E,W,P,w]=F.map(k=>h.append("rect").attr("id",`drag${T(k)}`).attr("class",`${t3} ${k[0]} ${k[1]}`).attr("height",e).attr("width",e).attr("fill","red").attr("fill-opacity",og).style("z-index",t).attr("cursor",`${R[T(k)]}-resize`).call(Hn().on("drag",m[T(k)])));q("height","y",C),q("width","x",y),Y(p);function B(k){let O=u(Mr(v.node(),k.x,0).x,p,"width",(G,X)=>G-X);return f.style.left=`${f.offsetLeft+O}px`,f.style.width=`${f.offsetWidth-O}px`,D(),N(y,O,"width","x")}function A(k){let O=-u(Mr(y.node(),k.dx,0).x,p,"width",(G,X)=>G+X);return s(O,"x",y,k)?!1:(f.style.width=`${f.offsetWidth-O}px`,D(),N(y,O,"width","x"))}function V(k){let O=u(Mr(b.node(),0,k.y).y,p,"height",(G,X)=>G-X);return f.style.top=`${f.offsetTop+O}px`,f.style.height=`${f.offsetHeight-O}px`,D(),N(C,O,"height","y")}function M(k){let O=-u(Mr(C.node(),0,k.dy).y,p,"height",(G,X)=>G+X);return s(O,"y",C,k)?!1:(f.style.height=`${f.offsetHeight-O}px`,D(),N(C,O,"height","y"))}function D(){let k={top:f.style.top,left:f.style.left,height:f.style.height,width:f.style.width};r.legend={...r.legend,...k}}function N(k,O,G,X){return a3(p,G,O),o3(k,X,O),r3(p,O,G,G==="height"?ng:rg),Y(p),O!=0}function Y(k){E.attr("y",0),W.attr("y",0).attr("x",k.attr("width")-e),P.attr("y",k.attr("height")-e).attr("x",k.attr("width")-e),w.attr("y",k.attr("height")-e).attr("x",0)}function q(k,O,G){!!o[k]&&o[k]<d[k]&&(f.style[k]=`${o[k]}px`,N(G,d[k]-o[k],k,O))}};l.on=(c,m)=>(a.push({event:c,execute:m}),l),l.zIndex=c=>(t=c,l),l.settings=(...c)=>c.length?(r=c[0],l):r,l.minWidth=c=>(n.width=c,o.width&&(o.width=Math.max(n.width,o.width)),l),l.minHeight=c=>(n.height=c,o.height&&(o.height=Math.max(n.height,o.height)),l),l.handleWidth=c=>(e=c,l),l.maxWidth=c=>(o.width=c,n.width=Math.min(n.width,o.width),l),l.maxHeight=c=>(o.height=c,n.height=Math.min(n.height,o.height),l);function s(c,m,f,d){let p=(x,g,S,_)=>x<0&&_[g]<Number(S.attr(g)),h=(x,g,S,_)=>x>0&&_[g]>Number(S.attr(g));return p(c,m,f,d)||h(c,m,f,d)}function u(c,m,f,d){let p=d(Number(m.attr(f)),c);if(p<n[f]){let h=n[f]-p;return d(c,h)}if(!!o[f]&&p>o[f]){let h=o[f]-p;return d(c,h)}return c}return l}var r3=(e,t,r,n)=>{e.selectAll(`.${n}`).each((a,i,l)=>{let s=l[i];L(s).attr(r,s.getBoundingClientRect()[r]-t)})},n3=e=>e.select(`#${ag}`).size()>0,o3=(e,t,r)=>e.attr(t,Number(e.attr(t))-r),a3=(e,t,r)=>e.attr(t,e.node().getBoundingClientRect()[t]-r);var lg=16,sg=20,Qu=(e,t)=>{let r=e||Tl(),n=[],o=1,a,i=t.legend&&t.legend.pageIndex?t.legend.pageIndex:0,l=()=>{},s=tg().settings(t),u,c=v=>{n=r.scale().domain(),u=ig().settings(t).maxHeight(n.length*lg+sg).on("resize",()=>m(v)),u(v),s(v),m(v)},m=v=>{x(v),f(v),d(v),eg(v)},f=v=>{let b=S(v);b.style("display",o<=1?"none":"block"),b.select("#page-text").text(`${i+1}/${o}`),b.select("#up-arrow").attr("class",i===0?"disabled":"").on("click",()=>{i>0&&(p(i-1),m(v))}),b.select("#down-arrow").attr("class",i>=o-1?"disabled":"").on("click",()=>{i<o-1&&(p(i+1),m(v))})},d=v=>{o>1&&r.cellFilter(h()),v.select("g.legendCells").remove();let b=_(v);b.call(r);let y=v.select("g.legendCells").node().getBBox();b.attr("height",y.height+sg),l(v)},p=v=>{i=v,t.legend={...t.legend,pageIndex:i}},h=()=>(v,b)=>b>=a*i&&b<a*i+a,x=v=>{let b=v.node().getBoundingClientRect(),y=Math.floor(b.height/lg)-1;a=y<n.length?y-1:y,o=g(y),i=Math.min(i,o-1)},g=v=>Math.ceil(n.length/v),S=v=>be(v,".legend-controls",()=>v.append("g").attr("class","legend-controls").html(Zh)),_=v=>be(v,".legend",()=>v.append("svg").attr("class","legend"));return c.decorate=(...v)=>v.length?(l=v[0],c):l,z(c,r),c};var ug=e=>Qu(Tl().shape("circle").shapeRadius(6),e),i3=e=>Qu(Kh().shapePadding(1).labelOffset(3),e),Ee=()=>Ku(ug),ba=()=>Ku(i3,fg),cg=()=>Ku(ug,fg);function fg(e){if(!e)return null;let t=e.domain(),r=e.range().map(n=>lr().type(n)());return mt().domain(t).range(r)}function Ku(e,t=void 0){let r={},n=null,o=null,a=i=>{if(n&&n.range().length>1){let l=e(r);l.scale(n).orient("vertical").on("cellclick",function(u){let c=this.__data__;r.hideKeys=r.hideKeys||[],r.hideKeys.includes(c)?r.hideKeys=r.hideKeys.filter(m=>m!==c):r.hideKeys.push(c),jn(this)._draw()}),l.labels(u=>{let c=String(u.domain[u.i]).split("|");return r.mainValues.length<=1&&c.length>1?c.slice(0,c.length-1).join("|"):u.domain[u.i]});let s=be(i,"div.legend-container",()=>i.append("div"));l.decorate(u=>{let c=f=>r.hideKeys&&r.hideKeys.includes(f),m=u.select("g.legendCells").attr("transform","translate(20,20)").selectAll("g.cell");m.classed("hidden",c),m.append("title").html(f=>f),o&&m.select("circle, path").style("fill",f=>c(f)?null:o(f)).style("stroke",f=>c(f)?null:Bt(o(f)))}),s.attr("class","legend-container").attr("borderbox-on-hover",!0).style("z-index","2").call(l)}};return a.settings=(...i)=>i.length===0?r:(r=i[0],a),a.scale=(...i)=>i.length?(n=t?t(i[0]):i[0],a):n,a.color=(...i)=>i.length?(o=i[0],a):o,a}function ft(e,t=void 0){let r=t||e.data;return(e.hideKeys?.length??0)>0?r.map(o=>{let a={...o};return e.hideKeys.forEach(i=>{delete a[i]}),a}):r}function lo(e){let t=e.data,r=e.hideKeys?.length??0,n=e.splitValues.length;return r>0?n===0?t.filter(o=>Object.values(o).reduce((a,i)=>a&&!e.hideKeys.includes(i),!0)):t.map(o=>{let a=Object.entries(o).filter(([i,l])=>!e.hideKeys.includes(vr(i)));return Object.fromEntries(a)}):t}var l3=e=>(t,r)=>t.style("stroke-width",n=>"1.0").style("stroke",n=>Ju(n,e));function Ju(e,t){return e===0?t?t.textStyles.color:"#666":t?t.colorStyles.grid.gridLineColor:"#bbb"}var s3=e=>(t,r)=>{t.strokeStyle=Ju(r,e),t.lineWidth=1},u3=(e,t)=>e.style("display","none"),c3=e=>(t,r)=>{t.lineWidth=1,t.strokeStyle=Ju(r,e)},we=(e,t)=>{let r="both",n=!1,o=null,a=null,i=null,l=Ue(),s=Gs(),u=l3(t),c=u3,m=function(...f){n&&(l=wt().context(i),s=Us(),u=s3(t),c=c3(t));let d=l.xScale(o).yScale(a),p=r==="vertical"?c:u,h=r==="horizontal"?c:u,x=s.xDecorate(p).yDecorate(h);return d.series([x,e])(...f)};return m.orient=(...f)=>f.length?(r=f[0],m):r,m.canvas=(...f)=>f.length?(n=f[0],m):n,m.xScale=(...f)=>f.length?(o=f[0],m):o,m.yScale=(...f)=>f.length?(a=f[0],m):a,m.context=(...f)=>f.length?(i=f[0],m):i,m};var Pe=()=>{let e=ji(),t=r=>{let n=e.pad(),o=e.padUnit(),a=1;switch(o){case"domain":break;case"percent":{a=r[1]-r[0];break}default:throw new Error("Unknown padUnit: "+o)}let i=r[0]-n[0]*a,l=r[1]+n[1]*a;return r[0]=r[0]>=0&&i<0?0:i,r[1]=r[1]<=0&&l>0?0:l,r};return t.pad=function(...r){return e.pad()},t.padUnit=function(...r){return e.padUnit()},z(t,e),t};var mg=`<button id="zoom-reset">Reset zoom</button>
<button id="one-year">1 Year</button>
<button id="six-months">6 Months</button>
<button id="one-month">1 Month</button>
`;var Se=()=>{let e=null,t=null,r=null,n=null,o=null,a=null,i=!1,l=!1,s=()=>{};function u(d){let p=`d3fc-${l?"canvas":"svg"}.plot-area`;if(r||o){let h=n&&n.domain()[0]instanceof Date,x=qi().on("zoom",S=>{let{transform:_}=S;t.zoom={k:_.k,x:_.x,y:_.y},c(_),d.call(e);let v=_.k===1&&_.x===0&&_.y===0,b=m(d).style("display",v?"none":"");b.select("#zoom-reset").on("click",()=>d.select(p).call(x.transform,Pt));let y=b.select("#one-year").style("display",h?"":"none"),C=b.select("#six-months").style("display",h?"":"none"),T=b.select("#one-month").style("display",h?"":"none");if(h){let R=F=>()=>{let E=new Date(r.domain()[0]),W=new Date(E);F(E,W);let P=n.range(),w=(P[1]-P[0])/(n(W)-n(E)),B=-n(E)*w,A=0;if(o){let V=o.domain().reduce((M,D)=>M+D)/2;A=-a(V)*w+o(V)}d.select(p).call(x.transform,Pt.translate(B,A).scale(w))};y.on("click",R((F,E)=>E.setYear(F.getFullYear()+1))),C.on("click",R((F,E)=>E.setMonth(F.getMonth()+6))),T.on("click",R((F,E)=>E.setMonth(F.getMonth()+1)))}}),g=e.decorate();e.decorate((S,_)=>{if(g(S,_),!i){i=!0;let v=S.select(p),b=l?window.devicePixelRatio:1;v.on("measure.zoom-range",y=>{if(n&&n.range([0,y.detail.width/b]),a&&a.range([0,y.detail.height/b]),t.zoom){let C=Pt.translate(t.zoom.x,t.zoom.y).scale(t.zoom.k);v.call(x.transform,C)}}).call(x)}})}d.call(e)}u.chart=(...d)=>d.length?(e=d[0],u):e,u.settings=(...d)=>d.length?(t=d[0],u):t,u.xScale=(...d)=>d.length?(r=f(d[0]),n=r?r.copy():null,u):r,u.yScale=(...d)=>{if(!d.length)return o;if(o=f(d[0]),a=o?o.copy():null,a){let p=a.domain();a.domain([p[1],p[0]])}return u},u.canvas=(...d)=>d.length?(l=d[0],u):l,u.onChange=(...d)=>d.length?(s=d[0],u):s;let c=d=>{let p={...d};if(r&&(r.domain(d.rescaleX(n).domain()),p.xDomain=r.domain()),o){let h=d.rescaleY(a).domain();o.domain([h[1],h[0]]),p.yDomain=o.domain()}s(p)},m=d=>be(d,".zoom-controls",()=>d.append("div").attr("class","zoom-controls").style("display","none").html(mg)),f=d=>d&&d.nice?d:null;return u};function dg(e,t){let r=ol(t,ft(t)),n=zt(t),o=Ee().settings(t).scale(n),a=rl(t,n).orient("horizontal"),i=Ue().mapping((m,f)=>m[f]).series(r.map(()=>a)),l=ae(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[0]).excludeType(re.ordinal).include([0]).paddingStrategy(Pe())(r),s=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue").orient("vertical")(r),u=ut(l,s).plotArea(we(i,t).orient("horizontal"));u.yPaddingInner&&(u.yPaddingInner(.5),u.yPaddingOuter(.25),a.align("left")),u.xNice&&u.xNice();let c=Se().chart(u).settings(t).yScale(s.scale);e.datum(r).call(c),e.call(o)}dg.plugin={name:"X Bar",category:"X Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["X Axis"]}};var pg=dg;var yg=(e,t)=>{if(!hg(e)||!hg(t))return;let r=gg(e),n=gg(t);r>n?t[0]=xg(t,r):e[0]=xg(e,n)},hg=e=>e.length===2&&!isNaN(e[0])&&!isNaN(e[1])&&e[0]!==e[1],gg=e=>(0-e[0])/(e[1]-e[0]),xg=(e,t)=>t*e[1]/(t-1);var bg=e=>{let t=[],r=!1,n,o=i=>{i.text("");let l=U("span","splitter-label").key(c=>c),s=!r&&t.length===1,u=n&&e.splitValues.length===0;l(i,t).classed("disabled",s).text(c=>c.name).style("color",c=>u?Bt(n(c.name)):void 0).on("click",(c,m)=>{s||(r?e.splitMainValues=e.splitMainValues.filter(f=>f!=m.name):e.splitMainValues=[m.name].concat(e.splitMainValues||[]),c.target.getRootNode().host.closest("perspective-viewer")?.dispatchEvent(new Event("perspective-config-update")),a(i))})},a=i=>{let l=jn(i.node());l._container.innerHTML="",l._draw()};return o.labels=(...i)=>i.length?(t=i[0],o):t,o.alt=(...i)=>i.length?(r=i[0],o):r,o.color=(...i)=>i.length?(n=i[0],o):n,o};var Vr=(e,t,r=m3)=>{let n,o,a,i=e.splitMainValues||[],l=c=>{let m=c.split("|");return i.includes(m[m.length-1])},s=e.mainValues.some(c=>l(c.name));o=s?r(t,c=>!l(c)):t,a=s?r(t,l):null;let u=c=>{if(e.mainValues.length===1)return;let m=e.mainValues.map((h,x)=>({index:x,name:h.name})),f=m.filter(h=>!l(h.name)),d=m.filter(h=>l(h.name)),p=()=>bg(e).color(n);c.select(".y-label.left-label").call(p().labels(f)),c.select(".y-label.right-label").call(p().labels(d).alt(!0))};return u.color=(...c)=>c.length?(n=c[0],u):n,u.haveSplit=()=>s,u.data=(...c)=>c.length?(o=c[0],u):o,u.altData=(...c)=>c.length?(a=c[0],u):a,u},m3=(e,t)=>e.map(r=>r.filter(n=>t(n.key))),Zu=(e,t)=>e.map(r=>t(r.key)?r:r.map(n=>Object.assign({},n,{mainValue:null}))),vg=(e,t)=>e.map(r=>Zu(r,t));function wg(e,t){let r=ol(t,ft(t)),n=zt(t),o=Ee().settings(t).scale(n),a=rl(t,n).orient("vertical"),i=Ue().mapping((h,x)=>h[x]).series(r.map(()=>a)),l=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),s=ae(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(re.ordinal).orient("vertical").include([0]).paddingStrategy(Pe()),u=t.mainValues.length>1?vg:Zu,c=Vr(t,r,u).color(n),m=s(c.data()),f=c.haveSplit()?i:we(i,t).orient("vertical"),d=ut(l,m).axisSplitter(c).plotArea(f);d.xPaddingInner&&(d.xPaddingInner(.5),d.xPaddingOuter(.25),a.align("left")),d.yNice&&d.yNice();let p=Se().chart(d).settings(t).xScale(l.scale);if(c.haveSplit()){let h=s(c.altData());yg(m.domain,h.domain),d.yDomain(m.domain).altAxis(h)}e.datum(c.data()).call(p),e.call(o)}wg.plugin={name:"Y Bar",category:"Y Chart",max_cells:1e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Sg=wg;function so(e,t){let r=jr(),n=e.data.length*(e.data?.length>0?Object.keys(e.data[0]).length-(e.crossValues?.length>0?1:0):0),o=Math.max(1,Math.min(3,Math.floor(e.size.width/n/2)));return r=r.decorate(a=>{a.style("stroke",i=>Bt(t(i[0]&&i[0].key))).style("stroke-width",o)}),r.crossValue(a=>a.crossValue).mainValue(a=>a.mainValue)}function _g(e,t){let r=ct(e);return t.map((n,o)=>Object.keys(n).filter(a=>a!=="__ROW_PATH__").map(a=>({key:a,crossValue:r(n,o),mainValue:n[a],row:n})))}var Vl=function(e){let t=[];for(let r of e)for(let n=0;n<r.length;n++)r[n].mainValue!==null&&(t[n]=t[n]||[],t[n].push(r[n]));return t};var ec=(e,t,r=Math.min)=>{let n=i=>i.reduce((l,s)=>{let u=o(s);return u&&(!l||r(l.value,u.value)===u.value)?u:l},null),o=i=>{if(Array.isArray(i))return n(i);let l=t(i);return l!==null?{item:i,value:l}:null},a=n(e);return a?a.item:null};var je=()=>{let e=br().alwaysShow(!0),t=null,r=null,n=null,o=null,a=!1,i=null,l="crossValue",s="mainValue",u=null,c=1,m=p=>{let h=`d3fc-${a?"canvas":"svg"}.plot-area`;if(t||r){let x=null,g=eu().on("point",S=>{let _=S.length?d(S[0]):null;x=_?[_.data]:[];let v=_?_.scale:r;f(p,x,v)});p.select(h).on("measure.nearbyTip",()=>f(p,[])).on("click",()=>{x.length&&ia(p.node(),x[0],e.settings())}).call(g)}},f=(p,h,x=r)=>{let g=p.select("d3fc-svg.plot-area svg").selectAll("circle.nearbyTip").data(h);g.exit().remove(),g.enter().append("circle").attr("class","nearbyTip").merge(g).attr("r",S=>o?c*Math.sqrt(o(S.size)):10).attr("transform",S=>`translate(${t(S[l])},${x(S[s])})`).style("stroke","none").style("fill",S=>n&&S.key&&nn(n(S.key))),e(g)},d=p=>{let h=S=>_=>_[s]===void 0||_[s]===null||_[l]===void 0||_[l]===null?null:Math.sqrt(Math.pow(t(_[l])-p.x,2)+Math.pow(S(_[s])-p.y,2)),x=h(r),g=ec(i,x,Math.min);if(u){let S=h(u.yScale),_=ec(u.data,S,Math.min);return x(g)<=S(_)?{data:g,scale:r}:{data:_,scale:u.yScale}}return{data:g,scale:r}};return m.scaleFactor=(...p)=>p.length?(c=p[0],m):c,m.xScale=(...p)=>p.length?(t=p[0],m):t,m.yScale=(...p)=>p.length?(r=p[0],m):r,m.color=(...p)=>p.length?(n=p[0],m):n,m.size=(...p)=>p.length?(o=p[0]?p[0].copy().range([40,4e3]):null,m):o,m.canvas=(...p)=>p.length?(a=p[0],m):a,m.data=(...p)=>p.length?(i=p[0],m):i,m.xValueName=(...p)=>p.length?(l=p[0],m):l,m.yValueName=(...p)=>p.length?(s=p[0],m):s,m.altDataWithScale=(...p)=>p.length?(u=p[0],m):u,m.settings=(...p)=>p.length?(e.settings(p[0]),m):e.settings(),z(m,e),m};function Ag(e,t){let r=_g(t,ft(t)),n=zt(t),o=Ee().settings(t).scale(n),a=fr().series(so(t,n)).orient("horizontal"),i=Pe().pad([.1,.1]).padUnit("percent"),l=Vr(t,Vl(r)).color(n),s=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),u=ae(t).settingName("mainValues").valueName("mainValue").memoValue(l.haveSplit()?null:t.axisMemo[0]).orient("vertical").paddingStrategy(i),c=u(l.data()),m=l.haveSplit()?a:we(a,t).orient("vertical"),f=ut(s,c).axisSplitter(l).plotArea(m);f.yNice&&f.yNice();let d=Se().chart(f).settings(t).xScale(s.scale),p=je().settings(t).xScale(s.scale).yScale(c.scale).color(n).data(r);if(l.haveSplit()){let x=u(l.altData());f.altAxis(x),p.data(l.data()).altDataWithScale({yScale:x.scale,data:l.altData()})}let h=l.data();e.datum(h).call(d),e.call(p),e.call(o)}Ag.plugin={name:"Y Line",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Cg=Ag;var tc=Math.sqrt(3),d3={draw:function(e,t){let r=Math.sqrt(t/(tc*3));e.moveTo(0,r*2),e.lineTo(-tc*r,-r),e.lineTo(tc*r,-r),e.closePath()}},p3=[ir,li,si,ui,ci,fi,mi],rc={circle:ir,square:ui,cross:li,diamond:si,star:ci,triangle:fi,wye:mi,nabla:d3};function va(e){return e.length>1?mt().domain(e).range(p3):null}var h3=8,g3=1;function Mg(e,t,r,n,o,a,i=1){let l=pi().crossValue(s=>s.x).mainValue(s=>s.y);return a&&l.type(s=>a(s.row[t])),r&&l.size(s=>Math.round(i*r(s.size))),l.decorate((s,u)=>{let c=n(u.colorValue),m=e.colorStyles?.opacity;if(o){let{type:f}=e.mainValues.find(p=>p.name===o),d=Gt(f,u.row[o]);if(d!==null){s.fillStyle=e.textStyles.color,s.font=e.textStyles.font;let p=0;r&&(p=Math.sqrt(i*r(u.size)/Math.PI)*g3);let h=p+h3;s.fillText(d,h,4)}}s.strokeStyle=Bt(c),s.fillStyle=nn(c,m)}),l}function Tg(e,t){let r=[...new Set(nl(e,t))];return va(r)}function Vg(e){let t=e.data&&e.data.length>0?e.data[0]:{},r=[];return Object.keys(t).forEach(n=>{if(n!=="__ROW_PATH__"){let o=vr(n);r.includes(o)||r.push(o)}}),va(r)}function kg(e,t){let r=e.mainValues.length;return t.map(n=>{let o=Object.keys(n).filter(i=>i!=="__ROW_PATH__"),a=new Array(o.length/r);for(let i=0;i<o.length/r;i++)a[i]={key:vr(o[i*r]),crossValue:n[o[i*r]],mainValue:n[o[i*r+1]],row:n};return a})}function Dg(e,t){let r=Vl(kg(t,lo(t))),n=up(t),o=Vg(t),a=null;n.domain().length>=2&&(a=cg().settings(t).scale(o).color(n));let i=fr().series(so(t,n)).orient("horizontal"),l=Pe().pad([.1,.1]).padUnit("percent"),s=ae(t).settingName("mainValues").settingValue(t.mainValues[0].name).valueName("crossValue").memoValue(t.axisMemo[0]).paddingStrategy(l),c=ae(t).settingName("mainValues").settingValue(t.mainValues[1].name).valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(l)(r),m=s(r),f=we(i,t).orient("vertical"),d=ut(m,c).xLabel(t.mainValues[0].name).yLabel(t.mainValues[1].name).plotArea(f);d.xNice&&d.xNice(),d.yNice&&d.yNice();let p=Se().chart(d).settings(t).xScale(m.scale).yScale(c.scale),h=je().settings(t).xScale(m.scale).yScale(c.scale).color(n).data(r);e.datum(r).call(p),e.call(h),a&&e.call(a)}Dg.plugin={name:"X/Y Line",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Tooltip"]},selectMode:"toggle"};var Ng=Dg;function Eg(e,t){let r=Bs();return r=r.decorate(n=>{n.style("fill",o=>t(o[0].key)).style("opacity",.5)}),r.crossValue(n=>n.crossValue).mainValue(n=>n.mainValue).baseValue(n=>n.baseValue)}function Pg(e,t){let r=ct(e);return t.map((n,o)=>{let a={};return Object.keys(n).filter(i=>i!=="__ROW_PATH__").map(i=>{let l=i.split("|"),s=l[l.length-1],u=a[s]||0,c=u+n[i];return a[s]=c,{key:i,crossValue:r(n,o),mainValue:c,baseValue:u,row:n}})})}function Lg(e,t){let r=Pg(t,ft(t)),n=zt(t),o=Ee().settings(t).scale(n),a=fr().series(Eg(t,n).orient("vertical")),i=fr().series(so(t,n)).orient("vertical"),l=Ue().series([a,i]),s=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),u=ae(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).excludeType(re.ordinal).orient("vertical").include([0]).paddingStrategy(Pe()),c=Vr(t,r).color(n),m=u(c.data()),f=c.haveSplit()?l:we(l,t).orient("vertical"),d=ut(s,m).axisSplitter(c).plotArea(f);d.yNice&&d.yNice();let p=Se().chart(d).settings(t).xScale(s.scale),h=je().settings(t).xScale(s.scale).yScale(m.scale).color(n).data(r);if(c.haveSplit()){let x=u(c.altData());d.altAxis(x),h.data(c.data()).altDataWithScale({yScale:x.scale,data:c.altData()})}e.datum(c.data()).call(p),e.call(h),e.call(o)}Lg.plugin={name:"Y Area",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var zg=Lg;function Bg(e,t,r,n){let o=Bn().size(100),a=e.colorStyles&&e.colorStyles.opacity;return n&&o.type(n(t)),o.decorate(i=>{i.style("stroke",l=>Bt(r(l.colorValue||t))).style("fill",l=>nn(r(l.colorValue||t),a))}),o.crossValue(i=>i.crossValue).mainValue(i=>i.mainValue)}function Og(e){let t=e.data&&e.data.length>0?e.data[0]:{},r=Object.keys(t).filter(n=>n!=="__ROW_PATH__");return va(r)}function Ig(e,t){let r=cp(t,ft(t)),n=Og(t),o=zt(t),a=ba().settings(t).scale(n).color(o),i=Ue().mapping((x,g)=>x[g]).series(r.map(x=>Bg(t,x.key,o,n))),l=Pe().pad([.05,.05]).padUnit("percent"),s=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),u=ae(t).settingName("mainValues").valueName("mainValue").memoValue(t.axisMemo[1]).orient("vertical").paddingStrategy(l),c=Vr(t,r).color(o),m=u(c.data()),f=c.haveSplit()?i:we(i,t).orient("vertical"),d=ut(s,m).axisSplitter(c).plotArea(f);d.yNice&&d.yNice();let p=Se().chart(d).settings(t).xScale(s.scale),h=je().settings(t).xScale(s.scale).yScale(m.scale).color(o).data(r);if(c.haveSplit()){let x=u(c.altData());d.altAxis(x),h.data(c.data()).altDataWithScale({yScale:x.scale,data:c.altData()})}e.datum(c.data()).call(p),e.call(h),a&&e.call(a)}Ig.plugin={name:"Y Scatter",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{names:["Y Axis"]}};var Rg=Ig;function Fg(e,t){return an(e,t,{excludeEmpty:!0}).map(r=>x3(e,r))}function x3(e,t){let r=ct(e),n=t.map((o,a)=>({crossValue:r(o,a),mainValues:e.mainValues.map(i=>o[i.name]),x:o[e.mainValues[0].name],y:o[e.mainValues[1].name],colorValue:e.realValues[2]?o[e.realValues[2]]:void 0,size:e.realValues[3]?o[e.realValues[3]]:void 0,key:t.key,row:o}));return n.key=t.key,n}function $g(e,t,r,n){return ke().domain(Hg(t,r,n))}function kr(e,t,r,n=null){let o=Hg(t,r,n),a=e.colorStyles.gradient.full;if(o[0]>=0)a=e.colorStyles.gradient.positive;else if(o[1]<=0)a=e.colorStyles.gradient.negative;else{let l=Math.max(-o[0],o[1]);o=[-l,l]}let i=y3(a);return ko(i).domain(o)}var Hg=(e,t,r)=>r||mu().valueName(t).pad([0,0])(e),y3=e=>{let t=e.slice(1).map((r,n)=>Ve(e[n][1],r[1]));return r=>{let n=e.findIndex((l,s)=>s<e.length-1&&r<=e[s+1][0]&&r>l[0]);if(n===-1)return r<=e[0][0]?e[0][1]:e[e.length-1][1];let o=t[n],[a]=e[n],[i]=e[n+1];return o((r-a)/(i-a))}};function Dr(){let e=null;function t(r){let n=be(r,"div.legend-container",()=>r.append("div").attr("class","legend-container legend-color").style("z-index","2")),{width:o,height:a}=n.node().getBoundingClientRect(),i=dt().domain([0,1]).range([0,o]),l=e.copy().nice().domain(),s=Do().pad([.1,.1]).padUnit("percent")(l),[u,c]=s,m=Kt(u,c,(c-u)/a),f=ke().domain(s).range([a,0]),d=Jr(On()).xScale(i).yScale(f).crossValue(0).baseValue((b,y)=>m[Math.max(0,y-1)]).mainValue(b=>b).decorate(b=>{b.selectAll("path").style("fill",y=>e(y))}),p=l[0]<0&&l[1]>0?0:Math.round((l[1]+l[0])/2),h=[...l,p],x=Qi(u,c),g=mr(f).tickValues(h).tickSizeOuter(0).tickFormat(b=>x(b)),S=be(n,"svg",()=>n.append("svg")).style("width",o).style("height",a),_=be(S,"g",()=>S.append("g")).datum(m).call(d),v=Math.abs(_.node().getBBox().x);be(S,"#legend-axis",()=>S.append("g").attr("id","legend-axis")).attr("transform",`translate(${v})`).datum(m).call(g).select(".domain").attr("visibility","hidden")}return t.scale=(...r)=>r.length?(e=r[0],t):e,t}function uo(){let e="element-prefix-unset",t=null,r=null,n=null,o=null,a=null,i=null,l=!0,s=null,u=c=>{let m=be(c,"div.outer-container",()=>c.append("div").attr("class","outer-container").style("width",`calc(100% - ${s??0})`).style("height",`calc(100% - ${s??0})`).style("padding-left",s??0)),f=be(m,"div.inner-container",()=>m.append("div").attr("class","inner-container")),d=m.node().getBoundingClientRect(),p=d.height,h=d.width-(a?70:0),x=300,g=c.datum(),S=Math.max(1,Math.min(g.length,Math.floor(h/x))),_=Math.ceil(g.length/S);i={width:h/Math.max(S,1),height:Math.min(p,Math.max(p/_,h/Math.max(S,1)))},p/_>i.height*.75&&(i.height=p/_),g.length>1?(f.style("grid-template-columns",`repeat(${S}, ${100/S}%)`),f.style("grid-template-rows",`repeat(${_}, ${i.height}px)`)):(f.style("grid-template-columns","repeat(1, 100%)"),f.style("grid-template-rows","repeat(1, 100%)")),n=f.selectAll(`div.${e}-container`).data(g,v=>v.split),n.exit().remove(),r=n.enter().append("div").attr("class",`${e}-container`),o=r.append("div").attr("class","title-container").style("text-align","center").attr("display","inline-block").append("text").attr("class","title").style("text-align","left"),l?t=r.append("svg").append("g").attr("class",e):t=r.append("div").attr("class",e)};return u.padding=(...c)=>c.length?(s=c[0],u):s,u.svg=(...c)=>c.length?(l=c[0],u):l,u.elementsPrefix=(...c)=>c.length?(e=c[0],u):e,u.chartContainer=()=>t,u.chartEnter=()=>r,u.chartDiv=()=>n,u.chartTitle=()=>o,u.containerSize=()=>i,u}function b3([e,t],[r,n]){let o=(n-t)/(r-e),a=n-o*r;return function(i){let l=i.node(),s=Math.min(l.clientWidth,l.clientHeight);return Math.min(n,Math.max(t,o*s+a))}}function kl(){let e=null,t=null,r=null,n=null,o=a=>{let l=!!e.realValues[2],s=e.realValues[4],u=e.realValues[3]?$g(e,t,"size").range([10,1e4]):null,c=e.realValues[5],m=b3([600,.1],[1600,1])(a),f=wt().mapping((b,y)=>b[y]).series(t.map(()=>Mg(e,s,u,r,c,n,m))),d=()=>ae(e).settingName("mainValues").paddingStrategy(Pe()).pad([.1,.1]),p=d().settingValue(e.mainValues[0].name).memoValue(e.axisMemo[0]).valueName("x")(t),h=d().orient("vertical").settingValue(e.mainValues[1].name).memoValue(e.axisMemo[1]).valueName("y")(t),[x,g]=e.splitValues.length===0?[e.mainValues[0].name,e.mainValues[1].name]:["",""],S=Qn(p,h).xLabel(x).yLabel(g).plotArea(we(f,e).canvas(!0));S.xNice&&S.xNice(),S.yNice&&S.yNice();let _=Se().chart(S).settings(e).xScale(p.scale).yScale(h.scale).canvas(!0),v=je().scaleFactor(m).settings(e).canvas(!0).xScale(p.scale).xValueName("x").yValueName("y").yScale(h.scale).color(!l&&r).size(u).data(t);a.datum(t).call(_),a.call(v)};return o.settings=(...a)=>a.length?(e=a[0],o):e,o.data=(...a)=>a.length?(t=a[0],o):t,o.color=(...a)=>a.length?(r=a[0],o):r,o.symbols=(...a)=>a.length?(n=a[0],o):n,o}function v3(e,t){if(!t)return;let r=e.realValues[4],n=e.mainValues.find(s=>s.name===r)?.type,o=t.domain(),a=t.range(),i=a.length;for(let[s,u]of o.entries())a[s]=a[s%i];let l=e.columns_config?.[r]?.symbols??{};return Object.entries(l).forEach(([s,u])=>{let c=rc[u]??ir,m=o.findIndex(f=>{switch(n){case"date":case"datetime":return new Date(f).valueOf()===new Date(s).valueOf();default:return String(f)===String(s)}});a[m]=c}),t.range(a),t}function Dl(e,t){let r=t.realValues[2],n=!!r,o=t.mainValues.find(m=>m.name===r)?.type==="string",a=null,i=null,l=t.realValues[4],s=Tg(t,l),u=v3(t,s),c=Fg(t,lo(t));if(n&&o?l?(t.splitValues.length>0?a=rn(t,c):a=rn(t,c[0]),i=ba().settings(t).scale(u)):(a=sp(t,r),i=Ee().settings(t).scale(a)):n?(a=kr(t,c,"colorValue"),i=Dr().scale(a)):(a=_t().settings(t).domain([""])(),i=ba().settings(t).scale(u)),t.splitValues.length!==0){let m=uo().svg(!1).elementsPrefix("xy-scatter");m=m.padding("2.5em"),e.append("div").attr("class","multi-xlabel").append("p").text(t.mainValues[0].name),e.append("div").attr("class","multi-ylabel").append("p").text(t.mainValues[1].name).style("transform","rotate(-90deg)").style("text-wrap","nowrap"),e=e.datum(c),e.call(m);let p=m.chartContainer(),h=m.chartEnter(),x=m.chartDiv(),g=m.chartTitle(),S=m.containerSize();g.each((_,v,b)=>L(b[v]).text(_.key)),h.merge(x).attr("transform",`translate(${S.width/2}, ${S.height/2})`).each(function(_){let v=L(this);kl().settings(t).data([_]).color(a).symbols(u)(v)})}else kl().settings(t).data(c).color(a).symbols(u)(e);i&&e.call(i)}Dl.plugin={name:"X/Y Scatter",category:"X/Y Chart",max_cells:5e4,max_columns:50,render_warning:!0,initial:{type:"number",count:2,names:["X Axis","Y Axis","Color","Size","Symbol","Label","Tooltip"]},selectMode:"toggle"};Dl.can_render_column_styles=(e,t)=>e==="string"&&t==="Symbol";Dl.column_style_controls=(e,t)=>e==="string"&&t==="Symbol"?{symbols:{keys:"row",values:Object.keys(rc)}}:null;var Yg=Dl;function Wg(e,t){let r=Ws();return r.decorate((n,o)=>{n.fillStyle=t(o.colorValue)}),Jr(r).xValue(n=>n.crossValue).yValue(n=>n.mainValue).colorValue(n=>n.colorValue).colorInterpolate(t.interpolator()).widthFraction(1)}function qg(e,t){let r=ct(e),n=Gn(e).excludeType(re.linear).settingName("splitValues")(),o=[];return t.forEach((a,i)=>{let l=r(a,i);Object.keys(a).filter(s=>s!=="__ROW_PATH__").forEach(s=>{let u=w3(s);o.push({crossValue:l,mainValue:n===re.time?new Date(u):u,colorValue:a[s],row:a})})}),o}function w3(e){let t=e.split("|");return t.pop(),t.join("|")}function Gg(e,t){let r=qg(t,ft(t)),n=kr(t,r,"colorValue"),o=Wg(t,n),a=Dr().scale(n),i=ae(t).excludeType(re.linear).settingName("crossValues").valueName("crossValue")(r),l=ae(t).excludeType(re.linear).settingName("splitValues").valueName("mainValue").modifyDomain(m=>!isNaN(m[0])?m.reverse():m).orient("vertical")(r),s=Qn(i,l).plotArea(we(o,t).canvas(!0));s.xPaddingInner&&(s.xPaddingInner(0),s.xPaddingOuter(0),o.xAlign("right")),s.yPaddingInner&&(s.yPaddingInner(0),s.yPaddingOuter(0),o.yAlign("top"));let u=Se().chart(s).settings(t).xScale(i.scale).yScale(l.scale).canvas(!0),c=je().settings(t).canvas(!0).xScale(i.scale).yScale(l.scale).color(n).data(r);e.datum(r).call(u),e.call(a),e.call(c)}Gg.plugin={name:"Heatmap",category:"Hierarchial Chart",max_cells:5e4,max_columns:500,render_warning:!0,initial:{names:["Color"]}};var Ug=Gg;function Xg(e,t){return an(e,t,{excludeEmpty:!0}).map(r=>S3(e,r))}function S3(e,t){let r=ct(e),n=a=>t[a<t.length-1?a+1:a][e.realValues[0]],o=t.map((a,i)=>{let l=e.realValues[0]?a[e.realValues[0]]:void 0,s=e.realValues[1]?a[e.realValues[1]]:n(i);return{crossValue:r(a,i),mainValues:e.mainValues.map(u=>a[u.name]),openValue:l,closeValue:s,highValue:e.realValues[2]?a[e.realValues[2]]:Math.max(l,s),lowValue:e.realValues[3]?a[e.realValues[3]]:Math.min(l,s),key:t.key,row:a}});return o.key=t.key,o}var _3=e=>e.closeValue>=e.openValue;function jg(e,t,r){let n=r.domain(),o=_t().domain(n).settings(e).defaultColors([e.colorStyles["series-2"]]).mapFunction(on(.5))(),a=_t().settings(e).domain(n)(),i=t().crossValue(u=>u.crossValue).openValue(u=>u.openValue).highValue(u=>u.highValue).lowValue(u=>u.lowValue).closeValue(u=>u.closeValue).decorate((u,c)=>{let m=_3(c)?r(c.key):o(c.key);u.fillStyle=m,u.strokeStyle=m}),l=Ln().mainValue(u=>u.bollinger.average).crossValue(u=>u.crossValue).decorate((u,c)=>{u.strokeStyle=a(c[0].key)}),s=Os().mainValue(u=>u.bollinger.upper).baseValue(u=>u.bollinger.lower).crossValue(u=>u.crossValue).decorate((u,c)=>{u.fillStyle=on(.25)(a(c[0].key))});return wt().series([s,i,l])}function A3(e){return function(t,r){let n=Xg(r,lo(r)),o=Ul().value(g=>g.openValue),a=n.map(g=>{let S=o(g);return g.map((_,v)=>Object.assign({bollinger:S[v]},_))}),i=n.map(g=>g.key).concat(r.hideKeys?r.hideKeys:[]).sort(),l=_t().domain(i).settings(r).mapFunction(on(1))(),s=Ee().settings(r).scale(i.length>1?l:null),u=jg(r,e,l),c=wt().mapping((g,S)=>g[S]).series(a.map(()=>u)),m=Pe().pad([.1,.1]).padUnit("percent"),f=ae(r).settingName("crossValues").valueName("crossValue")(a),d=ae(r).settingName("mainValues").valueNames(["lowValue","highValue"]).memoValue(r.axisMemo[1]).orient("vertical").paddingStrategy(m)(a),p=Qn(f,d).plotArea(we(c,r).orient("vertical").canvas(!0));p.yNice&&p.yNice();let h=Se().chart(p).settings(r).xScale(f.scale).onChange(g=>{let S=a.map(_=>_.filter(v=>v.crossValue>=g.xDomain[0]&&v.crossValue<=g.xDomain[1]));p.yDomain(d.domainFunction(S))}).canvas(!0),x=je().settings(r).xScale(f.scale).yScale(d.scale).yValueName("closeValue").color(l).data(a).canvas(!0);t.datum(a).call(h),t.call(x),t.call(s)}}var Nl=A3;var Qg=Nl(Rs);Qg.plugin={name:"OHLC",category:"Y Chart",max_cells:3500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var Kg=Qg;var Jg=Nl(Is);Jg.plugin={name:"Candlestick",category:"Y Chart",max_cells:4e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Open","Close","High","Low","Tooltip"]},selectMode:"toggle"};var Zg=Jg;function e0(e,t){if(e.realValues.length>1&&e.realValues[1]!==null){let r=e.realValues[1];if(e.mainValues.find(n=>n.name===r)?.type==="string"){let n=t.map(o=>o.data).filter(o=>o.height>0).map(o=>t0(o)).reduce((o,a)=>o.concat(a));return rn(e,n)}else return kr(e,null,null,Xd(t.map(n=>n.extents)))}}function t0(e,t=[]){return e.children&&e.children.length>0?e.children.forEach(r=>t.concat(t0(r,t))):e.data.color&&t.push(e.data.color),t}function El(e){let t={},r=e.realValues.map(o=>o===null?null:e.mainValues.find(a=>a.name===o));return e.data.forEach((o,a)=>{let i=Array.isArray(o.__ROW_PATH__)?o.__ROW_PATH__:[];M3(o).forEach(s=>{let u;t[s]||(t[s]=[]),u=t[s],i.forEach((c,m)=>{let f=u.find(d=>d.name===c);if(f||(f={name:c,children:[]},u.push(f)),e.realValues.length>1&&e.realValues[1]!==null){let d=m===i.length-1,p=co(d?o:e.agg_paths[a][m+1]||o,e.mainValues[1],s);p!==void 0&&(f.color=p)}if(e.realValues.length>2&&e.realValues[2]!==null){f.tooltip=[];for(let d=2;d<e.realValues.length;++d)f.tooltip.push(co(o,r[d],s))}if(m===i.length-1){if(f.name=i.slice(-1)[0],e.crossValues.length===0)f.size=co(o,e.mainValues[0],"");else if(i.length===e.crossValues.length){let d=co(o,e.mainValues[0],s);f.size=d>0?d:0}}u=f.children})})}),Object.entries(t).map(o=>{let a={name:"root",children:o[1]},i=gr(a).sum(s=>s.size),l=iu().size([2*Math.PI,i.height+1])(i);return l.each(s=>{s.current=s,s.mainValues=e.realValues.length===1||e.realValues[1]===null&&e.realValues[2]===null?s.value:[s.value,s.data.color].concat(s.data.tooltip||[]).filter(u=>u!==void 0),s.crossValue=s.ancestors().slice(0,-1).reverse().map(u=>u.data.name),s.key=o[0],s.label=Gt(e.crossValues[s.depth-1<0?0:s.depth-1]?.type||e.mainValues[0].type,s.data.name)}),{split:o[0],data:l,extents:C3(e,o)}})}var co=(e,t,r)=>r.length?e[`${r}|${t.name}`]:e[t.name];function C3(e,[t,r]){if(e.realValues.length>1&&e.realValues[1]!==null){let n=Math.min(...e.data.map(a=>co(a,e.mainValues[1],t))),o=Math.max(...r.map(a=>a.color));return[n,o]}}function M3(e){let t=[];return Object.keys(e).forEach(r=>{if(r!=="__ROW_PATH__"){let n=r.split("|").slice(0,-1).join("|");t.includes(n)||t.push(n)}}),t}var Pl=e=>Es().startAngle(t=>t.x0).endAngle(t=>t.x1).padAngle(t=>Math.min((t.x1-t.x0)/2,.005)).padRadius(e).innerRadius(t=>Math.max(1,(t.y0-1)*e)).outerRadius(t=>Math.max((t.y0-1)*e,(t.y1-1)*e-1)),Qt=e=>e.y0>=1&&e.x1>e.x0;var wa=e=>e.y1<=3&&e.y0>=1&&(e.y1-e.y0)*(e.x1-e.x0)>.06;function Ll(e,t){let r=(e.x0+e.x1)/2*180/Math.PI,n=(e.y0-1+(e.y1-1))/2*t;return`rotate(${r-90}) translate(${n},0) rotate(${r<180?0:180})`}function r0(e,t){let r=this.getBBox().width;if(r>t){let n=e.label,o=L(this);for(;r>t;)n=n.substring(0,n.length-1),o.text(()=>n),r=this.getBBox().width;o.text(()=>`${n.substring(0,n.length-3).replace(/\s+$/,"")}...`)}}var n0=(e,t,r,n,o,a,i,l,s)=>(u,c)=>{s.sunburstLevel[l]=u.data.name,u.parent?(r.datum(u.parent),r.style("cursor","pointer"),n.html(`&#8682; ${u.label}`)):(r.datum(e),r.style("cursor","default"),n.html("")),e.each(f=>f.target={x0:Math.max(0,Math.min(1,(f.x0-u.x0)/(u.x1-u.x0)))*2*Math.PI,x1:Math.max(0,Math.min(1,(f.x1-u.x0)/(u.x1-u.x0)))*2*Math.PI,y0:Math.max(0,f.y0-u.depth),y1:Math.max(0,f.y1-u.depth)});let m=t.transition().duration(c?0:750);o.transition(m).tween("data",f=>{let d=Ve(f.current,f.target);return p=>f.current=d(p)}).filter(function(f){return+this.getAttribute("fill-opacity")||Qt(f.target)}).attr("fill-opacity",f=>Qt(f.target)?1:0).attr("user-select",f=>Qt(f.target)?"initial":"none").style("pointer-events",f=>Qt(f.target)?"initial":"none").attrTween("d",f=>()=>Pl(i)(f.current)),a.filter(function(f){return+this.getAttribute("fill-opacity")||wa(f.target)}).transition(m).attr("fill-opacity",f=>+wa(f.target)).attrTween("transform",f=>()=>Ll(f.current,i))};function o0(){let e=null,t=null,r=null,n=null,o=null,a=i=>{let l=i.selectAll("g.segment").data(r.descendants().slice(1)),s=l.enter().append("g").attr("class","segment");s.append("path"),s.append("text").attr("class","segment").attr("dy","0.35em");let u=s.merge(l),c=u.select("path").attr("fill-opacity",h=>Qt(h.current)?1:0).attr("user-select",h=>Qt(h.current)?"initial":"none").style("pointer-events",h=>Qt(h.current)?"initial":"none").attr("d",h=>Pl(o)(h.current));n&&c.style("fill",h=>n(h.data.color));let m=u.select("text").attr("fill-opacity",h=>+wa(h.current)).attr("transform",h=>Ll(h.current,o)).text(h=>h.label).each(function(h){r0.call(this,h,o)}),f=i.select("text.parent"),d=i.select("circle").attr("r",o).datum(r),p=n0(r,i,d,f,c,m,o,t,e);if(e.sunburstLevel){let h=r.descendants().find(x=>x.data.name===e.sunburstLevel[t]);h&&p(h,!0)}else e.sunburstLevel={};d.on("click",h=>p(h,!1)),c.filter(h=>h.children).style("cursor","pointer").on("click",h=>p(h,!1))};return a.settings=(...i)=>i.length?(e=i[0],a):e,a.split=(...i)=>i.length?(t=i[0],a):t,a.data=(...i)=>i.length?(r=i[0],a):r,a.color=(...i)=>i.length?(n=i[0],a):n,a.radius=(...i)=>i.length?(o=i[0],a):o,a}function a0(e,t){let r=El(t),n=e0(t,r),o=uo().elementsPrefix("sunburst");if(e.datum(r).call(o),n){let c=t.realValues[1];if(t.mainValues.find(m=>m.name===c)?.type==="string"){let m=Ee().settings(t).scale(n);e.call(m)}else{let m=Dr().scale(n);e.call(m)}}let a=o.chartContainer(),i=o.chartEnter(),l=o.chartDiv(),s=o.chartTitle(),u=o.containerSize();s.each((c,m,f)=>L(f[m]).text(c.split)),a.append("circle").attr("fill","none").style("pointer-events","all"),a.append("text").attr("class","parent"),i.merge(l).select("svg").select("g.sunburst").attr("transform",`translate(${u.width/2}, ${u.height/2})`).each(function({split:c,data:m}){let f=L(this),d=this.parentNode,{width:p,height:h}=d.getBoundingClientRect(),x=(Math.min(p,h)-24)/Math.max(2,t.crossValues.length*2);o0().settings(t).split(c).data(m).color(n).radius(x)(f),br().settings(t)(f.selectAll("g.segment"))})}a0.plugin={name:"Sunburst",category:"Hierarchial Chart",max_cells:7500,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var i0=a0;function l0(e,t){if(e.realValues.length<1||e.realValues[1]===null||e.realValues[1]===void 0)return;let r=e.realValues[1],n=t.filter(o=>o.height>0).map(o=>s0(o)).reduce((o,a)=>o.concat(a));if(e.mainValues.find(o=>o.name===r)?.type==="string")return rn(e,n);{let o=Math.min(...n),a=Math.max(...n);return kr(e,null,null,[o,a])}}function s0(e,t=[]){return e.children&&e.children.length>0?e.children.forEach(r=>t.concat(s0(r,t))):e.data.color&&t.push(e.data.color),t}var u0=7,zl=e=>!!(e.target&&e.target.textAttributes),Bl=(e,t,r)=>{e.selectAll("text").each(function(o,a){let i=D3(o,t,r);this.style=i});let n=_a(e);T3(n),nc(n)},c0=e=>{e.each((t,r,n)=>{L(n[r]).selectAll("text").attr("dx",t.target.textAttributes.dx).attr("dy",t.target.textAttributes.dy).attr("style",t.target.textAttributes.style)})},nc=e=>{let n=a=>a.getBoundingClientRect(),o=[];e.selectAll("text").filter((a,i,l)=>L(l[i]).attr("style")===xn.high).each((a,i,l)=>o.push(l[i])),e.selectAll("text").filter((a,i,l)=>L(l[i]).attr("style")===xn.low).each((a,i,l)=>{let s=l[i];o.filter(u=>bu("x",n(u),n(s))&&bu("y",n(u),n(s),-2)).forEach(()=>L(s).attr("dy",Number(L(s).attr("dy"))+14))})},f0=e=>L(e).style("opacity",Sa[L(e).attr("class")]),m0=e=>L(e).style("opacity",null),Sa={top:1,mid:.7,lower:0},_a=e=>e.filter((t,r,n)=>L(n[r]).selectAll("text").attr("style")!==xn.zero),Ol=e=>e.selectAll("text").each((t,r,n)=>V3(n[r])),T3=e=>e.selectAll("text").each((t,r,n)=>d0(n[r])),d0=e=>{let t=L(e),r=e.getBoundingClientRect();t.attr("dx",0-r.width/2).attr("dy",0+r.height/4)},V3=e=>{let r=e.parentNode.childNodes[0],n=e.getBBox(),o=r.getBBox();k3(e,o,n)||L(e).attr("style",L(e).attr("style"))},k3=(e,t,r)=>{let n=Math.min(t.height/r.height,t.width/r.width);if(n<1){let o=parseInt(L(e).style("font-size")),a=Math.floor(o*n);return o>u0&&a>u0?(L(e).style("font-size",`${a}px`),d0(e)):(L(e).style("font-size",null),L(e).style("opacity","0")),!0}return!1},D3=(e,t,r)=>{if(!r.filter(n=>n!=="").every(n=>e.crossValue.includes(n)))return xn.zero;switch(e.depth){case t+1:return xn.high;case t+2:return xn.low;default:return xn.zero}},xn={high:"font-size:14px;z-index:5;pointer-events: none;",low:"font-size:8px;opacity:0.7;z-index:4;",zero:"font-size:0px;opacity:0;z-index:4;"};var Il=(e,t)=>{let r=lu().size([e,t]).paddingInner(n=>1+2*(n.height-1));return r.tile(su),r};var N3=(e,t)=>t.every(r=>e.crossValue.includes(r));function oc(e,t,r,n,o,a){E3(e,t,r,n,o),e.mapLevel[n].levelRoot=!0,P3(e,a.node().getBoundingClientRect().width,a.node().getBoundingClientRect().height,n),h0(r,n)}function p0(e,t){e.each(r=>{r.mapLevel=[],r.mapLevel[0]={x0:r.x0,x1:yn(r)+r.x0,y0:r.y0,y1:bn(r)+r.y0,visible:!0,opacity:1}}),t.mapLevel[0].levelRoot=!0,h0(e,0)}var Rl=(e,t)=>{e.each((r,n,o)=>{let a=L(o[n]).selectAll("text");r.mapLevel[t].textAttributes={dx:a.attr("dx"),dy:a.attr("dy"),class:a.attr("class"),"font-size":a.style("font-size")}})};function E3(e,t,r,n,o){let a={x:e.x0,y:e.y0,width:e.x1-e.x0,height:e.y1-e.y0},i={width:o.x1-o.x0,height:o.y1-o.y0},l={width:i.width/a.width,height:i.height/a.height};r.each(s=>{let u=(s.x0-a.x)*l.width,c=(s.y0-a.y)*l.height,m=yn(s)*l.width,f=bn(s)*l.height,d=N3(s,t)&&s.data.name!==t[n-1];s.mapLevel[n]={x0:u,x1:m+u,y0:c,y1:f+c,visible:d,opacity:d?1:0}}),e.mapLevel[n].levelRoot=!0}function P3(e,t,r,n){let i=Il(t,r)(gr(e.data).sum(s=>s.size)).descendants(),l=e.descendants();i.forEach((s,u)=>{l[u].mapLevel[n].x0=i[u].x0,l[u].mapLevel[n].x1=i[u].x1,l[u].mapLevel[n].y0=i[u].y0,l[u].mapLevel[n].y1=i[u].y1})}function h0(e,t){e.selectAll("text").each((r,n,o)=>{let a=L(o[n]),i=L(o[n]).datum(),l=a.attr("class");i.mapLevel[t].textLockedAt={opacity:Sa[l]}})}function g0(e,t,r,n,o,a,i,l,s){if(n.treemapLevel>0){let u=i.crossValue;ic(i,e,t,r,n,o,a,i,0,u,l,s,1,!1),n.treemapRoute.slice(1,n.treemapRoute.length).forEach(c=>{let m=t.filter(d=>d.crossValue===c).datum(),f=m.crossValue;oc(m,f,t,m.depth,i,o),ic(m,e,t,r,n,o,a,i,m.depth,f,l,s,1,!1)})}}function lc(e,t,r,n,o,a,i,l,s,u){if(!e.children)return;o.treemapLevel<e.depth?o.treemapRoute.push(e.crossValue):o.treemapRoute.pop(),o.treemapLevel=e.depth;let c=e.crossValue;(!e.mapLevel[o.treemapLevel]||!e.mapLevel[o.treemapLevel].levelRoot)&&oc(e,c,r,o.treemapLevel,l,a),ic(e,t,r,n,o,a,i,l,o.treemapLevel,c,s,u)}function ic(e,t,r,n,o,a,i,l,s,u,c,m,f=500,d=!0){let p=e.parent,h=i.transition("main transition").duration(f).ease(Hi);r.each(g=>g.target=g.mapLevel[s]),zl(e)||O3(r,c),r.transition(h).tween("data",g=>{let S=Ve(g.current,g.target);return _=>g.current=S(_)}).styleTween("opacity",g=>()=>g.current.opacity).attrTween("pointer-events",g=>()=>g.target.visible?"all":"none"),t.transition(h).filter(g=>g.target.visible).styleTween("x",g=>()=>`${g.current.x0}px`).styleTween("y",g=>()=>`${g.current.y0}px`).styleTween("width",g=>()=>`${g.current.x1-g.current.x0}px`).styleTween("height",g=>()=>`${g.current.y1-g.current.y0}px`),n.transition(h).filter(g=>g.target.visible).attrTween("x",g=>()=>g.current.x0+yn(g.current)/2).attrTween("y",g=>()=>g.current.y0+bn(g.current)/2).end().catch(()=>ac(r)).then(()=>{zl(e)||(nc(x),Ol(x),L3(n,i,f),d&&Rl(r,s),ac(r,c))}).catch(g=>{console.error("Exception completing promises after main transition",g),ac(r,c)}),zl(e)?c0(r):(n.each((g,S,_)=>f0(_[S])),Bl(r,s,u));let x=_a(r);p?c.hide(!1).text(e.label).onClick(()=>{lc(p,t,r,n,o,a,i,l,c,m);let g=a.node().getRootNode().host.parentElement;ia(g,p,m)})():c.hide(!0)()}async function L3(e,t,r=400){let n=t.transition("text fade transition").duration(r).ease(Hi);await e.transition(n).filter(o=>o.target.visible).tween("data",(o,a,i)=>{let l=i[a],s=Ve(z3(o),B3(l));return u=>o.current.opacity=s(u)}).styleTween("opacity",o=>()=>o.current.opacity).end().catch(o=>console.error("Exception in text fade transition",o)).then(()=>e.each((o,a,i)=>m0(i[a])))}var z3=e=>e.target.textLockedAt.opacity,B3=e=>Sa[L(e).attr("class")],O3=(e,t)=>{t.deactivate(!0),e.each((r,n,o)=>{L(o[n]).selectAll("rect").style("pointer-events","none")})},ac=(e,t=void 0)=>{t&&t.deactivate(!1),e.each((r,n,o)=>{L(o[n]).selectAll("rect").style("pointer-events",null)})};var x0=`<button id="goto-parent">Goto parent</button>
`;function y0(e){let t=null,r=null,n=!0,o=!1,a=be(e,".parent-controls",()=>e.append("div").attr("class","parent-controls").style("display",n?"none":"").html(x0)),i=()=>{a.style("display",n?"none":"").select("#goto-parent").style("pointer-events",o?"none":null).html(`\u21EA ${r}`).on("click",()=>t())};return i.deactivate=(...l)=>{if(!l.length)return o;o=l[0];let s=a.select("#goto-parent");return o?s.style("pointer-events","none"):s.style("pointer-events",null),i},i.hide=(...l)=>l.length?(n=l[0],i):n,i.text=(...l)=>l.length?(r=l[0],i):r,i.onClick=(...l)=>l.length?(t=l[0],i):t,i}var Fl={leaf:"leafnode",branch:"branchnode",root:"rootnode"},yn=e=>e.x1-e.x0,bn=e=>e.y1-e.y0,R3=(e,t)=>t.depth===e,b0=(e,t)=>t.depth===0?Fl.root:R3(e,t)?Fl.leaf:Fl.branch;function v0(){let e=null,t=null,r=null,n=null,o=null,a=null,i=l=>{a=y0(o),a();let s=r.height;e.treemapLevel||(e.treemapLevel=0),e.treemapRoute||(e.treemapRoute=[]),Il(o.node().getBoundingClientRect().width,o.node().getBoundingClientRect().height)(r);let c=l.selectAll("g").data(r.descendants()),m=c.enter().append("g");m.append("rect"),m.append("text");let f=m.merge(c).sort((x,g)=>g.depth-x.depth),d=f.select("rect").attr("class",x=>`treerect ${b0(s,x)}`).style("x",x=>`${x.x0}px`).style("y",x=>`${x.y0}px`).style("width",x=>`${yn(x)}px`).style("height",x=>`${bn(x)}px`);d.style("fill",x=>b0(s,x)===Fl.leaf?x.data.color?n(x.data.color):t.colorStyles.series:"transparent");let p=f.filter(x=>x.value!==0).select("text").attr("x",x=>x.x0+yn(x)/2).attr("y",x=>x.y0+bn(x)/2).text(x=>x.label),h=d.filter(x=>x.crossValue.length===0).datum();p0(f,h),Bl(f,0,[]),Ol(_a(f)),Rl(f,0),e.treemapRoute.length===0&&e.treemapRoute.push(h.crossValue),d.filter(x=>x.children).on("click",(x,g)=>lc(g,d,f,p,e,o,l,h,a,t)),g0(d,f,p,e,o,l,h,a,t)};return i.settings=(...l)=>l.length?(e=l[0],t=l[1],i):e,i.data=(...l)=>l.length?(r=l[0],i):r,i.color=(...l)=>l.length?(n=l[0],i):n,i.container=(...l)=>l.length?(o=l[0],i):o,i}function w0(e,t){t.treemaps||(t.treemaps={});let r=El(t),n=l0(t,r.map(s=>s.data));n&&this._container.classList.add("has-legend");let o=uo().elementsPrefix("treemap");if(e.datum(r).call(o),n){let s=t.realValues[1];if(t.mainValues.find(u=>u.name===s)?.type==="string"){let u=Ee().settings(t).scale(n);e.call(u)}else{let u=Dr().scale(n);e.call(u)}}let a=o.chartEnter(),i=o.chartDiv();o.chartTitle().each((s,u,c)=>L(c[u]).text(s.split)),a.merge(i).select("svg").select("g.treemap").each(function({split:s,data:u}){let c=L(this);t.treemaps[s]||(t.treemaps[s]={}),v0().settings(t.treemaps[s],t).data(u).container(L(L(this.parentNode).node().parentNode)).color(n)(c),br().settings(t).centered(!0)(c.selectAll("g"))})}w0.plugin={type:"Treemap",name:"Treemap",category:"Hierarchial Chart",max_cells:3e3,max_columns:50,render_warning:!0,initial:{type:"number",count:1,names:["Size","Color","Tooltip"]}};var S0=w0;var F3=[pg,Sg,Cg,Ng,zg,Rg,Yg,Kg,Zg,S0,i0,Ug],sc=F3;var A0=z0(_0(),1),cc=(e,t)=>{if(!t.colorStyles){let r={scheme:[],gradient:{},interpolator:{},grid:{}},n=Y3(e);r.series=n("--d3fc-local-series");for(let a=1;;a++){let i=`series-${a}`,l=n(`--d3fc-local-${i}`);if(!l)break;r[i]=l,r.scheme.push(l)}r.opacity=$3(r.series),r.grid.gridLineColor=n`--d3fc-gridline--color`,["full","positive","negative"].forEach(a=>{let i=n(`--d3fc-local-${a}--gradient`);r.gradient[a]=W3(i,r.opacity)}),t.colorStyles=r}if(!t.textStyles){let r=window.getComputedStyle(e),n=r.getPropertyValue("color"),o=`12px ${r.getPropertyValue("font-family")}`;t.textStyles={color:n,font:o}}},$3=e=>Te(e).opacity,H3=(e,t)=>{let r=Te(`#${e}`);return r.opacity=t,r+""},Y3=e=>{let t=getComputedStyle(e);return r=>t?.getPropertyValue(r)},W3=(e,t)=>{let r=A0.parse(e)[0].colorStops;return r.map((n,o)=>[n.length?n.length.value/100:o/(r.length-1),H3(n.value,t)]).sort((n,o)=>n[0]-o[0])};var C0=':host .chart{--d3fc-local-full--gradient:var(--d3fc-full--gradient,linear-gradient(#4d342f 0%,#e4521b 22.5%,#feeb65 42.5%,#f0f0f0 50%,#dcedc8 57.5%,#42b3d5 67.5%,#1a237e 100%));--d3fc-local-positive--gradient:var(--d3fc-positive--gradient,linear-gradient(#dcedc8 0%,#42b3d5 35%,#1a237e 100%));--d3fc-local-negative--gradient:var(--d3fc-negative--gradient,linear-gradient(#feeb65 100%,#e4521b 70%,#4d342f 0%));--d3fc-local-series:var(--d3fc-series,rgba(31,119,180,0.5));--d3fc-local-series-1:var(--d3fc-series-1,#0366d6);--d3fc-local-series-2:var(--d3fc-series-2,#ff7f0e);--d3fc-local-series-3:var(--d3fc-series-3,#2ca02c);--d3fc-local-series-4:var(--d3fc-series-4,#d62728);--d3fc-local-series-5:var(--d3fc-series-5,#9467bd);--d3fc-local-series-6:var(--d3fc-series-6,#8c564b);--d3fc-local-series-7:var(--d3fc-series-7,#e377c2);--d3fc-local-series-8:var(--d3fc-series-8,#7f7f7f);--d3fc-local-series-9:var(--d3fc-series-9,#bcbd22);--d3fc-local-series-10:var(--d3fc-series-10,#17becf);}:host .chart .series{fill:var(--d3fc-local-series);}:host .chart .series-1{fill:var(--d3fc-local-series-1);}:host .chart .series-2{fill:var(--d3fc-local-series-2);}:host .chart .series-3{fill:var(--d3fc-local-series-3);}:host .chart .series-4{fill:var(--d3fc-local-series-4);}:host .chart .series-5{fill:var(--d3fc-local-series-5);}:host .chart .series-6{fill:var(--d3fc-local-series-6);}:host .chart .series-7{fill:var(--d3fc-local-series-7);}:host .chart .series-8{fill:var(--d3fc-local-series-8);}:host .chart .series-9{fill:var(--d3fc-local-series-9);}:host .chart .series-10{fill:var(--d3fc-local-series-10);}:host{user-select:none;}:host .chart{position:absolute;box-sizing:border-box;left:0;top:0;width:100%;height:100%;padding:12px;overflow:hidden;}:host .chart.heatmap d3fc-group.cartesian-chart,:host .chart.treemap d3fc-group.cartesian-chart{grid-template-columns:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);grid-template-rows:minmax(0em,max-content)auto 1fr auto minmax(0em,max-content);}:host .chart .chart-label{display:none;}:host .chart.heatmap{padding-right:120px;}:host .chart.xyscatter{padding:0;font-size:14px;}:host .chart.xyscatter d3fc-group:first-child{padding:16px;padding-top:0px;width:calc(100% - 32px);height:calc(100% - 16px);}:host .chart.xyscatter .multi-xlabel{position:absolute;bottom:0;height:2.5em;width:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .multi-ylabel{position:absolute;top:0;width:2.5em;height:100%;display:flex;justify-content:center;align-items:center;background:var(--d3fc-legend--background);}:host .chart.xyscatter .outer-container{height:100%;}:host .chart.xyscatter .inner-container{display:inline-grid;overflow-y:auto;width:calc(100% - 16px);height:100%;padding:0;margin:0;}:host .chart.xyscatter .inner-container div{overflow:hidden;}:host .chart.xyscatter .inner-container text.segment,:host .chart.xyscatter .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.xyscatter .inner-container div.xy-scatter-container{margin:5px 0;}:host .chart.sunburst{padding:0;font-size:14px;}:host .chart.sunburst .outer-container{height:100%;}:host .chart.sunburst .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.sunburst .inner-container div{overflow:hidden;}:host .chart.sunburst .inner-container .sunburst-container:not(:only-child) svg{transform:translate(0,-27px);}:host .chart.sunburst .inner-container svg{width:100%;height:100%;}:host .chart.sunburst .inner-container path{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.sunburst .inner-container text.segment,:host .chart.sunburst .inner-container text.parent{text-anchor:middle;user-select:none;pointer-events:none;fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.sunburst .inner-container div.title-container{margin-top:5px;}:host .chart.has-legend{padding-right:120px;}:host .chart.treemap .treemap-container{position:relative;}:host .chart.treemap .treemap-container:not(:only-child){width:calc(100% - 12px);height:calc(100% - 12px);}:host .chart.treemap .outer-container{height:100%;}:host .chart.treemap .inner-container{width:100%;height:100%;display:inline-grid;padding:0;margin:0;overflow-x:hidden;overflow-y:auto;}:host .chart.treemap .inner-container div{overflow:hidden;}:host .chart.treemap .inner-container svg{width:100%;height:100%;}:host .chart.treemap .inner-container .treerect{stroke:var(--d3fc-treedata-axis--lines,var(--d3fc-axis--lines,white));fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host .chart.treemap .inner-container .treerect:hover{cursor:pointer;stroke:var(--d3fc-treedata--hover-highlight,black);stroke-opacity:1;}:host .chart.treemap .inner-container .rootnode{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .branchnode{opacity:0;}:host .chart.treemap .inner-container .branchnode:hover{fill-opacity:0.1;opacity:1;fill:var(--d3fc-treedata--hover-highlight,black);}:host .chart.treemap .inner-container .leafnode{fill-opacity:0.8;}:host .chart.treemap .inner-container .leafnode:hover{fill-opacity:0.5;}:host .chart.treemap .inner-container #hidden{opacity:0;pointer-events:none;z-index:0;}:host .chart.treemap .inner-container .top{font-size:14px;z-index:5;pointer-events:none;}:host .chart.treemap .inner-container .mid{font-size:8px;opacity:0.7;z-index:4;}:host .chart.treemap .inner-container .lower{font-size:0px;opacity:0;z-index:4;}:host .chart.treemap .inner-container text{fill:var(--d3fc-treedata--labels,rgb(51,51,51));}:host .chart.treemap .inner-container text.title{dominant-baseline:hanging;}:host .chart.treemap .inner-container .parent-controls{position:absolute;top:12px;right:auto;left:30px;width:auto;z-index:4;transition:box-shadow 1s;}:host .chart.treemap .inner-container .parent-controls:hover{box-shadow:2px 2px 6px#000;transition:box-shadow 0.2s;}:host .chart .x-label{height:1.2em!important;line-height:1em!important;}:host .chart .x-label,:host .chart .y-label{color:var(--d3fc-label--color,inherit);font-size:14px;}:host .chart d3fc-canvas.plot-area{display:none;}:host .chart.xyscatter d3fc-canvas.plot-area,:host .chart.xyline d3fc-canvas.plot-area,:host .chart.ohlc d3fc-canvas.plot-area,:host .chart.candlestick d3fc-canvas.plot-area,:host .chart.heatmap d3fc-canvas.plot-area{display:block;}:host .chart .y-axis text,:host .chart .x-axis text{fill:var(--d3fc-axis-ticks--color,rgb(80,80,80));font-size:11px;}:host .chart .y-axis path,:host .chart .x-axis path{stroke:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label{display:inline-block;margin:0 10px;cursor:pointer;}:host .chart .splitter-label::after{margin-left:5px;color:var(--d3fc-axis--lines,rgb(180,210,225));}:host .chart .splitter-label:hover::after{color:var(--d3fc-axis-ticks--color,rgb(80,80,80));}:host .chart .splitter-label.disabled::after{color:rgba(80,80,80,0.3);}:host .chart .splitter-label.disabled{cursor:default;}:host .chart .y-label.left-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-desc-icon--mask-image);mask-image:var(--sort-desc-icon--mask-image);}:host .chart .y-label.right-label .splitter-label::after{background-repeat:no-repeat;background-color:var(--icon--color);content:"";display:inline-block;-webkit-mask-size:cover;mask-size:cover;width:16px;height:12px;-webkit-mask-image:var(--sort-asc-icon--mask-image);mask-image:var(--sort-asc-icon--mask-image);}:host .chart.ybar .y-axis path,:host .chart.yline .y-axis path,:host .chart.xyline .y-axis path,:host .chart.xyline .x-axis path,:host .chart.yarea .y-axis path,:host .chart.yscatter .y-axis path,:host .chart.xyscatter .y-axis path,:host .chart.xyscatter .x-axis path,:host .chart.xbar .x-axis path{visibility:hidden;}:host .chart .y-label{white-space:nowrap;}:host .chart .nearbyTip{fill:var(--d3fc-series,rgba(31,119,180,0.5));}:host #dragHandles{position:absolute;top:0px;right:0px;left:auto;pointer-events:none;}:host #dragHandles rect{pointer-events:all;}:host .label rect{fill:none;}:host .legend-container{position:absolute;top:12px;right:12px;left:auto;width:150px;height:280px;}:host .legend-container.legend-color{width:90px;height:150px;}:host .legend-container[borderbox-on-hover="true"]{transition:box-shadow 1s;}:host .legend-container[borderbox-on-hover="true"]:hover{background-color:var(--d3fc-legend--background,#ffffff);transition:box-shadow 0.2s,background-color 0.2s;}:host .legend-container .legend{font-size:8pt;width:100%;}:host .legend-container .legend .cell{cursor:pointer;}:host .legend-container .legend .cell path{fill:var(--d3fc-series,rgba(31,119,180,0.5));stroke:var(--d3fc-series,rgb(31,119,180));}:host .legend-container .legend .cell.hidden path{fill:rgba(204,204,204,0.5);stroke:rgb(204,204,204);}:host .legend-container .legend .cell.hidden circle{fill:rgb(204,204,204)!important;}:host .legend-container text{fill:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .label:hover{fill:rgb(34,160,206);}:host .legend-container #legend-axis path{stroke:var(--d3fc-legend--text,rgb(51,51,51));}:host .legend-container .legend-controls{margin-left:12px;}:host .legend-container .legend-controls #up-arrow,:host .legend-container .legend-controls #down-arrow{cursor:pointer;color:rgb(31,119,180);}:host .legend-container .legend-controls #up-arrow.disabled,:host .legend-container .legend-controls #down-arrow.disabled{cursor:default;color:rgb(51,51,51);}:host .heatmap .legend-container.legend-color{height:200px;}:host .treemap .legend-container.legend-color{height:200px;}:host .treemap .legend-container:not(.legend-color){width:100px;}:host .zoom-controls{position:absolute;top:10px;left:0;width:100%;text-align:center;}:host .zoom-controls button{-webkit-appearance:none;background:var(--plugin--background,rgb(247,247,247));border:1px solid var(--inactive--color,rgb(204,204,204));color:var(--d3fc-label--color,inherit);font-size:12px;padding:8px;opacity:0.5;cursor:pointer;}:host .zoom-controls button:hover{opacity:1;}:host .parent-controls{position:absolute;top:30px;right:145px;width:100%;text-align:right;}:host .parent-controls button{-webkit-appearance:none;background:rgb(247,247,247);border:1px solid rgb(204,204,204);padding:10px;opacity:0.5;cursor:pointer;}:host .parent-controls button:hover{background:rgb(230,230,230);}:host div.tooltip{position:absolute;text-align:left;font-size:12px;font-weight:300;white-space:nowrap;padding:0.5em;background:var(--d3fc-tooltip--background,#ffffff);color:var(--d3fc-tooltip--color,black);border:1px solid var(--d3fc-tooltip--border-color,#777777);box-shadow:var(--d3fc-tooltip--box-shadow,none);pointer-events:none;}:host div.tooltip ul{margin:0;padding:0;list-style-type:none;}';var M0={initial:{type:"number",count:1,names:[]},selectMode:"select"},G3=`${C0}${U3()}`,fc=["crossValues","mainValues","realValues","splitValues","filter","data","size","colorStyles","textStyles","agg_paths","treemaps","axisMemo","columns_config"];function U3(){let e=document.querySelector("head").querySelectorAll("style"),t=[];return e.forEach(r=>{r.innerText.indexOf("d3fc-")!==-1&&t.push(r.innerText)}),t.join("")}async function X3(e){await customElements.get("perspective-viewer").registerPlugin(e)}function T0(...e){let t=new Set(e.length>0?e:sc.map(r=>r.plugin.name));sc.forEach(r=>{if(t.has(r.plugin.name)){let n=r.plugin.name.toLowerCase().replace(/[ \t\r\n\/]*/g,""),o=`perspective-viewer-d3fc-${n}`;customElements.define(o,class extends HTMLElement{_chart;_settings;render_warning;_initialized;_container;_staged_view;config;constructor(){super(),this._chart=null,this._settings=null,this.render_warning=!0}connectedCallback(){this._initialized||(this.attachShadow({mode:"open"}),this.shadowRoot.innerHTML=`<style>${G3}</style>`,this.shadowRoot.innerHTML+='<div id="container" class="chart"></div>',this._container=this.shadowRoot.querySelector(".chart"),this._initialized=!0)}get name(){return r.plugin.name}get category(){return r.plugin.category}get select_mode(){return r.plugin.selectMode||"select"}get min_config_columns(){return r.plugin.initial?.count||M0.initial.count}get config_column_names(){return r.plugin.initial?.names||M0.initial.names}get max_cells(){return r.plugin.max_cells||4e3}set max_cells(a){r.plugin.max_cells=a}get max_columns(){return r.plugin.max_columns||50}set max_columns(a){r.plugin.max_columns=a}can_render_column_styles(a,i){return r.can_render_column_styles?.call(this,a,i)}column_style_controls(a,i){return r.column_style_controls?.call(this,a,i)}async render(){var a=document.createElement("canvas"),i=this.shadowRoot.querySelector("#container");a.width=i.offsetWidth,a.height=i.offsetHeight;let l=a.getContext("2d");l.fillStyle=window.getComputedStyle(this).getPropertyValue("--plugin--background")||"white",l.fillRect(0,0,a.width,a.height);let s=window.getComputedStyle(this).getPropertyValue("color"),u=Array.from(this.shadowRoot.querySelectorAll("svg:not(#dragHandles)"));for(let d of u.reverse()){var c=document.createElement("img");let p=0;c.width=d.parentElement?d.parentElement.offsetWidth:p,c.height=d.parentElement?d.parentElement.offsetHeight:p;let h=d.cloneNode(!0);h.hasAttribute("viewBox")||h.setAttribute("viewBox",`0 0 ${c.width} ${c.height}`),h.setAttribute("xmlns","http://www.w3.org/2000/svg");for(let g of h.querySelectorAll("text"))g.setAttribute("fill",s);var m=new XMLSerializer().serializeToString(h);m=m.replace(/[^\x00-\x7F]/g,"");let x=new Promise((g,S)=>{c.onload=g,c.onerror=S});try{c.src=`data:image/svg+xml;base64,${btoa(m)}`,await x}catch{let S=new Promise((_,v)=>{c.onload=_,c.onerror=v});c.src=`data:image/svg+xml;utf8,${m}`,await S}l.drawImage(c,d.parentNode.offsetLeft,d.parentNode.offsetTop,c.width,c.height)}let f=Array.from(this.shadowRoot.querySelectorAll("canvas"));for(let d of f.reverse())l.drawImage(d,d.parentNode.offsetLeft,d.parentNode.offsetTop,d.width/window.devicePixelRatio,d.height/window.devicePixelRatio);return await new Promise(d=>a.toBlob(p=>d(p)),"image/png")}async draw(a,i,l){if(this.offsetParent===null){this._staged_view=[a,i,l];return}this._staged_view=void 0,this._settings&&(this._settings.axisMemo=[[1/0,-1/0],[1/0,-1/0]]),await this.update(a,i,l,!0)}async update(a,i,l,s=!1){if(this.offsetParent===null)return;let u=this.parentElement,c,m,f=r.plugin.name!=="Sunburst";i&&l?c=a.to_columns_string({end_row:l,end_col:i,leaves_only:f}):i?c=a.to_columns_string({end_col:i,leaves_only:f}):l?c=a.to_columns_string({end_row:l,leaves_only:f}):c=a.to_columns_string({leaves_only:f}),m=await Promise.all([u.save(),u.getTable().then(D=>D.schema()),a.expression_schema(!1),a.schema(!1),c,a.get_config()]);let[d,p,h,x,g,S]=m,_=JSON.parse(g),v=Object.keys(_),b={row(D){let N={};for(let Y of v)N[Y]=_[Y][D];return N}};this.config=d;let y=this.config.columns,C=function(D){let N=p[D];return N||(N=h[D]),N},{columns:T,group_by:R,split_by:F,filter:E}=S,W=_[Object.keys(_)[0]]||[],P=R.length>0?W.reduce((D,N,Y)=>{let q=b.row(Y);if(q.__ROW_PATH__&&q.__ROW_PATH__.length==R.length)D.agg_paths.push(D.aggs.slice()),D.rows.push(q);else{let k=q.__ROW_PATH__.filter(O=>O!==void 0).length;D.aggs[k]=q,D.aggs=D.aggs.slice(0,k+1)}return D},{rows:[],aggs:[],agg_paths:[]}):{rows:W.map((D,N)=>b.row(N))},w=(D,N)=>R.length?D:{...D,__ROW_PATH__:[N]},B=P.rows.map(w),A={realValues:y,crossValues:R.map(D=>({name:D,type:C(D)})),mainValues:T.map(D=>({name:D,type:x[D]})),splitValues:F.map(D=>({name:D,type:C(D)})),filter:E,data:B,agg_paths:P.agg_paths,...this.config.plugin_config};this._chart=r;let V={set:(D,N,Y)=>(fc.includes(N)||this._container&&this._container.dispatchEvent(new Event("perspective-plugin-update",{bubbles:!0,composed:!0})),D[N]=Y,!0)},M=[[1/0,-1/0],[1/0,-1/0]];this._settings=new Proxy({axisMemo:M,...this._settings,...A},V),this._settings.splitMainValues&&this._settings.splitMainValues.length>=T.length&&(this._settings.splitMainValues=[]),cc(this._container,this._settings),s&&(this._container.innerHTML=""),this._draw(),await new Promise(D=>requestAnimationFrame(D))}async clear(){this._container&&(this._container.innerHTML="")}_draw(){if(this.offsetParent!==null){let a=L(this._container),i=`chart ${n}`;this._settings.size=this._container.getBoundingClientRect(),this._settings.data.length>0?this._chart(a.attr("class",i),this._settings):a.attr("class",`${i} disabled`)}}async resize(a){if(this.offsetParent!==null)if(this._settings?.data!==void 0)this._draw();else{let[i,l,s]=this._staged_view;this._staged_view=void 0,this.draw(i,l,s)}}async restyle(a,i,l){let s=this._settings;s&&(delete s.colorStyles,delete s.textStyles,this.isConnected&&(cc(this._container,this._settings),this.resize(a)))}async delete(){this._container.innerHTML=""}getContainer(){return this._container}save(){let a={...this._settings};return fc.forEach(i=>{delete a[i]}),a}restore(a,i){let l={};for(let s of fc)this._settings?.[s]!==void 0&&(l[s]=this._settings?.[s]);this._settings={...l,...a,columns_config:i}}}),customElements.whenDefined("perspective-viewer").then(()=>X3(o))}})}Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);T0();
//# sourceMappingURL=perspective-viewer-d3fc.js.map
